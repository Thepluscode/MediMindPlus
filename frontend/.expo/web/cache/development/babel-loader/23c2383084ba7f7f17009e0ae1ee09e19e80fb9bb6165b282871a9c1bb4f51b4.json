{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { authService } from \"../../services/authService\";\nvar initialState = {\n  user: null,\n  token: null,\n  refreshToken: null,\n  isAuthenticated: false,\n  isLoading: false,\n  error: null\n};\nexport var loginUser = createAsyncThunk('auth/loginUser', function () {\n  var _ref3 = _asyncToGenerator(function* (_ref, _ref2) {\n    var email = _ref.email,\n      password = _ref.password;\n    var rejectWithValue = _ref2.rejectWithValue;\n    try {\n      var response = yield authService.login({\n        email: email,\n        password: password\n      });\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.message || 'Login failed');\n    }\n  });\n  return function (_x, _x2) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexport var registerUser = createAsyncThunk('auth/registerUser', function () {\n  var _ref5 = _asyncToGenerator(function* (userData, _ref4) {\n    var rejectWithValue = _ref4.rejectWithValue;\n    try {\n      var response = yield authService.register(userData);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.message || 'Registration failed');\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nexport var logoutUser = createAsyncThunk('auth/logoutUser', function () {\n  var _ref7 = _asyncToGenerator(function* (_, _ref6) {\n    var rejectWithValue = _ref6.rejectWithValue;\n    try {\n      yield authService.logout();\n    } catch (error) {\n      console.error('Logout error:', error);\n      return rejectWithValue(error.message || 'Logout failed');\n    }\n  });\n  return function (_x5, _x6) {\n    return _ref7.apply(this, arguments);\n  };\n}());\nexport var updateProfile = createAsyncThunk('auth/updateProfile', function () {\n  var _ref9 = _asyncToGenerator(function* (profileData, _ref8) {\n    var rejectWithValue = _ref8.rejectWithValue;\n    try {\n      var response = yield authService.updateProfile(profileData);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.message || 'Profile update failed');\n    }\n  });\n  return function (_x7, _x8) {\n    return _ref9.apply(this, arguments);\n  };\n}());\nvar authSlice = createSlice({\n  name: 'auth',\n  initialState: initialState,\n  reducers: {\n    clearError: function clearError(state) {\n      state.error = null;\n    },\n    setTokens: function setTokens(state, action) {\n      state.token = action.payload.token;\n      state.refreshToken = action.payload.refreshToken;\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(loginUser.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(loginUser.fulfilled, function (state, _ref0) {\n      var payload = _ref0.payload;\n      state.isLoading = false;\n      state.user = payload.user;\n      state.token = payload.token;\n      state.refreshToken = payload.refreshToken;\n      state.isAuthenticated = true;\n      state.error = null;\n    }).addCase(loginUser.rejected, function (state, _ref1) {\n      var payload = _ref1.payload;\n      state.isLoading = false;\n      state.error = payload || 'Login failed';\n      state.isAuthenticated = false;\n      state.user = null;\n      state.token = null;\n      state.refreshToken = null;\n    }).addCase(registerUser.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(registerUser.fulfilled, function (state, _ref10) {\n      var payload = _ref10.payload;\n      state.isLoading = false;\n      state.user = payload.user;\n      state.token = payload.token;\n      state.refreshToken = payload.refreshToken;\n      state.isAuthenticated = true;\n      state.error = null;\n    }).addCase(registerUser.rejected, function (state, _ref11) {\n      var payload = _ref11.payload;\n      state.isLoading = false;\n      state.error = payload || 'Registration failed';\n      state.isAuthenticated = false;\n      state.user = null;\n      state.token = null;\n      state.refreshToken = null;\n    }).addCase(logoutUser.fulfilled, function (state) {\n      state.user = null;\n      state.token = null;\n      state.refreshToken = null;\n      state.isAuthenticated = false;\n      state.isLoading = false;\n      state.error = null;\n    }).addCase(logoutUser.rejected, function (state, action) {\n      state.error = action.payload;\n    }).addCase(updateProfile.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(updateProfile.fulfilled, function (state, _ref12) {\n      var payload = _ref12.payload;\n      state.isLoading = false;\n      state.user = _objectSpread(_objectSpread({}, state.user), payload);\n      state.error = null;\n    }).addCase(updateProfile.rejected, function (state, _ref13) {\n      var payload = _ref13.payload;\n      state.isLoading = false;\n      state.error = payload || 'Profile update failed';\n    });\n  }\n});\nvar _authSlice$actions = authSlice.actions,\n  clearError = _authSlice$actions.clearError,\n  setTokens = _authSlice$actions.setTokens;\nexport { clearError, setTokens };\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","initialState","user","token","refreshToken","isAuthenticated","isLoading","error","loginUser","_ref3","_asyncToGenerator","_ref","_ref2","email","password","rejectWithValue","response","login","message","_x","_x2","apply","arguments","registerUser","_ref5","userData","_ref4","register","_x3","_x4","logoutUser","_ref7","_","_ref6","logout","console","_x5","_x6","updateProfile","_ref9","profileData","_ref8","_x7","_x8","authSlice","name","reducers","clearError","state","setTokens","action","payload","extraReducers","builder","addCase","pending","fulfilled","_ref0","rejected","_ref1","_ref10","_ref11","_ref12","_objectSpread","_ref13","_authSlice$actions","actions","reducer"],"sources":["/Users/theophilusogieva/Downloads/medimind/frontend/src/store/slices/authSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { authService } from '../../services/authService';\nimport { AuthState, LoginCredentials, RegisterData, AuthResponse } from '../../types/models/user';\n\n// Define the initial state using the AuthState type\nconst initialState: AuthState = {\n  user: null,\n  token: null,\n  refreshToken: null,\n  isAuthenticated: false,\n  isLoading: false,\n  error: null,\n};\n\n// Async thunks\nexport const loginUser = createAsyncThunk<\n  AuthResponse,\n  LoginCredentials,\n  { rejectValue: string }\n>(\n  'auth/loginUser',\n  async ({ email, password }, { rejectWithValue }) => {\n    try {\n      const response = await authService.login({ email, password });\n      return response;\n    } catch (error: any) {\n      return rejectWithValue(error.message || 'Login failed');\n    }\n  }\n);\n\nexport const registerUser = createAsyncThunk<\n  AuthResponse,\n  RegisterData,\n  { rejectValue: string }\n>(\n  'auth/registerUser',\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await authService.register(userData);\n      return response;\n    } catch (error: any) {\n      return rejectWithValue(error.message || 'Registration failed');\n    }\n  }\n);\n\nexport const logoutUser = createAsyncThunk(\n  'auth/logoutUser',\n  async (_, { rejectWithValue }) => {\n    try {\n      await authService.logout();\n    } catch (error: any) {\n      // Even if logout fails, we still want to clear the local state\n      console.error('Logout error:', error);\n      return rejectWithValue(error.message || 'Logout failed');\n    }\n  }\n);\n\nexport const updateProfile = createAsyncThunk(\n  'auth/updateProfile',\n  async (profileData: any, { rejectWithValue }) => {\n    try {\n      const response = await authService.updateProfile(profileData);\n      return response;\n    } catch (error: any) {\n      return rejectWithValue(error.message || 'Profile update failed');\n    }\n  }\n);\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    clearError: (state) => {\n      state.error = null;\n    },\n    setTokens: (state, action: PayloadAction<{ token: string; refreshToken: string }>) => {\n      state.token = action.payload.token;\n      state.refreshToken = action.payload.refreshToken;\n    },\n  },\n  extraReducers: (builder) => {\n    // Login\n    builder\n      .addCase(loginUser.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(loginUser.fulfilled, (state, { payload }) => {\n        state.isLoading = false;\n        state.user = payload.user;\n        state.token = payload.token;\n        state.refreshToken = payload.refreshToken;\n        state.isAuthenticated = true;\n        state.error = null;\n      })\n      .addCase(loginUser.rejected, (state, { payload }) => {\n        state.isLoading = false;\n        state.error = payload as string || 'Login failed';\n        state.isAuthenticated = false;\n        state.user = null;\n        state.token = null;\n        state.refreshToken = null;\n      })\n      \n      // Register\n      .addCase(registerUser.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(registerUser.fulfilled, (state, { payload }) => {\n        state.isLoading = false;\n        state.user = payload.user;\n        state.token = payload.token;\n        state.refreshToken = payload.refreshToken;\n        state.isAuthenticated = true;\n        state.error = null;\n      })\n      .addCase(registerUser.rejected, (state, { payload }) => {\n        state.isLoading = false;\n        state.error = payload as string || 'Registration failed';\n        state.isAuthenticated = false;\n        state.user = null;\n        state.token = null;\n        state.refreshToken = null;\n      })\n      \n      // Logout\n      .addCase(logoutUser.fulfilled, (state) => {\n        state.user = null;\n        state.token = null;\n        state.refreshToken = null;\n        state.isAuthenticated = false;\n        state.isLoading = false;\n        state.error = null;\n      })\n      .addCase(logoutUser.rejected, (state, action) => {\n        state.error = action.payload as string;\n      })\n\n      // Update Profile\n      .addCase(updateProfile.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(updateProfile.fulfilled, (state, { payload }) => {\n        state.isLoading = false;\n        state.user = { ...state.user, ...payload };\n        state.error = null;\n      })\n      .addCase(updateProfile.rejected, (state, { payload }) => {\n        state.isLoading = false;\n        state.error = payload as string || 'Profile update failed';\n      });\n  },\n});\n\nexport const { clearError, setTokens } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}