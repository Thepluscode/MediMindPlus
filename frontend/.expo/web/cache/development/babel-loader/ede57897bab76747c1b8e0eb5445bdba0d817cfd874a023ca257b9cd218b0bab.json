{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { predictionService } from \"../../services/predictionService\";\nvar initialPredictions = {\n  cardiovascular_disease: 0,\n  diabetes_type2: 0,\n  cancer_breast: 0,\n  cancer_lung: 0\n};\nvar initialState = {\n  predictions: _objectSpread({}, initialPredictions),\n  voiceAnalysis: {},\n  isLoading: false,\n  error: null,\n  lastUpdated: null\n};\nexport var getRiskPredictions = createAsyncThunk('aiPredictions/getRiskPredictions', function () {\n  var _ref2 = _asyncToGenerator(function* (_, _ref) {\n    var rejectWithValue = _ref.rejectWithValue;\n    try {\n      var response = yield predictionService.getPredictions();\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.message || 'Failed to get predictions');\n    }\n  });\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexport var analyzeVoiceData = createAsyncThunk('aiPredictions/analyzeVoiceData', function () {\n  var _ref4 = _asyncToGenerator(function* (audioUri, _ref3) {\n    var rejectWithValue = _ref3.rejectWithValue;\n    try {\n      var response = yield predictionService.analyzeVoice({\n        audioUri: audioUri,\n        mimeType: 'audio/m4a'\n      });\n      return response;\n    } catch (error) {\n      return rejectWithValue(error.message || 'Voice analysis failed');\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nvar aiPredictionsSlice = createSlice({\n  name: 'aiPredictions',\n  initialState: initialState,\n  reducers: {\n    clearPredictionsError: function clearPredictionsError(state) {\n      state.error = null;\n    },\n    resetPredictions: function resetPredictions(state) {\n      state.predictions = _objectSpread({}, initialPredictions);\n      state.voiceAnalysis = {};\n      state.error = null;\n      state.lastUpdated = null;\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(getRiskPredictions.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getRiskPredictions.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.predictions = _objectSpread(_objectSpread({}, state.predictions), action.payload);\n      state.lastUpdated = new Date().toISOString();\n    }).addCase(getRiskPredictions.rejected, function (state, action) {\n      state.isLoading = false;\n      state.error = action.payload || 'Failed to get predictions';\n    }).addCase(analyzeVoiceData.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(analyzeVoiceData.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.voiceAnalysis = action.payload;\n      state.lastUpdated = new Date().toISOString();\n    }).addCase(analyzeVoiceData.rejected, function (state, action) {\n      state.isLoading = false;\n      state.error = action.payload || 'Voice analysis failed';\n    });\n  }\n});\nvar _aiPredictionsSlice$a = aiPredictionsSlice.actions,\n  clearPredictionsError = _aiPredictionsSlice$a.clearPredictionsError,\n  resetPredictions = _aiPredictionsSlice$a.resetPredictions;\nexport { clearPredictionsError, resetPredictions };\nexport var selectPredictions = function selectPredictions(state) {\n  return state.aiPredictions.predictions;\n};\nexport var selectVoiceAnalysis = function selectVoiceAnalysis(state) {\n  return state.aiPredictions.voiceAnalysis;\n};\nexport var selectIsLoading = function selectIsLoading(state) {\n  return state.aiPredictions.isLoading;\n};\nexport var selectError = function selectError(state) {\n  return state.aiPredictions.error;\n};\nexport var selectLastUpdated = function selectLastUpdated(state) {\n  return state.aiPredictions.lastUpdated;\n};\nexport default aiPredictionsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","predictionService","initialPredictions","cardiovascular_disease","diabetes_type2","cancer_breast","cancer_lung","initialState","predictions","_objectSpread","voiceAnalysis","isLoading","error","lastUpdated","getRiskPredictions","_ref2","_asyncToGenerator","_","_ref","rejectWithValue","response","getPredictions","message","_x","_x2","apply","arguments","analyzeVoiceData","_ref4","audioUri","_ref3","analyzeVoice","mimeType","_x3","_x4","aiPredictionsSlice","name","reducers","clearPredictionsError","state","resetPredictions","extraReducers","builder","addCase","pending","fulfilled","action","payload","Date","toISOString","rejected","_aiPredictionsSlice$a","actions","selectPredictions","aiPredictions","selectVoiceAnalysis","selectIsLoading","selectError","selectLastUpdated","reducer"],"sources":["/Users/theophilusogieva/Downloads/medimind/frontend/src/store/slices/aiPredictionsSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { predictionService } from '../../services/predictionService';\nimport { AIPrediction, VoiceAnalysisResponse, RiskPredictions, AIPredictionsState } from '../../types/models/ai';\nimport type { RootState } from '../types';\n\nconst initialPredictions: RiskPredictions = {\n  cardiovascular_disease: 0,\n  diabetes_type2: 0,\n  cancer_breast: 0,\n  cancer_lung: 0,\n};\n\nconst initialState: AIPredictionsState = {\n  predictions: { ...initialPredictions },\n  voiceAnalysis: {},\n  isLoading: false,\n  error: null,\n  lastUpdated: null,\n};\n\n// Async thunks\nexport const getRiskPredictions = createAsyncThunk<\n  RiskPredictions,\n  void,\n  { rejectValue: string }\n>(\n  'aiPredictions/getRiskPredictions',\n  async (_, { rejectWithValue }) => {\n    try {\n      const response = await predictionService.getPredictions();\n      return response as unknown as RiskPredictions;\n    } catch (error: any) {\n      return rejectWithValue(error.message || 'Failed to get predictions');\n    }\n  }\n);\n\nexport const analyzeVoiceData = createAsyncThunk<\n  VoiceAnalysisResponse,\n  string, // audioUri\n  { rejectValue: string }\n>(\n  'aiPredictions/analyzeVoiceData',\n  async (audioUri, { rejectWithValue }) => {\n    try {\n      const response = await predictionService.analyzeVoice({ \n        audioUri,\n        mimeType: 'audio/m4a' \n      });\n      return response;\n    } catch (error: any) {\n      return rejectWithValue(error.message || 'Voice analysis failed');\n    }\n  }\n);\n\nconst aiPredictionsSlice = createSlice({\n  name: 'aiPredictions',\n  initialState,\n  reducers: {\n    clearPredictionsError: (state) => {\n      state.error = null;\n    },\n    resetPredictions: (state) => {\n      state.predictions = { ...initialPredictions };\n      state.voiceAnalysis = {};\n      state.error = null;\n      state.lastUpdated = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Get risk predictions\n      .addCase(getRiskPredictions.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(getRiskPredictions.fulfilled, (state, action: PayloadAction<RiskPredictions>) => {\n        state.isLoading = false;\n        state.predictions = { ...state.predictions, ...action.payload };\n        state.lastUpdated = new Date().toISOString();\n      })\n      .addCase(getRiskPredictions.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload || 'Failed to get predictions';\n      })\n      // Analyze voice data\n      .addCase(analyzeVoiceData.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(analyzeVoiceData.fulfilled, (state, action: PayloadAction<VoiceAnalysisResponse>) => {\n        state.isLoading = false;\n        state.voiceAnalysis = action.payload;\n        state.lastUpdated = new Date().toISOString();\n      })\n      .addCase(analyzeVoiceData.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload || 'Voice analysis failed';\n      });\n  },\n});\n\nexport const {\n  clearPredictionsError,\n  resetPredictions\n} = aiPredictionsSlice.actions;\n\n// Selectors\nexport const selectPredictions = (state: RootState) => state.aiPredictions.predictions;\nexport const selectVoiceAnalysis = (state: RootState) => state.aiPredictions.voiceAnalysis;\nexport const selectIsLoading = (state: RootState) => state.aiPredictions.isLoading;\nexport const selectError = (state: RootState) => state.aiPredictions.error;\nexport const selectLastUpdated = (state: RootState) => state.aiPredictions.lastUpdated;\n\nexport default aiPredictionsSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}