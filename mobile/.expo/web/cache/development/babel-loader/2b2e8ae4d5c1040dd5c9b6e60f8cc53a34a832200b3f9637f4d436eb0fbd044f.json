{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React, { useEffect } from 'react';\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { Provider } from 'react-redux';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { ThemeProvider } from 'react-native-elements';\nimport * as Notifications from 'expo-notifications';\nimport * as TaskManager from 'expo-task-manager';\nimport { store } from \"./src/store/store\";\nimport AppNavigator from \"./src/navigation/AppNavigator\";\nimport { theme } from \"./src/theme/theme\";\nimport { initializeApp } from \"./src/services/appInitialization\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nNotifications.setNotificationHandler({\n  handleNotification: function () {\n    var _handleNotification = _asyncToGenerator(function* () {\n      return {\n        shouldShowAlert: true,\n        shouldPlaySound: true,\n        shouldSetBadge: false\n      };\n    });\n    function handleNotification() {\n      return _handleNotification.apply(this, arguments);\n    }\n    return handleNotification;\n  }()\n});\nvar HEALTH_MONITORING_TASK = 'health-monitoring';\nTaskManager.defineTask(HEALTH_MONITORING_TASK, _asyncToGenerator(function* () {\n  try {\n    var _require = require(\"./src/services/sensorService\"),\n      collectBackgroundData = _require.collectBackgroundData;\n    yield collectBackgroundData();\n    return {\n      success: true\n    };\n  } catch (error) {\n    console.error('Background health monitoring failed:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    };\n  }\n}));\nvar App = function App() {\n  useEffect(function () {\n    var timeoutId = setTimeout(function () {\n      console.log('[App] Starting deferred initialization...');\n      initializeApp().catch(function (error) {\n        console.error('[App] Initialization failed:', error);\n      });\n    }, 100);\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, []);\n  return _jsx(Provider, {\n    store: store,\n    children: _jsx(SafeAreaProvider, {\n      children: _jsx(ThemeProvider, {\n        theme: {\n          colors: theme.colors\n        },\n        children: _jsxs(NavigationContainer, {\n          children: [_jsx(StatusBar, {\n            barStyle: \"default\"\n          }), _jsx(AppNavigator, {})]\n        })\n      })\n    })\n  });\n};\nexport default App;","map":{"version":3,"names":["React","useEffect","StatusBar","Provider","NavigationContainer","SafeAreaProvider","ThemeProvider","Notifications","TaskManager","store","AppNavigator","theme","initializeApp","jsx","_jsx","jsxs","_jsxs","setNotificationHandler","handleNotification","_handleNotification","_asyncToGenerator","shouldShowAlert","shouldPlaySound","shouldSetBadge","apply","arguments","HEALTH_MONITORING_TASK","defineTask","_require","require","collectBackgroundData","success","error","console","Error","message","App","timeoutId","setTimeout","log","catch","clearTimeout","children","colors","barStyle"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/App.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { StatusBar } from 'react-native';\nimport { Provider } from 'react-redux';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { ThemeProvider } from 'react-native-elements';\nimport * as Notifications from 'expo-notifications';\nimport * as TaskManager from 'expo-task-manager';\n\nimport { store } from './src/store/store';\nimport AppNavigator from './src/navigation/AppNavigator';\nimport { theme } from './src/theme/theme';\nimport { initializeApp } from './src/services/appInitialization';\n\n\n// Configure notifications\nNotifications.setNotificationHandler({\n  handleNotification: async () => ({\n    shouldShowAlert: true,\n    shouldPlaySound: true,\n    shouldSetBadge: false,\n  }),\n});\n\n// Background task for health monitoring\nconst HEALTH_MONITORING_TASK = 'health-monitoring';\n\ntype TaskData = {\n  success: boolean;\n  error?: string;\n};\n\nTaskManager.defineTask<TaskData>(HEALTH_MONITORING_TASK, async () => {\n  try {\n    // Collect sensor data in background\n    const { collectBackgroundData } = require('./src/services/sensorService');\n    await collectBackgroundData();\n    return { success: true };\n  } catch (error) {\n    console.error('Background health monitoring failed:', error);\n    return { \n      success: false, \n      error: error instanceof Error ? error.message : 'Unknown error occurred' \n    };\n  }\n});\n\nconst App: React.FC = () => {\n  useEffect(() => {\n    // Defer initialization to prevent blocking navigation\n    // Use setTimeout to move initialization off the critical path\n    const timeoutId = setTimeout(() => {\n      console.log('[App] Starting deferred initialization...');\n      initializeApp().catch(error => {\n        console.error('[App] Initialization failed:', error);\n      });\n    }, 100); // 100ms delay to let navigation complete first\n\n    return () => clearTimeout(timeoutId);\n  }, []);\n\n  return (\n    <Provider store={store}>\n      {/* TEMPORARILY DISABLED PersistGate - debugging infinite loop */}\n      {/* <PersistGate loading={<LoadingScreen />} persistor={persistor}> */}\n        <SafeAreaProvider>\n          <ThemeProvider {...({ theme: { colors: theme.colors } } as any)}>\n            <NavigationContainer>\n              <StatusBar barStyle=\"default\" />\n              {/* MOVED HealthDataProvider INSIDE AppNavigator to prevent blocking navigation */}\n              <AppNavigator />\n            </NavigationContainer>\n          </ThemeProvider>\n        </SafeAreaProvider>\n      {/* </PersistGate> */}\n    </Provider>\n  );\n};\n\nexport default App;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAAC,OAAAC,SAAA;AAEzC,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,mBAAmB,QAAQ,0BAA0B;AAC9D,SAASC,gBAAgB,QAAQ,gCAAgC;AACjE,SAASC,aAAa,QAAQ,uBAAuB;AACrD,OAAO,KAAKC,aAAa,MAAM,oBAAoB;AACnD,OAAO,KAAKC,WAAW,MAAM,mBAAmB;AAEhD,SAASC,KAAK;AACd,OAAOC,YAAY;AACnB,SAASC,KAAK;AACd,SAASC,aAAa;AAA2C,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAIjET,aAAa,CAACU,sBAAsB,CAAC;EACnCC,kBAAkB;IAAA,IAAAC,mBAAA,GAAAC,iBAAA,CAAE;MAAA,OAAa;QAC/BC,eAAe,EAAE,IAAI;QACrBC,eAAe,EAAE,IAAI;QACrBC,cAAc,EAAE;MAClB,CAAC;IAAA,CAAC;IAAA,SAJFL,kBAAkBA,CAAA;MAAA,OAAAC,mBAAA,CAAAK,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAlBP,kBAAkB;EAAA;AAKpB,CAAC,CAAC;AAGF,IAAMQ,sBAAsB,GAAG,mBAAmB;AAOlDlB,WAAW,CAACmB,UAAU,CAAWD,sBAAsB,EAAAN,iBAAA,CAAE,aAAY;EACnE,IAAI;IAEF,IAAAQ,QAAA,GAAkCC,OAAO,+BAA+B,CAAC;MAAjEC,qBAAqB,GAAAF,QAAA,CAArBE,qBAAqB;IAC7B,MAAMA,qBAAqB,CAAC,CAAC;IAC7B,OAAO;MAAEC,OAAO,EAAE;IAAK,CAAC;EAC1B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;IAC5D,OAAO;MACLD,OAAO,EAAE,KAAK;MACdC,KAAK,EAAEA,KAAK,YAAYE,KAAK,GAAGF,KAAK,CAACG,OAAO,GAAG;IAClD,CAAC;EACH;AACF,CAAC,EAAC;AAEF,IAAMC,GAAa,GAAG,SAAhBA,GAAaA,CAAA,EAAS;EAC1BnC,SAAS,CAAC,YAAM;IAGd,IAAMoC,SAAS,GAAGC,UAAU,CAAC,YAAM;MACjCL,OAAO,CAACM,GAAG,CAAC,2CAA2C,CAAC;MACxD3B,aAAa,CAAC,CAAC,CAAC4B,KAAK,CAAC,UAAAR,KAAK,EAAI;QAC7BC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD,CAAC,CAAC;IACJ,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO;MAAA,OAAMS,YAAY,CAACJ,SAAS,CAAC;IAAA;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,OACEvB,IAAA,CAACX,QAAQ;IAACM,KAAK,EAAEA,KAAM;IAAAiC,QAAA,EAGnB5B,IAAA,CAACT,gBAAgB;MAAAqC,QAAA,EACf5B,IAAA,CAACR,aAAa;QAAQK,KAAK,EAAE;UAAEgC,MAAM,EAAEhC,KAAK,CAACgC;QAAO,CAAC;QAAAD,QAAA,EACnD1B,KAAA,CAACZ,mBAAmB;UAAAsC,QAAA,GAClB5B,IAAA,CAACZ,SAAS;YAAC0C,QAAQ,EAAC;UAAS,CAAE,CAAC,EAEhC9B,IAAA,CAACJ,YAAY,IAAE,CAAC;QAAA,CACG;MAAC,CACT;IAAC,CACA;EAAC,CAEb,CAAC;AAEf,CAAC;AAED,eAAe0B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}