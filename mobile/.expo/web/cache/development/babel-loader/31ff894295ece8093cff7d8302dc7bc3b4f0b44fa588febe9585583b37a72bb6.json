{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport apiService from \"./apiService\";\nvar PaymentAPI = function () {\n  function PaymentAPI() {\n    _classCallCheck(this, PaymentAPI);\n  }\n  return _createClass(PaymentAPI, [{\n    key: \"createPaymentIntent\",\n    value: (function () {\n      var _createPaymentIntent = _asyncToGenerator(function* (consultationId, amount) {\n        var currency = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'usd';\n        try {\n          console.log('[PaymentAPI] Creating payment intent:', {\n            consultationId: consultationId,\n            amount: amount,\n            currency: currency\n          });\n          var response = yield apiService.post('/payments/create-intent', {\n            consultationId: consultationId,\n            amount: amount,\n            currency: currency\n          });\n          console.log('[PaymentAPI] Payment intent created successfully');\n          return response.data.data;\n        } catch (error) {\n          var _error$response, _error$response2, _error$response2$data;\n          console.error('[PaymentAPI] Failed to create payment intent:', ((_error$response = error.response) == null ? void 0 : _error$response.data) || error.message);\n          throw new Error(((_error$response2 = error.response) == null ? void 0 : (_error$response2$data = _error$response2.data) == null ? void 0 : _error$response2$data.message) || 'Failed to create payment intent');\n        }\n      });\n      function createPaymentIntent(_x, _x2) {\n        return _createPaymentIntent.apply(this, arguments);\n      }\n      return createPaymentIntent;\n    }())\n  }, {\n    key: \"confirmPayment\",\n    value: (function () {\n      var _confirmPayment = _asyncToGenerator(function* (consultationId, paymentIntentId) {\n        try {\n          console.log('[PaymentAPI] Confirming payment:', {\n            consultationId: consultationId,\n            paymentIntentId: paymentIntentId\n          });\n          yield apiService.post('/payments/confirm', {\n            consultationId: consultationId,\n            paymentIntentId: paymentIntentId\n          });\n          console.log('[PaymentAPI] Payment confirmed successfully');\n        } catch (error) {\n          var _error$response3, _error$response4, _error$response4$data;\n          console.error('[PaymentAPI] Failed to confirm payment:', ((_error$response3 = error.response) == null ? void 0 : _error$response3.data) || error.message);\n          throw new Error(((_error$response4 = error.response) == null ? void 0 : (_error$response4$data = _error$response4.data) == null ? void 0 : _error$response4$data.message) || 'Failed to confirm payment');\n        }\n      });\n      function confirmPayment(_x3, _x4) {\n        return _confirmPayment.apply(this, arguments);\n      }\n      return confirmPayment;\n    }())\n  }, {\n    key: \"processRefund\",\n    value: (function () {\n      var _processRefund = _asyncToGenerator(function* (consultationId, reason) {\n        try {\n          console.log('[PaymentAPI] Processing refund:', {\n            consultationId: consultationId,\n            reason: reason\n          });\n          yield apiService.post('/payments/refund', {\n            consultationId: consultationId,\n            reason: reason\n          });\n          console.log('[PaymentAPI] Refund processed successfully');\n        } catch (error) {\n          var _error$response5, _error$response6, _error$response6$data;\n          console.error('[PaymentAPI] Failed to process refund:', ((_error$response5 = error.response) == null ? void 0 : _error$response5.data) || error.message);\n          throw new Error(((_error$response6 = error.response) == null ? void 0 : (_error$response6$data = _error$response6.data) == null ? void 0 : _error$response6$data.message) || 'Failed to process refund');\n        }\n      });\n      function processRefund(_x5, _x6) {\n        return _processRefund.apply(this, arguments);\n      }\n      return processRefund;\n    }())\n  }, {\n    key: \"getPaymentHistory\",\n    value: (function () {\n      var _getPaymentHistory = _asyncToGenerator(function* () {\n        try {\n          console.log('[PaymentAPI] Fetching payment history');\n          var response = yield apiService.get('/payments/history');\n          console.log('[PaymentAPI] Payment history retrieved:', response.data.data.length, 'records');\n          return response.data.data;\n        } catch (error) {\n          var _error$response7, _error$response8, _error$response8$data;\n          console.error('[PaymentAPI] Failed to fetch payment history:', ((_error$response7 = error.response) == null ? void 0 : _error$response7.data) || error.message);\n          throw new Error(((_error$response8 = error.response) == null ? void 0 : (_error$response8$data = _error$response8.data) == null ? void 0 : _error$response8$data.message) || 'Failed to fetch payment history');\n        }\n      });\n      function getPaymentHistory() {\n        return _getPaymentHistory.apply(this, arguments);\n      }\n      return getPaymentHistory;\n    }())\n  }, {\n    key: \"getProviderEarnings\",\n    value: (function () {\n      var _getProviderEarnings = _asyncToGenerator(function* (providerId) {\n        try {\n          console.log('[PaymentAPI] Fetching provider earnings:', providerId);\n          var response = yield apiService.get(`/payments/provider/${providerId}/earnings`);\n          console.log('[PaymentAPI] Provider earnings retrieved');\n          return response.data.data;\n        } catch (error) {\n          var _error$response9, _error$response0, _error$response0$data;\n          console.error('[PaymentAPI] Failed to fetch provider earnings:', ((_error$response9 = error.response) == null ? void 0 : _error$response9.data) || error.message);\n          throw new Error(((_error$response0 = error.response) == null ? void 0 : (_error$response0$data = _error$response0.data) == null ? void 0 : _error$response0$data.message) || 'Failed to fetch provider earnings');\n        }\n      });\n      function getProviderEarnings(_x7) {\n        return _getProviderEarnings.apply(this, arguments);\n      }\n      return getProviderEarnings;\n    }())\n  }, {\n    key: \"getStripePublishableKey\",\n    value: function getStripePublishableKey() {\n      var key = process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY || 'pk_test_51RVJBGIYzxeKN90NS2yhS9dWGheZYi70uoQ8PZHOknAxSixQvUtJI7AlI1guQmjD276xq3UvPCP8MDe7TOh1rhoi00v5ORt563';\n      return key;\n    }\n  }]);\n}();\nexport var paymentAPI = new PaymentAPI();\nexport default paymentAPI;","map":{"version":3,"names":["apiService","PaymentAPI","_classCallCheck","_createClass","key","value","_createPaymentIntent","_asyncToGenerator","consultationId","amount","currency","arguments","length","undefined","console","log","response","post","data","error","_error$response","_error$response2","_error$response2$data","message","Error","createPaymentIntent","_x","_x2","apply","_confirmPayment","paymentIntentId","_error$response3","_error$response4","_error$response4$data","confirmPayment","_x3","_x4","_processRefund","reason","_error$response5","_error$response6","_error$response6$data","processRefund","_x5","_x6","_getPaymentHistory","get","_error$response7","_error$response8","_error$response8$data","getPaymentHistory","_getProviderEarnings","providerId","_error$response9","_error$response0","_error$response0$data","getProviderEarnings","_x7","getStripePublishableKey","process","env","EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY","paymentAPI"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/src/services/paymentAPI.ts"],"sourcesContent":["/**\n * Payment API Service for MediMindPlus\n * Handles all Stripe payment-related API calls\n */\n\nimport apiService from './apiService';\nimport {\n  PaymentIntent,\n  CreatePaymentIntentRequest,\n  ConfirmPaymentRequest,\n  RefundRequest,\n  PaymentHistory,\n  ProviderEarnings,\n} from '../types/payment.types';\n\ninterface ApiResponse<T> {\n  success: boolean;\n  data: T;\n  message?: string;\n}\n\nclass PaymentAPI {\n  /**\n   * Create a Stripe Payment Intent for a consultation\n   */\n  async createPaymentIntent(\n    consultationId: string,\n    amount: number,\n    currency: string = 'usd'\n  ): Promise<PaymentIntent> {\n    try {\n      console.log('[PaymentAPI] Creating payment intent:', { consultationId, amount, currency });\n\n      const response = await apiService.post<ApiResponse<PaymentIntent>>(\n        '/payments/create-intent',\n        { consultationId, amount, currency }\n      );\n\n      console.log('[PaymentAPI] Payment intent created successfully');\n      return response.data.data;\n    } catch (error: any) {\n      console.error('[PaymentAPI] Failed to create payment intent:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Failed to create payment intent');\n    }\n  }\n\n  /**\n   * Confirm a payment after successful Stripe payment\n   */\n  async confirmPayment(consultationId: string, paymentIntentId: string): Promise<void> {\n    try {\n      console.log('[PaymentAPI] Confirming payment:', { consultationId, paymentIntentId });\n\n      await apiService.post<ApiResponse<void>>(\n        '/payments/confirm',\n        { consultationId, paymentIntentId }\n      );\n\n      console.log('[PaymentAPI] Payment confirmed successfully');\n    } catch (error: any) {\n      console.error('[PaymentAPI] Failed to confirm payment:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Failed to confirm payment');\n    }\n  }\n\n  /**\n   * Process a refund for a consultation\n   */\n  async processRefund(consultationId: string, reason: string): Promise<void> {\n    try {\n      console.log('[PaymentAPI] Processing refund:', { consultationId, reason });\n\n      await apiService.post<ApiResponse<void>>(\n        '/payments/refund',\n        { consultationId, reason }\n      );\n\n      console.log('[PaymentAPI] Refund processed successfully');\n    } catch (error: any) {\n      console.error('[PaymentAPI] Failed to process refund:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Failed to process refund');\n    }\n  }\n\n  /**\n   * Get payment history for the current user\n   */\n  async getPaymentHistory(): Promise<PaymentHistory[]> {\n    try {\n      console.log('[PaymentAPI] Fetching payment history');\n\n      const response = await apiService.get<ApiResponse<PaymentHistory[]>>(\n        '/payments/history'\n      );\n\n      console.log('[PaymentAPI] Payment history retrieved:', response.data.data.length, 'records');\n      return response.data.data;\n    } catch (error: any) {\n      console.error('[PaymentAPI] Failed to fetch payment history:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Failed to fetch payment history');\n    }\n  }\n\n  /**\n   * Get earnings summary for a provider\n   */\n  async getProviderEarnings(providerId: string): Promise<ProviderEarnings> {\n    try {\n      console.log('[PaymentAPI] Fetching provider earnings:', providerId);\n\n      const response = await apiService.get<ApiResponse<ProviderEarnings>>(\n        `/payments/provider/${providerId}/earnings`\n      );\n\n      console.log('[PaymentAPI] Provider earnings retrieved');\n      return response.data.data;\n    } catch (error: any) {\n      console.error('[PaymentAPI] Failed to fetch provider earnings:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Failed to fetch provider earnings');\n    }\n  }\n\n  /**\n   * Get Stripe publishable key from environment\n   */\n  getStripePublishableKey(): string {\n    // In production, this should come from environment variables\n    const key = process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY ||\n                 'pk_test_51RVJBGIYzxeKN90NS2yhS9dWGheZYi70uoQ8PZHOknAxSixQvUtJI7AlI1guQmjD276xq3UvPCP8MDe7TOh1rhoi00v5ORt563';\n\n    return key;\n  }\n}\n\n// Export singleton instance\nexport const paymentAPI = new PaymentAPI();\nexport default paymentAPI;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}