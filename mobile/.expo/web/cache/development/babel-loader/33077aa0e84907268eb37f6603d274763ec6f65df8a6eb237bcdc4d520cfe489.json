{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AppleHealthKit = null;\nvar GoogleFit = null;\nvar HealthKitPermissions = {};\nvar HealthValue = {};\nvar Scopes = {};\nif (Platform.OS !== 'web') {\n  try {\n    if (Platform.OS === 'ios') {\n      var healthModule = require('react-native-health');\n      AppleHealthKit = healthModule.default || healthModule;\n      HealthValue = healthModule.HealthValue;\n      HealthKitPermissions = healthModule.HealthKitPermissions;\n    }\n    if (Platform.OS === 'android') {\n      var googleFitModule = require('react-native-google-fit');\n      GoogleFit = googleFitModule.default || googleFitModule;\n      Scopes = googleFitModule.Scopes;\n    }\n  } catch (error) {\n    console.warn('Health modules not available:', error);\n  }\n}\nvar HealthDataContext = createContext(undefined);\nvar STORAGE_KEY = '@MediMindPlus:health_data';\nvar AUTH_KEY = '@MediMindPlus:health_auth';\nvar getHealthKitPermissions = function getHealthKitPermissions() {\n  if (!AppleHealthKit || !AppleHealthKit.Constants) {\n    return {\n      permissions: {\n        read: [],\n        write: []\n      }\n    };\n  }\n  return {\n    permissions: {\n      read: [AppleHealthKit.Constants.Permissions.HeartRate, AppleHealthKit.Constants.Permissions.HeartRateVariability, AppleHealthKit.Constants.Permissions.Steps, AppleHealthKit.Constants.Permissions.ActiveEnergyBurned, AppleHealthKit.Constants.Permissions.BloodPressureSystolic, AppleHealthKit.Constants.Permissions.BloodPressureDiastolic, AppleHealthKit.Constants.Permissions.BloodGlucose, AppleHealthKit.Constants.Permissions.BodyTemperature, AppleHealthKit.Constants.Permissions.OxygenSaturation, AppleHealthKit.Constants.Permissions.RespiratoryRate, AppleHealthKit.Constants.Permissions.SleepAnalysis, AppleHealthKit.Constants.Permissions.Weight, AppleHealthKit.Constants.Permissions.Height, AppleHealthKit.Constants.Permissions.BodyMassIndex],\n      write: []\n    }\n  };\n};\nvar getGoogleFitScopes = function getGoogleFitScopes() {\n  if (!Scopes || !Scopes.FITNESS_ACTIVITY_READ) {\n    return [];\n  }\n  return [Scopes.FITNESS_ACTIVITY_READ, Scopes.FITNESS_BODY_READ, Scopes.FITNESS_BLOOD_PRESSURE_READ, Scopes.FITNESS_BLOOD_GLUCOSE_READ, Scopes.FITNESS_HEART_RATE_READ, Scopes.FITNESS_BODY_TEMPERATURE_READ, Scopes.FITNESS_OXYGEN_SATURATION_READ, Scopes.FITNESS_SLEEP_READ];\n};\nexport var HealthDataProvider = function HealthDataProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    healthData = _useState2[0],\n    setHealthData = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isAuthorized = _useState8[0],\n    setIsAuthorized = _useState8[1];\n  useEffect(function () {\n    console.log('[HealthDataProvider] Mounted - deferring initialization');\n    var timeoutId = setTimeout(function () {\n      console.log('[HealthDataProvider] Starting deferred initialization');\n      loadCachedData();\n      checkAuthorization();\n    }, 500);\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, []);\n  useEffect(function () {\n    if (isAuthorized) {\n      var interval = setInterval(function () {\n        syncHealthData();\n      }, 5 * 60 * 1000);\n      return function () {\n        return clearInterval(interval);\n      };\n    }\n  }, [isAuthorized]);\n  var loadCachedData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var cached;\n        if (typeof globalThis.window !== 'undefined') {\n          cached = globalThis.localStorage.getItem(STORAGE_KEY);\n        } else {\n          cached = yield AsyncStorage.getItem(STORAGE_KEY);\n        }\n        if (cached) {\n          setHealthData(JSON.parse(cached));\n        }\n      } catch (err) {\n        console.error('Failed to load cached health data:', err);\n      }\n    });\n    return function loadCachedData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var checkAuthorization = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var authStatus;\n        if (typeof globalThis.window !== 'undefined') {\n          authStatus = globalThis.localStorage.getItem(AUTH_KEY);\n        } else {\n          authStatus = yield AsyncStorage.getItem(AUTH_KEY);\n        }\n        setIsAuthorized(authStatus === 'true');\n      } catch (err) {\n        console.error('Failed to check authorization:', err);\n      }\n    });\n    return function checkAuthorization() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var requestAuthorization = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      setLoading(true);\n      setError(null);\n      try {\n        if (Platform.OS === 'ios') {\n          AppleHealthKit.initHealthKit(getHealthKitPermissions(), function (err) {\n            if (err) {\n              setError('Failed to authorize HealthKit: ' + err);\n              setLoading(false);\n              return;\n            }\n            setIsAuthorized(true);\n            if (typeof globalThis.window !== 'undefined') {\n              globalThis.localStorage.setItem(AUTH_KEY, 'true');\n            } else {\n              AsyncStorage.setItem(AUTH_KEY, 'true');\n            }\n            syncHealthData();\n          });\n        } else if (Platform.OS === 'android') {\n          var options = {\n            scopes: getGoogleFitScopes()\n          };\n          GoogleFit.authorize(options).then(function (authResult) {\n            if (authResult.success) {\n              setIsAuthorized(true);\n              if (typeof globalThis.window !== 'undefined') {\n                globalThis.localStorage.setItem(AUTH_KEY, 'true');\n              } else {\n                AsyncStorage.setItem(AUTH_KEY, 'true');\n              }\n              syncHealthData();\n            } else {\n              setError('Failed to authorize Google Fit');\n            }\n            setLoading(false);\n          }).catch(function (err) {\n            setError('Google Fit authorization error: ' + err);\n            setLoading(false);\n          });\n        }\n      } catch (err) {\n        setError('Authorization failed: ' + (err instanceof Error ? err.message : String(err)));\n        setLoading(false);\n      }\n    });\n    return function requestAuthorization() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var syncHealthData = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      if (!isAuthorized) {\n        setError('Not authorized. Please request authorization first.');\n        return;\n      }\n      setLoading(true);\n      setError(null);\n      try {\n        var newHealthData = {};\n        var now = new Date();\n        var startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n        if (Platform.OS === 'ios') {\n          yield fetchAppleHealthData(newHealthData, startDate, now);\n        } else if (Platform.OS === 'android') {\n          yield fetchGoogleFitData(newHealthData, startDate, now);\n        }\n        setHealthData(newHealthData);\n        if (typeof globalThis.window !== 'undefined') {\n          globalThis.localStorage.setItem(STORAGE_KEY, JSON.stringify(newHealthData));\n        } else {\n          yield AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(newHealthData));\n        }\n        yield syncToBackend(newHealthData);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to sync health data: ' + (err instanceof Error ? err.message : String(err)));\n        setLoading(false);\n      }\n    });\n    return function syncHealthData() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var fetchAppleHealthData = function () {\n    var _ref6 = _asyncToGenerator(function* (data, startDate, endDate) {\n      var options = {\n        startDate: startDate.toISOString(),\n        endDate: endDate.toISOString()\n      };\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getHeartRateSamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            data.heartRate = results[results.length - 1].value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getHeartRateVariabilitySamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            data.heartRateVariability = results[results.length - 1].value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getStepCount(options, function (err, results) {\n          if (!err) {\n            data.steps = results.value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getActiveEnergyBurned(options, function (err, results) {\n          if (!err && results.length > 0) {\n            var total = results.reduce(function (sum, item) {\n              return sum + item.value;\n            }, 0);\n            data.activeEnergyBurned = total;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getBloodPressureSamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            var latest = results[results.length - 1];\n            data.bloodPressure = {\n              systolic: latest.bloodPressureSystolicValue,\n              diastolic: latest.bloodPressureDiastolicValue\n            };\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getBloodGlucoseSamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            data.bloodGlucose = results[results.length - 1].value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getBodyTemperatureSamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            data.bodyTemperature = results[results.length - 1].value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getOxygenSaturationSamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            data.oxygenSaturation = results[results.length - 1].value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getRespiratoryRateSamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            data.respiratoryRate = results[results.length - 1].value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getSleepSamples(options, function (err, results) {\n          if (!err && results.length > 0) {\n            var asleep = results.filter(function (s) {\n              return s.value === 'ASLEEP';\n            }).reduce(function (sum, s) {\n              return sum + (s.endDate - s.startDate);\n            }, 0) / (1000 * 60 * 60);\n            var awake = results.filter(function (s) {\n              return s.value === 'AWAKE';\n            }).reduce(function (sum, s) {\n              return sum + (s.endDate - s.startDate);\n            }, 0) / (1000 * 60 * 60);\n            var inBed = results.filter(function (s) {\n              return s.value === 'INBED';\n            }).reduce(function (sum, s) {\n              return sum + (s.endDate - s.startDate);\n            }, 0) / (1000 * 60 * 60);\n            data.sleepAnalysis = {\n              asleep: asleep,\n              awake: awake,\n              inBed: inBed\n            };\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getLatestWeight(null, function (err, results) {\n          if (!err) {\n            data.weight = results.value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getLatestHeight(null, function (err, results) {\n          if (!err) {\n            data.height = results.value;\n          }\n          resolve();\n        });\n      });\n      yield new Promise(function (resolve) {\n        AppleHealthKit.getLatestBmi(null, function (err, results) {\n          if (!err) {\n            data.bmi = results.value;\n          }\n          resolve();\n        });\n      });\n    });\n    return function fetchAppleHealthData(_x, _x2, _x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var fetchGoogleFitData = function () {\n    var _ref7 = _asyncToGenerator(function* (data, startDate, endDate) {\n      var options = {\n        startDate: startDate.toISOString(),\n        endDate: endDate.toISOString()\n      };\n      var stepsData = yield GoogleFit.getDailyStepCountSamples(options);\n      if (stepsData.length > 0) {\n        data.steps = stepsData[0].steps.reduce(function (sum, item) {\n          return sum + item.value;\n        }, 0);\n      }\n      var heartRateData = yield GoogleFit.getHeartRateSamples(options);\n      if (heartRateData.length > 0) {\n        data.heartRate = heartRateData[heartRateData.length - 1].value;\n      }\n      var caloriesData = yield GoogleFit.getDailyCalorieSamples(options);\n      if (caloriesData.length > 0) {\n        data.activeEnergyBurned = caloriesData[0].calorie;\n      }\n      var weightData = yield GoogleFit.getWeightSamples(options);\n      if (weightData.length > 0) {\n        data.weight = weightData[weightData.length - 1].value;\n      }\n      var heightData = yield GoogleFit.getHeightSamples(options);\n      if (heightData.length > 0) {\n        data.height = heightData[heightData.length - 1].value;\n      }\n      var sleepData = yield GoogleFit.getSleepSamples(options);\n      if (sleepData.length > 0) {\n        var totalSleep = sleepData.reduce(function (sum, item) {\n          return sum + (new Date(item.endDate).getTime() - new Date(item.startDate).getTime());\n        }, 0) / (1000 * 60 * 60);\n        data.sleepAnalysis = {\n          asleep: totalSleep,\n          awake: 0,\n          inBed: totalSleep\n        };\n      }\n    });\n    return function fetchGoogleFitData(_x4, _x5, _x6) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var syncToBackend = function () {\n    var _ref8 = _asyncToGenerator(function* (data) {\n      try {\n        var API_URL = process.env.EXPO_PUBLIC_API_URL || 'http://localhost:3000';\n        yield axios.post(`${API_URL}/api/health-metrics`, {\n          metrics: data,\n          timestamp: new Date().toISOString(),\n          source: Platform.OS === 'ios' ? 'apple_health' : 'google_fit'\n        });\n      } catch (err) {\n        console.error('Failed to sync to backend:', err);\n      }\n    });\n    return function syncToBackend(_x7) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var getMetric = function getMetric(metricType) {\n    return healthData[metricType];\n  };\n  var updateMetric = function () {\n    var _ref9 = _asyncToGenerator(function* (metricType, value) {\n      var updatedData = _objectSpread(_objectSpread({}, healthData), {}, _defineProperty({}, metricType, value));\n      setHealthData(updatedData);\n      if (typeof globalThis.window !== 'undefined') {\n        globalThis.localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedData));\n      } else {\n        yield AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(updatedData));\n      }\n      yield syncToBackend(updatedData);\n    });\n    return function updateMetric(_x8, _x9) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n  var contextValue = {\n    healthData: healthData,\n    loading: loading,\n    error: error,\n    isAuthorized: isAuthorized,\n    requestAuthorization: requestAuthorization,\n    syncHealthData: syncHealthData,\n    getMetric: getMetric,\n    updateMetric: updateMetric\n  };\n  return _jsx(HealthDataContext.Provider, {\n    value: contextValue,\n    children: children\n  });\n};\nexport var useHealthData = function useHealthData() {\n  var context = useContext(HealthDataContext);\n  if (!context) {\n    throw new Error('useHealthData must be used within HealthDataProvider');\n  }\n  return context;\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","AsyncStorage","Platform","axios","jsx","_jsx","AppleHealthKit","GoogleFit","HealthKitPermissions","HealthValue","Scopes","OS","healthModule","require","default","googleFitModule","error","console","warn","HealthDataContext","undefined","STORAGE_KEY","AUTH_KEY","getHealthKitPermissions","Constants","permissions","read","write","Permissions","HeartRate","HeartRateVariability","Steps","ActiveEnergyBurned","BloodPressureSystolic","BloodPressureDiastolic","BloodGlucose","BodyTemperature","OxygenSaturation","RespiratoryRate","SleepAnalysis","Weight","Height","BodyMassIndex","getGoogleFitScopes","FITNESS_ACTIVITY_READ","FITNESS_BODY_READ","FITNESS_BLOOD_PRESSURE_READ","FITNESS_BLOOD_GLUCOSE_READ","FITNESS_HEART_RATE_READ","FITNESS_BODY_TEMPERATURE_READ","FITNESS_OXYGEN_SATURATION_READ","FITNESS_SLEEP_READ","HealthDataProvider","_ref","children","_useState","_useState2","_slicedToArray","healthData","setHealthData","_useState3","_useState4","loading","setLoading","_useState5","_useState6","setError","_useState7","_useState8","isAuthorized","setIsAuthorized","log","timeoutId","setTimeout","loadCachedData","checkAuthorization","clearTimeout","interval","setInterval","syncHealthData","clearInterval","_ref2","_asyncToGenerator","cached","globalThis","window","localStorage","getItem","JSON","parse","err","apply","arguments","_ref3","authStatus","requestAuthorization","_ref4","initHealthKit","setItem","options","scopes","authorize","then","authResult","success","catch","Error","message","String","_ref5","newHealthData","now","Date","startDate","getTime","fetchAppleHealthData","fetchGoogleFitData","stringify","syncToBackend","_ref6","data","endDate","toISOString","Promise","resolve","getHeartRateSamples","results","length","heartRate","value","getHeartRateVariabilitySamples","heartRateVariability","getStepCount","steps","getActiveEnergyBurned","total","reduce","sum","item","activeEnergyBurned","getBloodPressureSamples","latest","bloodPressure","systolic","bloodPressureSystolicValue","diastolic","bloodPressureDiastolicValue","getBloodGlucoseSamples","bloodGlucose","getBodyTemperatureSamples","bodyTemperature","getOxygenSaturationSamples","oxygenSaturation","getRespiratoryRateSamples","respiratoryRate","getSleepSamples","asleep","filter","s","awake","inBed","sleepAnalysis","getLatestWeight","weight","getLatestHeight","height","getLatestBmi","bmi","_x","_x2","_x3","_ref7","stepsData","getDailyStepCountSamples","heartRateData","caloriesData","getDailyCalorieSamples","calorie","weightData","getWeightSamples","heightData","getHeightSamples","sleepData","totalSleep","_x4","_x5","_x6","_ref8","API_URL","process","env","EXPO_PUBLIC_API_URL","post","metrics","timestamp","source","_x7","getMetric","metricType","updateMetric","_ref9","updatedData","_objectSpread","_defineProperty","_x8","_x9","contextValue","Provider","useHealthData","context"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/src/context/HealthDataProvider.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Platform } from 'react-native';\nimport axios from 'axios';\n\n// Only import native health modules on native platforms\nlet AppleHealthKit: any = null;\nlet GoogleFit: any = null;\nlet HealthKitPermissions: any = {};\nlet HealthValue: any = {};\nlet Scopes: any = {};\n\n// Only load native modules if not on web\nif (Platform.OS !== 'web') {\n  try {\n    if (Platform.OS === 'ios') {\n      const healthModule = require('react-native-health');\n      AppleHealthKit = healthModule.default || healthModule;\n      HealthValue = healthModule.HealthValue;\n      HealthKitPermissions = healthModule.HealthKitPermissions;\n    }\n\n    if (Platform.OS === 'android') {\n      const googleFitModule = require('react-native-google-fit');\n      GoogleFit = googleFitModule.default || googleFitModule;\n      Scopes = googleFitModule.Scopes;\n    }\n  } catch (error) {\n    console.warn('Health modules not available:', error);\n  }\n}\n\n// Health Data Types\nexport interface HealthMetrics {\n  heartRate?: number;\n  heartRateVariability?: number;\n  steps?: number;\n  activeEnergyBurned?: number;\n  bloodPressure?: {\n    systolic: number;\n    diastolic: number;\n  };\n  bloodGlucose?: number;\n  bodyTemperature?: number;\n  oxygenSaturation?: number;\n  respiratoryRate?: number;\n  sleepAnalysis?: {\n    asleep: number;\n    awake: number;\n    inBed: number;\n  };\n  weight?: number;\n  height?: number;\n  bmi?: number;\n}\n\nexport interface HealthDataContextType {\n  healthData: HealthMetrics;\n  loading: boolean;\n  error: string | null;\n  isAuthorized: boolean;\n  requestAuthorization: () => Promise<void>;\n  syncHealthData: () => Promise<void>;\n  getMetric: (metricType: keyof HealthMetrics) => any;\n  updateMetric: (metricType: keyof HealthMetrics, value: any) => Promise<void>;\n}\n\nconst HealthDataContext = createContext<HealthDataContextType | undefined>(undefined);\n\nconst STORAGE_KEY = '@MediMindPlus:health_data';\nconst AUTH_KEY = '@MediMindPlus:health_auth';\n\n// HealthKit permissions for iOS - only define if AppleHealthKit is available\nconst getHealthKitPermissions = (): any => {\n  if (!AppleHealthKit || !AppleHealthKit.Constants) {\n    return { permissions: { read: [], write: [] } };\n  }\n\n  return {\n    permissions: {\n      read: [\n        AppleHealthKit.Constants.Permissions.HeartRate,\n        AppleHealthKit.Constants.Permissions.HeartRateVariability,\n        AppleHealthKit.Constants.Permissions.Steps,\n        AppleHealthKit.Constants.Permissions.ActiveEnergyBurned,\n        AppleHealthKit.Constants.Permissions.BloodPressureSystolic,\n        AppleHealthKit.Constants.Permissions.BloodPressureDiastolic,\n        AppleHealthKit.Constants.Permissions.BloodGlucose,\n        AppleHealthKit.Constants.Permissions.BodyTemperature,\n        AppleHealthKit.Constants.Permissions.OxygenSaturation,\n        AppleHealthKit.Constants.Permissions.RespiratoryRate,\n        AppleHealthKit.Constants.Permissions.SleepAnalysis,\n        AppleHealthKit.Constants.Permissions.Weight,\n        AppleHealthKit.Constants.Permissions.Height,\n        AppleHealthKit.Constants.Permissions.BodyMassIndex,\n      ],\n      write: [],\n    },\n  };\n};\n\n// Google Fit scopes for Android - only define if Scopes is available\nconst getGoogleFitScopes = (): any[] => {\n  if (!Scopes || !Scopes.FITNESS_ACTIVITY_READ) {\n    return [];\n  }\n\n  return [\n    Scopes.FITNESS_ACTIVITY_READ,\n    Scopes.FITNESS_BODY_READ,\n    Scopes.FITNESS_BLOOD_PRESSURE_READ,\n    Scopes.FITNESS_BLOOD_GLUCOSE_READ,\n    Scopes.FITNESS_HEART_RATE_READ,\n    Scopes.FITNESS_BODY_TEMPERATURE_READ,\n    Scopes.FITNESS_OXYGEN_SATURATION_READ,\n    Scopes.FITNESS_SLEEP_READ,\n  ];\n};\n\nexport const HealthDataProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [healthData, setHealthData] = useState<HealthMetrics>({});\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isAuthorized, setIsAuthorized] = useState<boolean>(false);\n\n  // Load cached health data on mount - DEFERRED to prevent blocking navigation\n  useEffect(() => {\n    console.log('[HealthDataProvider] Mounted - deferring initialization');\n    const timeoutId = setTimeout(() => {\n      console.log('[HealthDataProvider] Starting deferred initialization');\n      loadCachedData();\n      checkAuthorization();\n    }, 500); // 500ms delay to let navigation complete\n\n    return () => clearTimeout(timeoutId);\n  }, []);\n\n  // Auto-sync every 5 minutes if authorized\n  useEffect(() => {\n    if (isAuthorized) {\n      const interval = setInterval(() => {\n        syncHealthData();\n      }, 5 * 60 * 1000); // 5 minutes\n\n      return () => clearInterval(interval);\n    }\n  }, [isAuthorized]);\n\n  const loadCachedData = async () => {\n    try {\n      let cached: string | null;\n\n      // Use localStorage on web to avoid blocking\n      if (typeof (globalThis as any).window !== 'undefined') {\n        cached = (globalThis as any).localStorage.getItem(STORAGE_KEY);\n      } else {\n        // Use AsyncStorage on mobile\n        cached = await AsyncStorage.getItem(STORAGE_KEY);\n      }\n\n      if (cached) {\n        setHealthData(JSON.parse(cached));\n      }\n    } catch (err) {\n      console.error('Failed to load cached health data:', err);\n    }\n  };\n\n  const checkAuthorization = async () => {\n    try {\n      let authStatus: string | null;\n\n      // Use localStorage on web to avoid blocking\n      if (typeof (globalThis as any).window !== 'undefined') {\n        authStatus = (globalThis as any).localStorage.getItem(AUTH_KEY);\n      } else {\n        // Use AsyncStorage on mobile\n        authStatus = await AsyncStorage.getItem(AUTH_KEY);\n      }\n\n      setIsAuthorized(authStatus === 'true');\n    } catch (err) {\n      console.error('Failed to check authorization:', err);\n    }\n  };\n\n  const requestAuthorization = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      if (Platform.OS === 'ios') {\n        // Request HealthKit authorization\n        AppleHealthKit.initHealthKit(getHealthKitPermissions(), (err) => {\n          if (err) {\n            setError('Failed to authorize HealthKit: ' + err);\n            setLoading(false);\n            return;\n          }\n          setIsAuthorized(true);\n          // Use localStorage on web\n          if (typeof (globalThis as any).window !== 'undefined') {\n            (globalThis as any).localStorage.setItem(AUTH_KEY, 'true');\n          } else {\n            AsyncStorage.setItem(AUTH_KEY, 'true');\n          }\n          syncHealthData();\n        });\n      } else if (Platform.OS === 'android') {\n        // Request Google Fit authorization\n        const options = {\n          scopes: getGoogleFitScopes(),\n        };\n        GoogleFit.authorize(options)\n          .then((authResult) => {\n            if (authResult.success) {\n              setIsAuthorized(true);\n              // Use localStorage on web\n              if (typeof (globalThis as any).window !== 'undefined') {\n                (globalThis as any).localStorage.setItem(AUTH_KEY, 'true');\n              } else {\n                AsyncStorage.setItem(AUTH_KEY, 'true');\n              }\n              syncHealthData();\n            } else {\n              setError('Failed to authorize Google Fit');\n            }\n            setLoading(false);\n          })\n          .catch((err) => {\n            setError('Google Fit authorization error: ' + err);\n            setLoading(false);\n          });\n      }\n    } catch (err) {\n      setError('Authorization failed: ' + (err instanceof Error ? err.message : String(err)));\n      setLoading(false);\n    }\n  };\n\n  const syncHealthData = async () => {\n    if (!isAuthorized) {\n      setError('Not authorized. Please request authorization first.');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const newHealthData: HealthMetrics = {};\n      const now = new Date();\n      const startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000); // Last 24 hours\n\n      if (Platform.OS === 'ios') {\n        // Fetch HealthKit data\n        await fetchAppleHealthData(newHealthData, startDate, now);\n      } else if (Platform.OS === 'android') {\n        // Fetch Google Fit data\n        await fetchGoogleFitData(newHealthData, startDate, now);\n      }\n\n      // Update state and cache\n      setHealthData(newHealthData);\n\n      // Use localStorage on web to avoid blocking\n      if (typeof (globalThis as any).window !== 'undefined') {\n        (globalThis as any).localStorage.setItem(STORAGE_KEY, JSON.stringify(newHealthData));\n      } else {\n        await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(newHealthData));\n      }\n\n      // Sync to backend\n      await syncToBackend(newHealthData);\n\n      setLoading(false);\n    } catch (err) {\n      setError('Failed to sync health data: ' + (err instanceof Error ? err.message : String(err)));\n      setLoading(false);\n    }\n  };\n\n  const fetchAppleHealthData = async (data: HealthMetrics, startDate: Date, endDate: Date) => {\n    const options = {\n      startDate: startDate.toISOString(),\n      endDate: endDate.toISOString(),\n    };\n\n    // Heart Rate\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getHeartRateSamples(options, (err: string, results: HealthValue[]) => {\n        if (!err && results.length > 0) {\n          data.heartRate = results[results.length - 1].value;\n        }\n        resolve();\n      });\n    });\n\n    // Heart Rate Variability\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getHeartRateVariabilitySamples(options, (err: string, results: HealthValue[]) => {\n        if (!err && results.length > 0) {\n          data.heartRateVariability = results[results.length - 1].value;\n        }\n        resolve();\n      });\n    });\n\n    // Steps\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getStepCount(options, (err: string, results: HealthValue) => {\n        if (!err) {\n          data.steps = results.value;\n        }\n        resolve();\n      });\n    });\n\n    // Active Energy Burned\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getActiveEnergyBurned(options, (err: string, results: HealthValue[]) => {\n        if (!err && results.length > 0) {\n          const total = results.reduce((sum, item) => sum + item.value, 0);\n          data.activeEnergyBurned = total;\n        }\n        resolve();\n      });\n    });\n\n    // Blood Pressure\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getBloodPressureSamples(options, (err: string, results: any[]) => {\n        if (!err && results.length > 0) {\n          const latest = results[results.length - 1];\n          data.bloodPressure = {\n            systolic: latest.bloodPressureSystolicValue,\n            diastolic: latest.bloodPressureDiastolicValue,\n          };\n        }\n        resolve();\n      });\n    });\n\n    // Blood Glucose\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getBloodGlucoseSamples(options, (err: string, results: HealthValue[]) => {\n        if (!err && results.length > 0) {\n          data.bloodGlucose = results[results.length - 1].value;\n        }\n        resolve();\n      });\n    });\n\n    // Body Temperature\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getBodyTemperatureSamples(options, (err: string, results: HealthValue[]) => {\n        if (!err && results.length > 0) {\n          data.bodyTemperature = results[results.length - 1].value;\n        }\n        resolve();\n      });\n    });\n\n    // Oxygen Saturation\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getOxygenSaturationSamples(options, (err: string, results: HealthValue[]) => {\n        if (!err && results.length > 0) {\n          data.oxygenSaturation = results[results.length - 1].value;\n        }\n        resolve();\n      });\n    });\n\n    // Respiratory Rate\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getRespiratoryRateSamples(options, (err: string, results: HealthValue[]) => {\n        if (!err && results.length > 0) {\n          data.respiratoryRate = results[results.length - 1].value;\n        }\n        resolve();\n      });\n    });\n\n    // Sleep Analysis\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getSleepSamples(options, (err: string, results: any[]) => {\n        if (!err && results.length > 0) {\n          const asleep = results.filter(s => s.value === 'ASLEEP').reduce((sum, s) => sum + (s.endDate - s.startDate), 0) / (1000 * 60 * 60);\n          const awake = results.filter(s => s.value === 'AWAKE').reduce((sum, s) => sum + (s.endDate - s.startDate), 0) / (1000 * 60 * 60);\n          const inBed = results.filter(s => s.value === 'INBED').reduce((sum, s) => sum + (s.endDate - s.startDate), 0) / (1000 * 60 * 60);\n\n          data.sleepAnalysis = { asleep, awake, inBed };\n        }\n        resolve();\n      });\n    });\n\n    // Weight\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getLatestWeight(null, (err: string, results: HealthValue) => {\n        if (!err) {\n          data.weight = results.value;\n        }\n        resolve();\n      });\n    });\n\n    // Height\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getLatestHeight(null, (err: string, results: HealthValue) => {\n        if (!err) {\n          data.height = results.value;\n        }\n        resolve();\n      });\n    });\n\n    // BMI\n    await new Promise<void>((resolve) => {\n      AppleHealthKit.getLatestBmi(null, (err: string, results: HealthValue) => {\n        if (!err) {\n          data.bmi = results.value;\n        }\n        resolve();\n      });\n    });\n  };\n\n  const fetchGoogleFitData = async (data: HealthMetrics, startDate: Date, endDate: Date) => {\n    const options = {\n      startDate: startDate.toISOString(),\n      endDate: endDate.toISOString(),\n    };\n\n    // Steps\n    const stepsData = await GoogleFit.getDailyStepCountSamples(options);\n    if (stepsData.length > 0) {\n      data.steps = stepsData[0].steps.reduce((sum: number, item: any) => sum + item.value, 0);\n    }\n\n    // Heart Rate\n    const heartRateData = await GoogleFit.getHeartRateSamples(options);\n    if (heartRateData.length > 0) {\n      data.heartRate = heartRateData[heartRateData.length - 1].value;\n    }\n\n    // Calories\n    const caloriesData = await GoogleFit.getDailyCalorieSamples(options);\n    if (caloriesData.length > 0) {\n      data.activeEnergyBurned = caloriesData[0].calorie;\n    }\n\n    // Weight\n    const weightData = await GoogleFit.getWeightSamples(options);\n    if (weightData.length > 0) {\n      data.weight = weightData[weightData.length - 1].value;\n    }\n\n    // Height\n    const heightData = await GoogleFit.getHeightSamples(options);\n    if (heightData.length > 0) {\n      data.height = heightData[heightData.length - 1].value;\n    }\n\n    // Sleep\n    const sleepData = await GoogleFit.getSleepSamples(options);\n    if (sleepData.length > 0) {\n      const totalSleep = sleepData.reduce((sum: number, item: any) => {\n        return sum + (new Date(item.endDate).getTime() - new Date(item.startDate).getTime());\n      }, 0) / (1000 * 60 * 60);\n\n      data.sleepAnalysis = {\n        asleep: totalSleep,\n        awake: 0,\n        inBed: totalSleep,\n      };\n    }\n  };\n\n  const syncToBackend = async (data: HealthMetrics) => {\n    try {\n      const API_URL = process.env.EXPO_PUBLIC_API_URL || 'http://localhost:3000';\n      await axios.post(`${API_URL}/api/health-metrics`, {\n        metrics: data,\n        timestamp: new Date().toISOString(),\n        source: Platform.OS === 'ios' ? 'apple_health' : 'google_fit',\n      });\n    } catch (err) {\n      console.error('Failed to sync to backend:', err);\n      // Don't throw - allow offline usage\n    }\n  };\n\n  const getMetric = (metricType: keyof HealthMetrics) => {\n    return healthData[metricType];\n  };\n\n  const updateMetric = async (metricType: keyof HealthMetrics, value: any) => {\n    const updatedData = {\n      ...healthData,\n      [metricType]: value,\n    };\n\n    setHealthData(updatedData);\n\n    // Use localStorage on web to avoid blocking\n    if (typeof (globalThis as any).window !== 'undefined') {\n      (globalThis as any).localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedData));\n    } else {\n      await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(updatedData));\n    }\n\n    await syncToBackend(updatedData);\n  };\n\n  const contextValue: HealthDataContextType = {\n    healthData,\n    loading,\n    error,\n    isAuthorized,\n    requestAuthorization,\n    syncHealthData,\n    getMetric,\n    updateMetric,\n  };\n\n  return (\n    <HealthDataContext.Provider value={contextValue}>\n      {children}\n    </HealthDataContext.Provider>\n  );\n};\n\n// Custom hook to use health data context\nexport const useHealthData = (): HealthDataContextType => {\n  const context = useContext(HealthDataContext);\n  if (!context) {\n    throw new Error('useHealthData must be used within HealthDataProvider');\n  }\n  return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}