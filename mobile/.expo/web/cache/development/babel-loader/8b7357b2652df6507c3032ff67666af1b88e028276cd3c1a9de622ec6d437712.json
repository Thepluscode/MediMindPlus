{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { Ionicons } from '@expo/vector-icons';\nimport { theme } from \"../theme/theme\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nvar DocumentPicker;\nvar ImagePicker;\nif (Platform.OS !== 'web') {\n  DocumentPicker = require('expo-document-picker');\n  ImagePicker = require('expo-image-picker');\n}\nexport default function SecureMessagingScreen(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useState = useState('list'),\n    _useState2 = _slicedToArray(_useState, 2),\n    view = _useState2[0],\n    setView = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    conversations = _useState4[0],\n    setConversations = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    currentConversation = _useState6[0],\n    setCurrentConversation = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    messages = _useState8[0],\n    setMessages = _useState8[1];\n  var _useState9 = useState(''),\n    _useState0 = _slicedToArray(_useState9, 2),\n    messageText = _useState0[0],\n    setMessageText = _useState0[1];\n  var _useState1 = useState(false),\n    _useState10 = _slicedToArray(_useState1, 2),\n    loading = _useState10[0],\n    setLoading = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    sending = _useState12[0],\n    setSending = _useState12[1];\n  var _useState13 = useState([]),\n    _useState14 = _slicedToArray(_useState13, 2),\n    attachments = _useState14[0],\n    setAttachments = _useState14[1];\n  var _useState15 = useState(''),\n    _useState16 = _slicedToArray(_useState15, 2),\n    searchQuery = _useState16[0],\n    setSearchQuery = _useState16[1];\n  var _useState17 = useState(false),\n    _useState18 = _slicedToArray(_useState17, 2),\n    showSearch = _useState18[0],\n    setShowSearch = _useState18[1];\n  var scrollViewRef = useRef(null);\n  var currentUserId = 'patient_123';\n  useEffect(function () {\n    loadConversations();\n    return function () {};\n  }, []);\n  useEffect(function () {\n    if (currentConversation) {\n      loadMessages(currentConversation.conversationId);\n    }\n  }, [currentConversation]);\n  var loadConversations = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        setLoading(true);\n        var mockConversations = [{\n          conversationId: 'conv_1',\n          participants: ['patient_123', 'provider_456'],\n          conversationType: 'patient_provider',\n          lastMessage: {\n            content: 'Your lab results are ready for review',\n            timestamp: new Date(Date.now() - 1000 * 60 * 30),\n            senderId: 'provider_456'\n          },\n          unreadCount: 2,\n          participantInfo: [{\n            userId: 'provider_456',\n            name: 'Dr. Sarah Chen',\n            role: 'provider',\n            specialty: 'Primary Care',\n            avatar: 'https://i.pravatar.cc/150?img=47'\n          }]\n        }, {\n          conversationId: 'conv_2',\n          participants: ['patient_123', 'provider_789'],\n          conversationType: 'patient_provider',\n          lastMessage: {\n            content: 'How are you feeling after the medication change?',\n            timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2),\n            senderId: 'provider_789'\n          },\n          unreadCount: 0,\n          participantInfo: [{\n            userId: 'provider_789',\n            name: 'Dr. Michael Rodriguez',\n            role: 'provider',\n            specialty: 'Cardiology',\n            avatar: 'https://i.pravatar.cc/150?img=12'\n          }]\n        }, {\n          conversationId: 'conv_3',\n          participants: ['patient_123', 'nurse_101'],\n          conversationType: 'patient_provider',\n          lastMessage: {\n            content: 'Your appointment is confirmed for tomorrow at 2 PM',\n            timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24),\n            senderId: 'nurse_101'\n          },\n          unreadCount: 0,\n          participantInfo: [{\n            userId: 'nurse_101',\n            name: 'Nurse Emma Wilson',\n            role: 'nurse',\n            avatar: 'https://i.pravatar.cc/150?img=32'\n          }]\n        }];\n        setConversations(mockConversations);\n      } catch (error) {\n        Alert.alert('Error', `Failed to load conversations: ${error.message}`);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function loadConversations() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var loadMessages = function () {\n    var _ref3 = _asyncToGenerator(function* (conversationId) {\n      try {\n        setLoading(true);\n        var mockMessages = [{\n          messageId: 'msg_1',\n          conversationId: conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'Hello! I reviewed your recent blood work.',\n          timestamp: new Date(Date.now() - 1000 * 60 * 60),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        }, {\n          messageId: 'msg_2',\n          conversationId: conversationId,\n          senderId: 'patient_123',\n          recipientId: 'provider_456',\n          content: 'Thank you, Doctor! How does everything look?',\n          timestamp: new Date(Date.now() - 1000 * 60 * 45),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        }, {\n          messageId: 'msg_3',\n          conversationId: conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'Your cholesterol levels have improved significantly! The medication is working well. Keep up the great work with diet and exercise.',\n          timestamp: new Date(Date.now() - 1000 * 60 * 40),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        }, {\n          messageId: 'msg_4',\n          conversationId: conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'I\\'ve attached your detailed lab results for your records.',\n          timestamp: new Date(Date.now() - 1000 * 60 * 35),\n          messageType: 'document',\n          priority: 'normal',\n          deleted: false,\n          attachments: [{\n            attachmentId: 'att_1',\n            fileName: 'Lab_Results_2025_01.pdf',\n            fileType: 'application/pdf',\n            fileSize: 245000,\n            encryptedUrl: 'https://s3.amazonaws.com/medimind/...',\n            uploadedAt: new Date()\n          }],\n          readAt: new Date()\n        }, {\n          messageId: 'msg_5',\n          conversationId: conversationId,\n          senderId: 'patient_123',\n          recipientId: 'provider_456',\n          content: 'That\\'s wonderful news! Should I continue the same dosage?',\n          timestamp: new Date(Date.now() - 1000 * 60 * 32),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        }, {\n          messageId: 'msg_6',\n          conversationId: conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'Your lab results are ready for review',\n          timestamp: new Date(Date.now() - 1000 * 60 * 30),\n          messageType: 'text',\n          priority: 'urgent',\n          deleted: false\n        }];\n        setMessages(mockMessages);\n        yield markConversationAsRead(conversationId);\n        setTimeout(function () {\n          var _scrollViewRef$curren;\n          (_scrollViewRef$curren = scrollViewRef.current) == null ? void 0 : _scrollViewRef$curren.scrollToEnd({\n            animated: true\n          });\n        }, 100);\n      } catch (error) {\n        Alert.alert('Error', `Failed to load messages: ${error.message}`);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function loadMessages(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var markConversationAsRead = function () {\n    var _ref4 = _asyncToGenerator(function* (conversationId) {\n      setConversations(function (prev) {\n        return prev.map(function (conv) {\n          return conv.conversationId === conversationId ? _objectSpread(_objectSpread({}, conv), {}, {\n            unreadCount: 0\n          }) : conv;\n        });\n      });\n    });\n    return function markConversationAsRead(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var sendMessage = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      if (!messageText.trim() && attachments.length === 0) return;\n      if (!currentConversation) return;\n      try {\n        setSending(true);\n        var newMessage = {\n          messageId: `msg_${Date.now()}`,\n          conversationId: currentConversation.conversationId,\n          senderId: currentUserId,\n          recipientId: currentConversation.participants.find(function (p) {\n            return p !== currentUserId;\n          }) || '',\n          content: messageText.trim(),\n          timestamp: new Date(),\n          messageType: attachments.length > 0 ? 'document' : 'text',\n          priority: 'normal',\n          deleted: false,\n          attachments: attachments.length > 0 ? attachments : undefined\n        };\n        setMessages(function (prev) {\n          return [].concat(_toConsumableArray(prev), [newMessage]);\n        });\n        setMessageText('');\n        setAttachments([]);\n        setTimeout(function () {\n          var _scrollViewRef$curren2;\n          (_scrollViewRef$curren2 = scrollViewRef.current) == null ? void 0 : _scrollViewRef$curren2.scrollToEnd({\n            animated: true\n          });\n        }, 100);\n      } catch (error) {\n        Alert.alert('Error', `Failed to send message: ${error.message}`);\n      } finally {\n        setSending(false);\n      }\n    });\n    return function sendMessage() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleAttachment = function () {\n    var _ref6 = _asyncToGenerator(function* () {\n      if (Platform.OS === 'web') {\n        Alert.alert('Not Available', 'File attachments are only available on mobile devices.');\n        return;\n      }\n      Alert.alert('Add Attachment', 'Choose attachment type', [{\n        text: 'Document',\n        onPress: function () {\n          var _onPress = _asyncToGenerator(function* () {\n            var result = yield DocumentPicker.getDocumentAsync({\n              type: '*/*',\n              copyToCacheDirectory: true\n            });\n            if (!result.canceled && result.assets && result.assets.length > 0) {\n              var file = result.assets[0];\n              setAttachments(function (prev) {\n                return [].concat(_toConsumableArray(prev), [{\n                  attachmentId: `att_${Date.now()}`,\n                  fileName: file.name,\n                  fileType: file.mimeType || 'application/octet-stream',\n                  fileSize: file.size || 0,\n                  uri: file.uri,\n                  uploadedAt: new Date()\n                }]);\n              });\n            }\n          });\n          function onPress() {\n            return _onPress.apply(this, arguments);\n          }\n          return onPress;\n        }()\n      }, {\n        text: 'Photo',\n        onPress: function () {\n          var _onPress2 = _asyncToGenerator(function* () {\n            var result = yield ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              quality: 0.8\n            });\n            if (!result.canceled && result.assets[0]) {\n              setAttachments(function (prev) {\n                return [].concat(_toConsumableArray(prev), [{\n                  attachmentId: `att_${Date.now()}`,\n                  fileName: `image_${Date.now()}.jpg`,\n                  fileType: 'image/jpeg',\n                  fileSize: 0,\n                  uri: result.assets[0].uri,\n                  uploadedAt: new Date()\n                }]);\n              });\n            }\n          });\n          function onPress() {\n            return _onPress2.apply(this, arguments);\n          }\n          return onPress;\n        }()\n      }, {\n        text: 'Cancel',\n        style: 'cancel'\n      }]);\n    });\n    return function handleAttachment() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var removeAttachment = function removeAttachment(attachmentId) {\n    setAttachments(function (prev) {\n      return prev.filter(function (a) {\n        return a.attachmentId !== attachmentId;\n      });\n    });\n  };\n  var openConversation = function openConversation(conversation) {\n    setCurrentConversation(conversation);\n    setView('chat');\n  };\n  var backToList = function backToList() {\n    setView('list');\n    setCurrentConversation(null);\n    setMessages([]);\n    setMessageText('');\n    setAttachments([]);\n  };\n  var formatTimestamp = function formatTimestamp(date) {\n    var now = new Date();\n    var diff = now.getTime() - date.getTime();\n    var minutes = Math.floor(diff / (1000 * 60));\n    var hours = Math.floor(diff / (1000 * 60 * 60));\n    var days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    if (days === 1) return 'Yesterday';\n    if (days < 7) return `${days}d ago`;\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n  var formatMessageTime = function formatMessageTime(date) {\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit'\n    });\n  };\n  var getFileIcon = function getFileIcon(fileType) {\n    if (fileType.includes('pdf')) return 'document-text';\n    if (fileType.includes('image')) return 'image';\n    if (fileType.includes('video')) return 'videocam';\n    return 'document';\n  };\n  var renderConversationItem = function renderConversationItem(_ref7) {\n    var item = _ref7.item;\n    var otherParticipant = item.participantInfo[0];\n    return _jsxs(TouchableOpacity, {\n      style: styles.conversationItem,\n      onPress: function onPress() {\n        return openConversation(item);\n      },\n      children: [_jsxs(View, {\n        style: styles.avatarContainer,\n        children: [otherParticipant.avatar ? _jsx(Image, {\n          source: {\n            uri: otherParticipant.avatar\n          },\n          style: styles.avatar\n        }) : _jsx(View, {\n          style: [styles.avatar, styles.avatarPlaceholder],\n          children: _jsx(Ionicons, {\n            name: \"person\",\n            size: 24,\n            color: \"#fff\"\n          })\n        }), item.unreadCount > 0 && _jsx(View, {\n          style: styles.unreadBadge,\n          children: _jsx(Text, {\n            style: styles.unreadBadgeText,\n            children: item.unreadCount\n          })\n        })]\n      }), _jsxs(View, {\n        style: styles.conversationInfo,\n        children: [_jsxs(View, {\n          style: styles.conversationHeader,\n          children: [_jsx(Text, {\n            style: styles.conversationName,\n            children: otherParticipant.name\n          }), _jsx(Text, {\n            style: styles.conversationTime,\n            children: item.lastMessage ? formatTimestamp(item.lastMessage.timestamp) : ''\n          })]\n        }), otherParticipant.specialty && _jsx(Text, {\n          style: styles.conversationSpecialty,\n          children: otherParticipant.specialty\n        }), item.lastMessage && _jsxs(Text, {\n          style: [styles.lastMessage, item.unreadCount > 0 && styles.lastMessageUnread],\n          numberOfLines: 1,\n          children: [item.lastMessage.senderId === currentUserId ? 'You: ' : '', item.lastMessage.content]\n        })]\n      }), _jsx(Ionicons, {\n        name: \"chevron-forward\",\n        size: 20,\n        color: \"#999\"\n      })]\n    });\n  };\n  var renderMessage = function renderMessage(_ref8) {\n    var item = _ref8.item;\n    var isOwnMessage = item.senderId === currentUserId;\n    var isExpiringSoon = item.expiresAt && item.expiresAt.getTime() - Date.now() < 1000 * 60 * 60 * 24;\n    return _jsx(View, {\n      style: [styles.messageContainer, isOwnMessage ? styles.ownMessageContainer : styles.otherMessageContainer],\n      children: _jsxs(View, {\n        style: [styles.messageBubble, isOwnMessage ? styles.ownMessageBubble : styles.otherMessageBubble, item.priority === 'urgent' && styles.urgentMessage, item.priority === 'critical' && styles.criticalMessage],\n        children: [item.priority !== 'normal' && _jsxs(View, {\n          style: styles.priorityBadge,\n          children: [_jsx(Ionicons, {\n            name: item.priority === 'urgent' ? 'warning' : 'alert-circle',\n            size: 14,\n            color: \"#fff\"\n          }), _jsx(Text, {\n            style: styles.priorityText,\n            children: item.priority.toUpperCase()\n          })]\n        }), _jsx(Text, {\n          style: [styles.messageText, isOwnMessage ? styles.ownMessageText : styles.otherMessageText],\n          children: item.content\n        }), item.attachments && item.attachments.length > 0 && _jsx(View, {\n          style: styles.attachmentsContainer,\n          children: item.attachments.map(function (attachment) {\n            return _jsxs(TouchableOpacity, {\n              style: styles.attachmentItem,\n              children: [_jsx(Ionicons, {\n                name: getFileIcon(attachment.fileType),\n                size: 24,\n                color: \"#2563eb\"\n              }), _jsxs(View, {\n                style: styles.attachmentInfo,\n                children: [_jsx(Text, {\n                  style: styles.attachmentName,\n                  numberOfLines: 1,\n                  children: attachment.fileName\n                }), _jsxs(Text, {\n                  style: styles.attachmentSize,\n                  children: [(attachment.fileSize / 1024).toFixed(1), \" KB\"]\n                })]\n              }), _jsx(Ionicons, {\n                name: \"download\",\n                size: 20,\n                color: \"#2563eb\"\n              })]\n            }, attachment.attachmentId);\n          })\n        }), _jsxs(View, {\n          style: styles.messageFooter,\n          children: [_jsx(Text, {\n            style: styles.messageTime,\n            children: formatMessageTime(item.timestamp)\n          }), isOwnMessage && item.readAt && _jsx(Ionicons, {\n            name: \"checkmark-done\",\n            size: 16,\n            color: \"#2563eb\"\n          }), isOwnMessage && !item.readAt && _jsx(Ionicons, {\n            name: \"checkmark\",\n            size: 16,\n            color: \"#999\"\n          }), isExpiringSoon && _jsx(Ionicons, {\n            name: \"time\",\n            size: 14,\n            color: \"#f59e0b\",\n            style: {\n              marginLeft: 4\n            }\n          })]\n        })]\n      })\n    });\n  };\n  var renderConversationsList = function renderConversationsList() {\n    return _jsxs(View, {\n      style: styles.container,\n      children: [_jsxs(LinearGradient, {\n        colors: theme.gradients.primary.colors,\n        style: styles.header,\n        children: [_jsxs(View, {\n          style: styles.headerContent,\n          children: [_jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return navigation.goBack();\n            },\n            style: styles.backButton,\n            children: _jsx(Ionicons, {\n              name: \"arrow-back\",\n              size: 24,\n              color: \"#fff\"\n            })\n          }), _jsx(Text, {\n            style: styles.headerTitle,\n            children: \"Secure Messages\"\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return setShowSearch(!showSearch);\n            },\n            children: _jsx(Ionicons, {\n              name: \"search\",\n              size: 24,\n              color: \"#fff\"\n            })\n          })]\n        }), showSearch && _jsxs(View, {\n          style: styles.searchContainer,\n          children: [_jsx(Ionicons, {\n            name: \"search\",\n            size: 20,\n            color: \"#999\",\n            style: styles.searchIcon\n          }), _jsx(TextInput, {\n            style: styles.searchInput,\n            placeholder: \"Search messages...\",\n            placeholderTextColor: \"#999\",\n            value: searchQuery,\n            onChangeText: setSearchQuery\n          })]\n        })]\n      }), _jsxs(View, {\n        style: styles.encryptionBanner,\n        children: [_jsx(Ionicons, {\n          name: \"lock-closed\",\n          size: 16,\n          color: \"#10b981\"\n        }), _jsx(Text, {\n          style: styles.encryptionText,\n          children: \"End-to-end encrypted \\u2022 HIPAA compliant\"\n        })]\n      }), loading ? _jsx(View, {\n        style: styles.loadingContainer,\n        children: _jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#2563eb\"\n        })\n      }) : _jsx(FlatList, {\n        data: conversations,\n        renderItem: renderConversationItem,\n        keyExtractor: function keyExtractor(item) {\n          return item.conversationId;\n        },\n        contentContainerStyle: styles.conversationsList\n      })]\n    });\n  };\n  var renderChatView = function renderChatView() {\n    if (!currentConversation) return null;\n    var otherParticipant = currentConversation.participantInfo[0];\n    return _jsxs(KeyboardAvoidingView, {\n      style: styles.container,\n      behavior: Platform.OS === 'ios' ? 'padding' : undefined,\n      keyboardVerticalOffset: Platform.OS === 'ios' ? 0 : 0,\n      children: [_jsx(LinearGradient, {\n        colors: theme.gradients.primary.colors,\n        style: styles.chatHeader,\n        children: _jsxs(View, {\n          style: styles.chatHeaderContent,\n          children: [_jsx(TouchableOpacity, {\n            onPress: backToList,\n            style: styles.backButton,\n            children: _jsx(Ionicons, {\n              name: \"arrow-back\",\n              size: 24,\n              color: \"#fff\"\n            })\n          }), _jsxs(View, {\n            style: styles.chatHeaderInfo,\n            children: [otherParticipant.avatar ? _jsx(Image, {\n              source: {\n                uri: otherParticipant.avatar\n              },\n              style: styles.chatAvatar\n            }) : _jsx(View, {\n              style: [styles.chatAvatar, styles.avatarPlaceholder],\n              children: _jsx(Ionicons, {\n                name: \"person\",\n                size: 20,\n                color: \"#fff\"\n              })\n            }), _jsxs(View, {\n              children: [_jsx(Text, {\n                style: styles.chatHeaderName,\n                children: otherParticipant.name\n              }), otherParticipant.specialty && _jsx(Text, {\n                style: styles.chatHeaderSpecialty,\n                children: otherParticipant.specialty\n              })]\n            })]\n          }), _jsx(TouchableOpacity, {\n            children: _jsx(Ionicons, {\n              name: \"ellipsis-vertical\",\n              size: 24,\n              color: \"#fff\"\n            })\n          })]\n        })\n      }), _jsx(ScrollView, {\n        ref: scrollViewRef,\n        style: styles.messagesContainer,\n        contentContainerStyle: styles.messagesContent,\n        children: loading ? _jsx(View, {\n          style: styles.loadingContainer,\n          children: _jsx(ActivityIndicator, {\n            size: \"large\",\n            color: \"#2563eb\"\n          })\n        }) : _jsx(_Fragment, {\n          children: messages.map(function (message) {\n            return _jsx(View, {\n              children: renderMessage({\n                item: message\n              })\n            }, message.messageId);\n          })\n        })\n      }), attachments.length > 0 && _jsx(View, {\n        style: styles.composerAttachments,\n        children: attachments.map(function (attachment) {\n          return _jsxs(View, {\n            style: styles.composerAttachmentItem,\n            children: [_jsx(Ionicons, {\n              name: getFileIcon(attachment.fileType),\n              size: 20,\n              color: \"#2563eb\"\n            }), _jsx(Text, {\n              style: styles.composerAttachmentName,\n              numberOfLines: 1,\n              children: attachment.fileName\n            }), _jsx(TouchableOpacity, {\n              onPress: function onPress() {\n                return removeAttachment(attachment.attachmentId);\n              },\n              children: _jsx(Ionicons, {\n                name: \"close-circle\",\n                size: 20,\n                color: \"#ef4444\"\n              })\n            })]\n          }, attachment.attachmentId);\n        })\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.attachButton,\n          onPress: handleAttachment,\n          children: _jsx(Ionicons, {\n            name: \"attach\",\n            size: 24,\n            color: \"#2563eb\"\n          })\n        }), _jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"Type a message...\",\n          placeholderTextColor: \"#999\",\n          value: messageText,\n          onChangeText: setMessageText,\n          multiline: true,\n          maxLength: 2000\n        }), _jsx(TouchableOpacity, {\n          style: [styles.sendButton, !messageText.trim() && attachments.length === 0 && styles.sendButtonDisabled],\n          onPress: sendMessage,\n          disabled: !messageText.trim() && attachments.length === 0,\n          children: sending ? _jsx(ActivityIndicator, {\n            size: \"small\",\n            color: \"#fff\"\n          }) : _jsx(Ionicons, {\n            name: \"send\",\n            size: 20,\n            color: \"#fff\"\n          })\n        })]\n      })]\n    });\n  };\n  return view === 'list' ? renderConversationsList() : renderChatView();\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8fafc'\n  },\n  header: {\n    paddingTop: 60,\n    paddingBottom: 20,\n    paddingHorizontal: 20\n  },\n  headerContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between'\n  },\n  backButton: {\n    padding: 8\n  },\n  headerTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#fff',\n    flex: 1,\n    marginLeft: 16\n  },\n  searchContainer: {\n    marginTop: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255,255,255,0.2)',\n    borderRadius: 12,\n    paddingHorizontal: 12\n  },\n  searchIcon: {\n    marginRight: 8\n  },\n  searchInput: {\n    flex: 1,\n    paddingVertical: 12,\n    color: '#fff',\n    fontSize: 16\n  },\n  encryptionBanner: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 8,\n    backgroundColor: '#ecfdf5',\n    borderBottomWidth: 1,\n    borderBottomColor: '#d1fae5'\n  },\n  encryptionText: {\n    marginLeft: 8,\n    fontSize: 12,\n    color: '#059669',\n    fontWeight: '600'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 40\n  },\n  conversationsList: {\n    paddingVertical: 8\n  },\n  conversationItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 16,\n    paddingHorizontal: 20,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e2e8f0'\n  },\n  avatarContainer: {\n    position: 'relative'\n  },\n  avatar: {\n    width: 56,\n    height: 56,\n    borderRadius: 28\n  },\n  avatarPlaceholder: {\n    backgroundColor: '#94a3b8',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  unreadBadge: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    backgroundColor: '#ef4444',\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 6\n  },\n  unreadBadgeText: {\n    color: '#fff',\n    fontSize: 12,\n    fontWeight: 'bold'\n  },\n  conversationInfo: {\n    flex: 1,\n    marginLeft: 16\n  },\n  conversationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4\n  },\n  conversationName: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#1e293b'\n  },\n  conversationTime: {\n    fontSize: 12,\n    color: '#64748b'\n  },\n  conversationSpecialty: {\n    fontSize: 13,\n    color: '#2563eb',\n    marginBottom: 4\n  },\n  lastMessage: {\n    fontSize: 14,\n    color: '#64748b'\n  },\n  lastMessageUnread: {\n    fontWeight: '600',\n    color: '#1e293b'\n  },\n  chatHeader: {\n    paddingTop: 60,\n    paddingBottom: 16,\n    paddingHorizontal: 20\n  },\n  chatHeaderContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between'\n  },\n  chatHeaderInfo: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginLeft: 16\n  },\n  chatAvatar: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 12\n  },\n  chatHeaderName: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#fff'\n  },\n  chatHeaderSpecialty: {\n    fontSize: 12,\n    color: 'rgba(255,255,255,0.8)'\n  },\n  messagesContainer: {\n    flex: 1,\n    backgroundColor: '#f8fafc'\n  },\n  messagesContent: {\n    paddingVertical: 16\n  },\n  messageContainer: {\n    marginBottom: 12,\n    paddingHorizontal: 16\n  },\n  ownMessageContainer: {\n    alignItems: 'flex-end'\n  },\n  otherMessageContainer: {\n    alignItems: 'flex-start'\n  },\n  messageBubble: {\n    maxWidth: '80%',\n    borderRadius: 16,\n    padding: 12\n  },\n  ownMessageBubble: {\n    backgroundColor: '#2563eb'\n  },\n  otherMessageBubble: {\n    backgroundColor: '#fff',\n    borderWidth: 1,\n    borderColor: '#e2e8f0'\n  },\n  urgentMessage: {\n    borderColor: '#f59e0b',\n    borderWidth: 2\n  },\n  criticalMessage: {\n    borderColor: '#ef4444',\n    borderWidth: 2\n  },\n  priorityBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.1)',\n    borderRadius: 8,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    marginBottom: 8\n  },\n  priorityText: {\n    fontSize: 10,\n    fontWeight: 'bold',\n    color: '#fff',\n    marginLeft: 4\n  },\n  messageText: {\n    fontSize: 15,\n    lineHeight: 20\n  },\n  ownMessageText: {\n    color: '#fff'\n  },\n  otherMessageText: {\n    color: '#1e293b'\n  },\n  attachmentsContainer: {\n    marginTop: 8\n  },\n  attachmentItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderRadius: 8,\n    padding: 8,\n    marginBottom: 4\n  },\n  attachmentInfo: {\n    flex: 1,\n    marginLeft: 8\n  },\n  attachmentName: {\n    fontSize: 13,\n    fontWeight: '500',\n    color: '#1e293b'\n  },\n  attachmentSize: {\n    fontSize: 11,\n    color: '#64748b',\n    marginTop: 2\n  },\n  messageFooter: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 4\n  },\n  messageTime: {\n    fontSize: 11,\n    color: 'rgba(0,0,0,0.4)',\n    marginRight: 4\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#e2e8f0'\n  },\n  attachButton: {\n    padding: 8,\n    marginRight: 8\n  },\n  input: {\n    flex: 1,\n    maxHeight: 100,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#f1f5f9',\n    borderRadius: 20,\n    fontSize: 15,\n    color: '#1e293b'\n  },\n  sendButton: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    backgroundColor: '#2563eb',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8\n  },\n  sendButtonDisabled: {\n    opacity: 0.5\n  },\n  composerAttachments: {\n    paddingHorizontal: 16,\n    paddingTop: 12,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#e2e8f0'\n  },\n  composerAttachmentItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f1f5f9',\n    borderRadius: 8,\n    padding: 8,\n    marginBottom: 8\n  },\n  composerAttachmentName: {\n    flex: 1,\n    fontSize: 13,\n    color: '#1e293b',\n    marginLeft: 8\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","useRef","View","Text","StyleSheet","ScrollView","TextInput","TouchableOpacity","FlatList","Image","ActivityIndicator","Alert","KeyboardAvoidingView","Platform","LinearGradient","Ionicons","theme","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DocumentPicker","ImagePicker","OS","require","SecureMessagingScreen","_ref","navigation","route","_useState","_useState2","_slicedToArray","view","setView","_useState3","_useState4","conversations","setConversations","_useState5","_useState6","currentConversation","setCurrentConversation","_useState7","_useState8","messages","setMessages","_useState9","_useState0","messageText","setMessageText","_useState1","_useState10","loading","setLoading","_useState11","_useState12","sending","setSending","_useState13","_useState14","attachments","setAttachments","_useState15","_useState16","searchQuery","setSearchQuery","_useState17","_useState18","showSearch","setShowSearch","scrollViewRef","currentUserId","loadConversations","loadMessages","conversationId","_ref2","_asyncToGenerator","mockConversations","participants","conversationType","lastMessage","content","timestamp","Date","now","senderId","unreadCount","participantInfo","userId","name","role","specialty","avatar","error","alert","message","apply","arguments","_ref3","mockMessages","messageId","recipientId","messageType","priority","deleted","readAt","attachmentId","fileName","fileType","fileSize","encryptedUrl","uploadedAt","markConversationAsRead","setTimeout","_scrollViewRef$curren","current","scrollToEnd","animated","_x","_ref4","prev","map","conv","_objectSpread","_x2","sendMessage","_ref5","trim","length","newMessage","find","p","undefined","concat","_toConsumableArray","_scrollViewRef$curren2","handleAttachment","_ref6","text","onPress","_onPress","result","getDocumentAsync","type","copyToCacheDirectory","canceled","assets","file","mimeType","size","uri","_onPress2","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","quality","style","removeAttachment","filter","a","openConversation","conversation","backToList","formatTimestamp","date","diff","getTime","minutes","Math","floor","hours","days","toLocaleDateString","month","day","formatMessageTime","toLocaleTimeString","hour","minute","getFileIcon","includes","renderConversationItem","_ref7","item","otherParticipant","styles","conversationItem","children","avatarContainer","source","avatarPlaceholder","color","unreadBadge","unreadBadgeText","conversationInfo","conversationHeader","conversationName","conversationTime","conversationSpecialty","lastMessageUnread","numberOfLines","renderMessage","_ref8","isOwnMessage","isExpiringSoon","expiresAt","messageContainer","ownMessageContainer","otherMessageContainer","messageBubble","ownMessageBubble","otherMessageBubble","urgentMessage","criticalMessage","priorityBadge","priorityText","toUpperCase","ownMessageText","otherMessageText","attachmentsContainer","attachment","attachmentItem","attachmentInfo","attachmentName","attachmentSize","toFixed","messageFooter","messageTime","marginLeft","renderConversationsList","container","colors","gradients","primary","header","headerContent","goBack","backButton","headerTitle","searchContainer","searchIcon","searchInput","placeholder","placeholderTextColor","value","onChangeText","encryptionBanner","encryptionText","loadingContainer","data","renderItem","keyExtractor","contentContainerStyle","conversationsList","renderChatView","behavior","keyboardVerticalOffset","chatHeader","chatHeaderContent","chatHeaderInfo","chatAvatar","chatHeaderName","chatHeaderSpecialty","ref","messagesContainer","messagesContent","composerAttachments","composerAttachmentItem","composerAttachmentName","inputContainer","attachButton","input","multiline","maxLength","sendButton","sendButtonDisabled","disabled","create","flex","backgroundColor","paddingTop","paddingBottom","paddingHorizontal","flexDirection","alignItems","justifyContent","padding","fontSize","fontWeight","marginTop","borderRadius","marginRight","paddingVertical","borderBottomWidth","borderBottomColor","position","width","height","top","right","minWidth","marginBottom","maxWidth","borderWidth","borderColor","lineHeight","borderTopWidth","borderTopColor","maxHeight","opacity"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/src/screens/SecureMessagingScreen.tsx"],"sourcesContent":["/**\n * Secure HIPAA-Compliant Messaging Screen\n *\n * End-to-end encrypted messaging between patients and providers\n * Features: Real-time chat, file attachments, read receipts, message expiration\n *\n * Revenue Impact: +$50M ARR (enables telemedicine compliance)\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TextInput,\n  TouchableOpacity,\n  FlatList,\n  Image,\n  ActivityIndicator,\n  Alert,\n  KeyboardAvoidingView,\n  Platform,\n} from 'react-native';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { Ionicons } from '@expo/vector-icons';\nimport { theme } from '../theme/theme';\n\n// Conditional imports for native platforms only\nlet DocumentPicker: any;\nlet ImagePicker: any;\n\nif (Platform.OS !== 'web') {\n  DocumentPicker = require('expo-document-picker');\n  ImagePicker = require('expo-image-picker');\n}\n\ninterface Conversation {\n  conversationId: string;\n  participants: string[];\n  conversationType: 'patient_provider' | 'group' | 'care_team';\n  lastMessage?: {\n    content: string;\n    timestamp: Date;\n    senderId: string;\n  };\n  unreadCount: number;\n  participantInfo: {\n    userId: string;\n    name: string;\n    role: 'patient' | 'provider' | 'nurse' | 'admin';\n    avatar?: string;\n    specialty?: string;\n  }[];\n}\n\ninterface Message {\n  messageId: string;\n  conversationId: string;\n  senderId: string;\n  recipientId: string;\n  content: string;\n  timestamp: Date;\n  expiresAt?: Date;\n  readAt?: Date;\n  attachments?: MessageAttachment[];\n  messageType: 'text' | 'image' | 'document' | 'lab_result';\n  priority: 'normal' | 'urgent' | 'critical';\n  deleted: boolean;\n}\n\ninterface MessageAttachment {\n  attachmentId: string;\n  fileName: string;\n  fileType: string;\n  fileSize: number;\n  encryptedUrl: string;\n  uploadedAt: Date;\n}\n\nexport default function SecureMessagingScreen({ navigation, route }: any) {\n  const [view, setView] = useState<'list' | 'chat'>('list');\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [currentConversation, setCurrentConversation] = useState<Conversation | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [messageText, setMessageText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [attachments, setAttachments] = useState<any[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showSearch, setShowSearch] = useState(false);\n\n  const scrollViewRef = useRef<ScrollView>(null);\n  const currentUserId = 'patient_123'; // Would come from auth context\n\n  useEffect(() => {\n    loadConversations();\n\n    // Setup real-time messaging (Socket.io)\n    // setupWebSocket();\n\n    return () => {\n      // Cleanup WebSocket\n    };\n  }, []);\n\n  useEffect(() => {\n    if (currentConversation) {\n      loadMessages(currentConversation.conversationId);\n    }\n  }, [currentConversation]);\n\n  // ========================================\n  // DATA LOADING\n  // ========================================\n\n  const loadConversations = async () => {\n    try {\n      setLoading(true);\n\n      // Mock data - would call API in production\n      const mockConversations: Conversation[] = [\n        {\n          conversationId: 'conv_1',\n          participants: ['patient_123', 'provider_456'],\n          conversationType: 'patient_provider',\n          lastMessage: {\n            content: 'Your lab results are ready for review',\n            timestamp: new Date(Date.now() - 1000 * 60 * 30),\n            senderId: 'provider_456'\n          },\n          unreadCount: 2,\n          participantInfo: [\n            {\n              userId: 'provider_456',\n              name: 'Dr. Sarah Chen',\n              role: 'provider',\n              specialty: 'Primary Care',\n              avatar: 'https://i.pravatar.cc/150?img=47'\n            }\n          ]\n        },\n        {\n          conversationId: 'conv_2',\n          participants: ['patient_123', 'provider_789'],\n          conversationType: 'patient_provider',\n          lastMessage: {\n            content: 'How are you feeling after the medication change?',\n            timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2),\n            senderId: 'provider_789'\n          },\n          unreadCount: 0,\n          participantInfo: [\n            {\n              userId: 'provider_789',\n              name: 'Dr. Michael Rodriguez',\n              role: 'provider',\n              specialty: 'Cardiology',\n              avatar: 'https://i.pravatar.cc/150?img=12'\n            }\n          ]\n        },\n        {\n          conversationId: 'conv_3',\n          participants: ['patient_123', 'nurse_101'],\n          conversationType: 'patient_provider',\n          lastMessage: {\n            content: 'Your appointment is confirmed for tomorrow at 2 PM',\n            timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24),\n            senderId: 'nurse_101'\n          },\n          unreadCount: 0,\n          participantInfo: [\n            {\n              userId: 'nurse_101',\n              name: 'Nurse Emma Wilson',\n              role: 'nurse',\n              avatar: 'https://i.pravatar.cc/150?img=32'\n            }\n          ]\n        }\n      ];\n\n      setConversations(mockConversations);\n    } catch (error: any) {\n      Alert.alert('Error', `Failed to load conversations: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadMessages = async (conversationId: string) => {\n    try {\n      setLoading(true);\n\n      // Mock messages - would call API in production\n      const mockMessages: Message[] = [\n        {\n          messageId: 'msg_1',\n          conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'Hello! I reviewed your recent blood work.',\n          timestamp: new Date(Date.now() - 1000 * 60 * 60),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        },\n        {\n          messageId: 'msg_2',\n          conversationId,\n          senderId: 'patient_123',\n          recipientId: 'provider_456',\n          content: 'Thank you, Doctor! How does everything look?',\n          timestamp: new Date(Date.now() - 1000 * 60 * 45),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        },\n        {\n          messageId: 'msg_3',\n          conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'Your cholesterol levels have improved significantly! The medication is working well. Keep up the great work with diet and exercise.',\n          timestamp: new Date(Date.now() - 1000 * 60 * 40),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        },\n        {\n          messageId: 'msg_4',\n          conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'I\\'ve attached your detailed lab results for your records.',\n          timestamp: new Date(Date.now() - 1000 * 60 * 35),\n          messageType: 'document',\n          priority: 'normal',\n          deleted: false,\n          attachments: [\n            {\n              attachmentId: 'att_1',\n              fileName: 'Lab_Results_2025_01.pdf',\n              fileType: 'application/pdf',\n              fileSize: 245000,\n              encryptedUrl: 'https://s3.amazonaws.com/medimind/...',\n              uploadedAt: new Date()\n            }\n          ],\n          readAt: new Date()\n        },\n        {\n          messageId: 'msg_5',\n          conversationId,\n          senderId: 'patient_123',\n          recipientId: 'provider_456',\n          content: 'That\\'s wonderful news! Should I continue the same dosage?',\n          timestamp: new Date(Date.now() - 1000 * 60 * 32),\n          messageType: 'text',\n          priority: 'normal',\n          deleted: false,\n          readAt: new Date()\n        },\n        {\n          messageId: 'msg_6',\n          conversationId,\n          senderId: 'provider_456',\n          recipientId: 'patient_123',\n          content: 'Your lab results are ready for review',\n          timestamp: new Date(Date.now() - 1000 * 60 * 30),\n          messageType: 'text',\n          priority: 'urgent',\n          deleted: false\n        }\n      ];\n\n      setMessages(mockMessages);\n\n      // Mark unread messages as read\n      await markConversationAsRead(conversationId);\n\n      // Scroll to bottom\n      setTimeout(() => {\n        scrollViewRef.current?.scrollToEnd({ animated: true });\n      }, 100);\n    } catch (error: any) {\n      Alert.alert('Error', `Failed to load messages: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const markConversationAsRead = async (conversationId: string) => {\n    // Update unread count\n    setConversations(prev =>\n      prev.map(conv =>\n        conv.conversationId === conversationId\n          ? { ...conv, unreadCount: 0 }\n          : conv\n      )\n    );\n  };\n\n  // ========================================\n  // MESSAGE ACTIONS\n  // ========================================\n\n  const sendMessage = async () => {\n    if (!messageText.trim() && attachments.length === 0) return;\n    if (!currentConversation) return;\n\n    try {\n      setSending(true);\n\n      const newMessage: Message = {\n        messageId: `msg_${Date.now()}`,\n        conversationId: currentConversation.conversationId,\n        senderId: currentUserId,\n        recipientId: currentConversation.participants.find(p => p !== currentUserId) || '',\n        content: messageText.trim(),\n        timestamp: new Date(),\n        messageType: attachments.length > 0 ? 'document' : 'text',\n        priority: 'normal',\n        deleted: false,\n        attachments: attachments.length > 0 ? attachments : undefined\n      };\n\n      // Optimistically add message\n      setMessages(prev => [...prev, newMessage]);\n      setMessageText('');\n      setAttachments([]);\n\n      // Scroll to bottom\n      setTimeout(() => {\n        scrollViewRef.current?.scrollToEnd({ animated: true });\n      }, 100);\n\n      // Send to backend\n      // await secureMessagingService.sendMessage({...});\n\n    } catch (error: any) {\n      Alert.alert('Error', `Failed to send message: ${error.message}`);\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const handleAttachment = async () => {\n    if (Platform.OS === 'web') {\n      Alert.alert('Not Available', 'File attachments are only available on mobile devices.');\n      return;\n    }\n\n    Alert.alert(\n      'Add Attachment',\n      'Choose attachment type',\n      [\n        {\n          text: 'Document',\n          onPress: async () => {\n            const result = await DocumentPicker.getDocumentAsync({\n              type: '*/*',\n              copyToCacheDirectory: true\n            });\n\n            if (!result.canceled && result.assets && result.assets.length > 0) {\n              const file = result.assets[0];\n              setAttachments(prev => [...prev, {\n                attachmentId: `att_${Date.now()}`,\n                fileName: file.name,\n                fileType: file.mimeType || 'application/octet-stream',\n                fileSize: file.size || 0,\n                uri: file.uri,\n                uploadedAt: new Date()\n              }]);\n            }\n          }\n        },\n        {\n          text: 'Photo',\n          onPress: async () => {\n            const result = await ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              quality: 0.8\n            });\n\n            if (!result.canceled && result.assets[0]) {\n              setAttachments(prev => [...prev, {\n                attachmentId: `att_${Date.now()}`,\n                fileName: `image_${Date.now()}.jpg`,\n                fileType: 'image/jpeg',\n                fileSize: 0,\n                uri: result.assets[0].uri,\n                uploadedAt: new Date()\n              }]);\n            }\n          }\n        },\n        { text: 'Cancel', style: 'cancel' }\n      ]\n    );\n  };\n\n  const removeAttachment = (attachmentId: string) => {\n    setAttachments(prev => prev.filter(a => a.attachmentId !== attachmentId));\n  };\n\n  const openConversation = (conversation: Conversation) => {\n    setCurrentConversation(conversation);\n    setView('chat');\n  };\n\n  const backToList = () => {\n    setView('list');\n    setCurrentConversation(null);\n    setMessages([]);\n    setMessageText('');\n    setAttachments([]);\n  };\n\n  // ========================================\n  // RENDER HELPERS\n  // ========================================\n\n  const formatTimestamp = (date: Date) => {\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const minutes = Math.floor(diff / (1000 * 60));\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    if (days === 1) return 'Yesterday';\n    if (days < 7) return `${days}d ago`;\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n  };\n\n  const formatMessageTime = (date: Date) => {\n    return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });\n  };\n\n  const getFileIcon = (fileType: string) => {\n    if (fileType.includes('pdf')) return 'document-text';\n    if (fileType.includes('image')) return 'image';\n    if (fileType.includes('video')) return 'videocam';\n    return 'document';\n  };\n\n  const renderConversationItem = ({ item }: { item: Conversation }) => {\n    const otherParticipant = item.participantInfo[0];\n\n    return (\n      <TouchableOpacity\n        style={styles.conversationItem}\n        onPress={() => openConversation(item)}\n      >\n        <View style={styles.avatarContainer}>\n          {otherParticipant.avatar ? (\n            <Image source={{ uri: otherParticipant.avatar }} style={styles.avatar} />\n          ) : (\n            <View style={[styles.avatar, styles.avatarPlaceholder]}>\n              <Ionicons name=\"person\" size={24} color=\"#fff\" />\n            </View>\n          )}\n          {item.unreadCount > 0 && (\n            <View style={styles.unreadBadge}>\n              <Text style={styles.unreadBadgeText}>{item.unreadCount}</Text>\n            </View>\n          )}\n        </View>\n\n        <View style={styles.conversationInfo}>\n          <View style={styles.conversationHeader}>\n            <Text style={styles.conversationName}>{otherParticipant.name}</Text>\n            <Text style={styles.conversationTime}>\n              {item.lastMessage ? formatTimestamp(item.lastMessage.timestamp) : ''}\n            </Text>\n          </View>\n\n          {otherParticipant.specialty && (\n            <Text style={styles.conversationSpecialty}>{otherParticipant.specialty}</Text>\n          )}\n\n          {item.lastMessage && (\n            <Text\n              style={[\n                styles.lastMessage,\n                item.unreadCount > 0 && styles.lastMessageUnread\n              ]}\n              numberOfLines={1}\n            >\n              {item.lastMessage.senderId === currentUserId ? 'You: ' : ''}\n              {item.lastMessage.content}\n            </Text>\n          )}\n        </View>\n\n        <Ionicons name=\"chevron-forward\" size={20} color=\"#999\" />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderMessage = ({ item }: { item: Message }) => {\n    const isOwnMessage = item.senderId === currentUserId;\n    const isExpiringSoon = item.expiresAt && (item.expiresAt.getTime() - Date.now()) < 1000 * 60 * 60 * 24;\n\n    return (\n      <View\n        style={[\n          styles.messageContainer,\n          isOwnMessage ? styles.ownMessageContainer : styles.otherMessageContainer\n        ]}\n      >\n        <View\n          style={[\n            styles.messageBubble,\n            isOwnMessage ? styles.ownMessageBubble : styles.otherMessageBubble,\n            item.priority === 'urgent' && styles.urgentMessage,\n            item.priority === 'critical' && styles.criticalMessage\n          ]}\n        >\n          {item.priority !== 'normal' && (\n            <View style={styles.priorityBadge}>\n              <Ionicons\n                name={item.priority === 'urgent' ? 'warning' : 'alert-circle'}\n                size={14}\n                color=\"#fff\"\n              />\n              <Text style={styles.priorityText}>{item.priority.toUpperCase()}</Text>\n            </View>\n          )}\n\n          <Text style={[styles.messageText, isOwnMessage ? styles.ownMessageText : styles.otherMessageText]}>\n            {item.content}\n          </Text>\n\n          {item.attachments && item.attachments.length > 0 && (\n            <View style={styles.attachmentsContainer}>\n              {item.attachments.map(attachment => (\n                <TouchableOpacity\n                  key={attachment.attachmentId}\n                  style={styles.attachmentItem}\n                >\n                  <Ionicons name={getFileIcon(attachment.fileType) as any} size={24} color=\"#2563eb\" />\n                  <View style={styles.attachmentInfo}>\n                    <Text style={styles.attachmentName} numberOfLines={1}>\n                      {attachment.fileName}\n                    </Text>\n                    <Text style={styles.attachmentSize}>\n                      {(attachment.fileSize / 1024).toFixed(1)} KB\n                    </Text>\n                  </View>\n                  <Ionicons name=\"download\" size={20} color=\"#2563eb\" />\n                </TouchableOpacity>\n              ))}\n            </View>\n          )}\n\n          <View style={styles.messageFooter}>\n            <Text style={styles.messageTime}>{formatMessageTime(item.timestamp)}</Text>\n            {isOwnMessage && item.readAt && (\n              <Ionicons name=\"checkmark-done\" size={16} color=\"#2563eb\" />\n            )}\n            {isOwnMessage && !item.readAt && (\n              <Ionicons name=\"checkmark\" size={16} color=\"#999\" />\n            )}\n            {isExpiringSoon && (\n              <Ionicons name=\"time\" size={14} color=\"#f59e0b\" style={{ marginLeft: 4 }} />\n            )}\n          </View>\n        </View>\n      </View>\n    );\n  };\n\n  const renderConversationsList = () => (\n    <View style={styles.container}>\n      <LinearGradient colors={theme.gradients.primary.colors} style={styles.header}>\n        <View style={styles.headerContent}>\n          <TouchableOpacity onPress={() => navigation.goBack()} style={styles.backButton}>\n            <Ionicons name=\"arrow-back\" size={24} color=\"#fff\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Secure Messages</Text>\n          <TouchableOpacity onPress={() => setShowSearch(!showSearch)}>\n            <Ionicons name=\"search\" size={24} color=\"#fff\" />\n          </TouchableOpacity>\n        </View>\n\n        {showSearch && (\n          <View style={styles.searchContainer}>\n            <Ionicons name=\"search\" size={20} color=\"#999\" style={styles.searchIcon} />\n            <TextInput\n              style={styles.searchInput}\n              placeholder=\"Search messages...\"\n              placeholderTextColor=\"#999\"\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n            />\n          </View>\n        )}\n      </LinearGradient>\n\n      <View style={styles.encryptionBanner}>\n        <Ionicons name=\"lock-closed\" size={16} color=\"#10b981\" />\n        <Text style={styles.encryptionText}>\n          End-to-end encrypted  HIPAA compliant\n        </Text>\n      </View>\n\n      {loading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color=\"#2563eb\" />\n        </View>\n      ) : (\n        <FlatList\n          data={conversations}\n          renderItem={renderConversationItem}\n          keyExtractor={item => item.conversationId}\n          contentContainerStyle={styles.conversationsList}\n        />\n      )}\n    </View>\n  );\n\n  const renderChatView = () => {\n    if (!currentConversation) return null;\n\n    const otherParticipant = currentConversation.participantInfo[0];\n\n    return (\n      <KeyboardAvoidingView\n        style={styles.container}\n        behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n        keyboardVerticalOffset={Platform.OS === 'ios' ? 0 : 0}\n      >\n        <LinearGradient colors={theme.gradients.primary.colors} style={styles.chatHeader}>\n          <View style={styles.chatHeaderContent}>\n            <TouchableOpacity onPress={backToList} style={styles.backButton}>\n              <Ionicons name=\"arrow-back\" size={24} color=\"#fff\" />\n            </TouchableOpacity>\n\n            <View style={styles.chatHeaderInfo}>\n              {otherParticipant.avatar ? (\n                <Image source={{ uri: otherParticipant.avatar }} style={styles.chatAvatar} />\n              ) : (\n                <View style={[styles.chatAvatar, styles.avatarPlaceholder]}>\n                  <Ionicons name=\"person\" size={20} color=\"#fff\" />\n                </View>\n              )}\n              <View>\n                <Text style={styles.chatHeaderName}>{otherParticipant.name}</Text>\n                {otherParticipant.specialty && (\n                  <Text style={styles.chatHeaderSpecialty}>{otherParticipant.specialty}</Text>\n                )}\n              </View>\n            </View>\n\n            <TouchableOpacity>\n              <Ionicons name=\"ellipsis-vertical\" size={24} color=\"#fff\" />\n            </TouchableOpacity>\n          </View>\n        </LinearGradient>\n\n        <ScrollView\n          ref={scrollViewRef}\n          style={styles.messagesContainer}\n          contentContainerStyle={styles.messagesContent}\n        >\n          {loading ? (\n            <View style={styles.loadingContainer}>\n              <ActivityIndicator size=\"large\" color=\"#2563eb\" />\n            </View>\n          ) : (\n            <>\n              {messages.map(message => (\n                <View key={message.messageId}>\n                  {renderMessage({ item: message })}\n                </View>\n              ))}\n            </>\n          )}\n        </ScrollView>\n\n        {attachments.length > 0 && (\n          <View style={styles.composerAttachments}>\n            {attachments.map(attachment => (\n              <View key={attachment.attachmentId} style={styles.composerAttachmentItem}>\n                <Ionicons name={getFileIcon(attachment.fileType) as any} size={20} color=\"#2563eb\" />\n                <Text style={styles.composerAttachmentName} numberOfLines={1}>\n                  {attachment.fileName}\n                </Text>\n                <TouchableOpacity onPress={() => removeAttachment(attachment.attachmentId)}>\n                  <Ionicons name=\"close-circle\" size={20} color=\"#ef4444\" />\n                </TouchableOpacity>\n              </View>\n            ))}\n          </View>\n        )}\n\n        <View style={styles.inputContainer}>\n          <TouchableOpacity style={styles.attachButton} onPress={handleAttachment}>\n            <Ionicons name=\"attach\" size={24} color=\"#2563eb\" />\n          </TouchableOpacity>\n\n          <TextInput\n            style={styles.input}\n            placeholder=\"Type a message...\"\n            placeholderTextColor=\"#999\"\n            value={messageText}\n            onChangeText={setMessageText}\n            multiline\n            maxLength={2000}\n          />\n\n          <TouchableOpacity\n            style={[styles.sendButton, (!messageText.trim() && attachments.length === 0) && styles.sendButtonDisabled]}\n            onPress={sendMessage}\n            disabled={!messageText.trim() && attachments.length === 0}\n          >\n            {sending ? (\n              <ActivityIndicator size=\"small\" color=\"#fff\" />\n            ) : (\n              <Ionicons name=\"send\" size={20} color=\"#fff\" />\n            )}\n          </TouchableOpacity>\n        </View>\n      </KeyboardAvoidingView>\n    );\n  };\n\n  return view === 'list' ? renderConversationsList() : renderChatView();\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8fafc',\n  },\n  header: {\n    paddingTop: 60,\n    paddingBottom: 20,\n    paddingHorizontal: 20,\n  },\n  headerContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  backButton: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#fff',\n    flex: 1,\n    marginLeft: 16,\n  },\n  searchContainer: {\n    marginTop: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255,255,255,0.2)',\n    borderRadius: 12,\n    paddingHorizontal: 12,\n  },\n  searchIcon: {\n    marginRight: 8,\n  },\n  searchInput: {\n    flex: 1,\n    paddingVertical: 12,\n    color: '#fff',\n    fontSize: 16,\n  },\n  encryptionBanner: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 8,\n    backgroundColor: '#ecfdf5',\n    borderBottomWidth: 1,\n    borderBottomColor: '#d1fae5',\n  },\n  encryptionText: {\n    marginLeft: 8,\n    fontSize: 12,\n    color: '#059669',\n    fontWeight: '600',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 40,\n  },\n  conversationsList: {\n    paddingVertical: 8,\n  },\n  conversationItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 16,\n    paddingHorizontal: 20,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e2e8f0',\n  },\n  avatarContainer: {\n    position: 'relative',\n  },\n  avatar: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n  },\n  avatarPlaceholder: {\n    backgroundColor: '#94a3b8',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  unreadBadge: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    backgroundColor: '#ef4444',\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 6,\n  },\n  unreadBadgeText: {\n    color: '#fff',\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  conversationInfo: {\n    flex: 1,\n    marginLeft: 16,\n  },\n  conversationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  conversationName: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#1e293b',\n  },\n  conversationTime: {\n    fontSize: 12,\n    color: '#64748b',\n  },\n  conversationSpecialty: {\n    fontSize: 13,\n    color: '#2563eb',\n    marginBottom: 4,\n  },\n  lastMessage: {\n    fontSize: 14,\n    color: '#64748b',\n  },\n  lastMessageUnread: {\n    fontWeight: '600',\n    color: '#1e293b',\n  },\n  chatHeader: {\n    paddingTop: 60,\n    paddingBottom: 16,\n    paddingHorizontal: 20,\n  },\n  chatHeaderContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  chatHeaderInfo: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginLeft: 16,\n  },\n  chatAvatar: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 12,\n  },\n  chatHeaderName: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#fff',\n  },\n  chatHeaderSpecialty: {\n    fontSize: 12,\n    color: 'rgba(255,255,255,0.8)',\n  },\n  messagesContainer: {\n    flex: 1,\n    backgroundColor: '#f8fafc',\n  },\n  messagesContent: {\n    paddingVertical: 16,\n  },\n  messageContainer: {\n    marginBottom: 12,\n    paddingHorizontal: 16,\n  },\n  ownMessageContainer: {\n    alignItems: 'flex-end',\n  },\n  otherMessageContainer: {\n    alignItems: 'flex-start',\n  },\n  messageBubble: {\n    maxWidth: '80%',\n    borderRadius: 16,\n    padding: 12,\n  },\n  ownMessageBubble: {\n    backgroundColor: '#2563eb',\n  },\n  otherMessageBubble: {\n    backgroundColor: '#fff',\n    borderWidth: 1,\n    borderColor: '#e2e8f0',\n  },\n  urgentMessage: {\n    borderColor: '#f59e0b',\n    borderWidth: 2,\n  },\n  criticalMessage: {\n    borderColor: '#ef4444',\n    borderWidth: 2,\n  },\n  priorityBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.1)',\n    borderRadius: 8,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    marginBottom: 8,\n  },\n  priorityText: {\n    fontSize: 10,\n    fontWeight: 'bold',\n    color: '#fff',\n    marginLeft: 4,\n  },\n  messageText: {\n    fontSize: 15,\n    lineHeight: 20,\n  },\n  ownMessageText: {\n    color: '#fff',\n  },\n  otherMessageText: {\n    color: '#1e293b',\n  },\n  attachmentsContainer: {\n    marginTop: 8,\n  },\n  attachmentItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderRadius: 8,\n    padding: 8,\n    marginBottom: 4,\n  },\n  attachmentInfo: {\n    flex: 1,\n    marginLeft: 8,\n  },\n  attachmentName: {\n    fontSize: 13,\n    fontWeight: '500',\n    color: '#1e293b',\n  },\n  attachmentSize: {\n    fontSize: 11,\n    color: '#64748b',\n    marginTop: 2,\n  },\n  messageFooter: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 4,\n  },\n  messageTime: {\n    fontSize: 11,\n    color: 'rgba(0,0,0,0.4)',\n    marginRight: 4,\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#e2e8f0',\n  },\n  attachButton: {\n    padding: 8,\n    marginRight: 8,\n  },\n  input: {\n    flex: 1,\n    maxHeight: 100,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#f1f5f9',\n    borderRadius: 20,\n    fontSize: 15,\n    color: '#1e293b',\n  },\n  sendButton: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    backgroundColor: '#2563eb',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8,\n  },\n  sendButtonDisabled: {\n    opacity: 0.5,\n  },\n  composerAttachments: {\n    paddingHorizontal: 16,\n    paddingTop: 12,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#e2e8f0',\n  },\n  composerAttachmentItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f1f5f9',\n    borderRadius: 8,\n    padding: 8,\n    marginBottom: 8,\n  },\n  composerAttachmentName: {\n    flex: 1,\n    fontSize: 13,\n    color: '#1e293b',\n    marginLeft: 8,\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}