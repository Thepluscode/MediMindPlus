{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { mlApiService } from \"./apiService\";\nvar PredictionService = function () {\n  function PredictionService() {\n    _classCallCheck(this, PredictionService);\n  }\n  return _createClass(PredictionService, [{\n    key: \"getPredictions\",\n    value: (function () {\n      var _getPredictions = _asyncToGenerator(function* () {\n        try {\n          var realPrediction = yield this.getRealMLPredictions();\n          if (realPrediction) {\n            return realPrediction;\n          }\n          var mockPrediction = {\n            id: 'demo-prediction-123',\n            userId: 'demo-user-123',\n            predictions: [{\n              condition: 'Cardiovascular Disease',\n              probability: 0.15,\n              confidence: 0.85,\n              riskLevel: 'low'\n            }, {\n              condition: 'Diabetes Type 2',\n              probability: 0.08,\n              confidence: 0.78,\n              riskLevel: 'low'\n            }, {\n              condition: 'Hypertension',\n              probability: 0.22,\n              confidence: 0.82,\n              riskLevel: 'medium'\n            }],\n            riskFactors: ['age', 'lifestyle'],\n            recommendations: ['Regular exercise', 'Balanced diet', 'Regular checkups'],\n            timestamp: new Date().toISOString(),\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString()\n          };\n          return mockPrediction;\n        } catch (error) {\n          console.error('Error getting predictions:', error);\n          throw error;\n        }\n      });\n      function getPredictions() {\n        return _getPredictions.apply(this, arguments);\n      }\n      return getPredictions;\n    }())\n  }, {\n    key: \"getRealMLPredictions\",\n    value: (function () {\n      var _getRealMLPredictions = _asyncToGenerator(function* () {\n        try {\n          var response = yield fetch('http://localhost:8001/predict', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              user_id: 'demo-user-123',\n              age: 35,\n              gender: 'male',\n              symptoms: ['fatigue', 'headache'],\n              vital_signs: {\n                heart_rate: 72,\n                blood_pressure_systolic: 120,\n                blood_pressure_diastolic: 80\n              }\n            })\n          });\n          if (response.ok) {\n            var data = yield response.json();\n            var aiPrediction = {\n              id: `ml-prediction-${Date.now()}`,\n              userId: 'demo-user-123',\n              predictions: Object.entries(data.predictions).map(function (_ref) {\n                var _ref2 = _slicedToArray(_ref, 2),\n                  condition = _ref2[0],\n                  score = _ref2[1];\n                return {\n                  condition: condition,\n                  probability: score,\n                  confidence: 0.85,\n                  riskLevel: score > 0.5 ? 'high' : score > 0.3 ? 'medium' : 'low'\n                };\n              }),\n              riskFactors: data.feature_importance ? Object.keys(data.feature_importance).slice(0, 3) : [],\n              recommendations: data.recommendations || ['Consult with healthcare provider'],\n              timestamp: new Date().toISOString(),\n              createdAt: new Date().toISOString(),\n              updatedAt: new Date().toISOString()\n            };\n            return aiPrediction;\n          }\n          return null;\n        } catch (error) {\n          console.log('ML service not available, using mock data');\n          return null;\n        }\n      });\n      function getRealMLPredictions() {\n        return _getRealMLPredictions.apply(this, arguments);\n      }\n      return getRealMLPredictions;\n    }())\n  }, {\n    key: \"analyzeVoice\",\n    value: (function () {\n      var _analyzeVoice = _asyncToGenerator(function* (voiceData) {\n        try {\n          var formData = new FormData();\n          formData.append('audio', {\n            uri: voiceData.audioUri,\n            type: voiceData.mimeType || 'audio/m4a',\n            name: 'voice_recording.m4a'\n          });\n          if (voiceData.metadata) {\n            formData.append('metadata', JSON.stringify(voiceData.metadata));\n          }\n          var response = yield mlApiService.post('/analyze-voice', formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          return response.data;\n        } catch (error) {\n          console.error('Error analyzing voice:', error);\n          throw error;\n        }\n      });\n      function analyzeVoice(_x) {\n        return _analyzeVoice.apply(this, arguments);\n      }\n      return analyzeVoice;\n    }())\n  }, {\n    key: \"getRiskFactors\",\n    value: (function () {\n      var _getRiskFactors = _asyncToGenerator(function* () {\n        try {\n          var response = yield mlApiService.get('/predict');\n          return response.data.riskFactors;\n        } catch (error) {\n          console.error('Error getting risk factors:', error);\n          throw error;\n        }\n      });\n      function getRiskFactors() {\n        return _getRiskFactors.apply(this, arguments);\n      }\n      return getRiskFactors;\n    }())\n  }, {\n    key: \"getRecommendations\",\n    value: (function () {\n      var _getRecommendations = _asyncToGenerator(function* (riskProfile) {\n        try {\n          var response = yield mlApiService.post('/explain', {\n            riskProfile: riskProfile\n          });\n          return response.data.recommendations;\n        } catch (error) {\n          console.error('Error getting recommendations:', error);\n          throw error;\n        }\n      });\n      function getRecommendations(_x2) {\n        return _getRecommendations.apply(this, arguments);\n      }\n      return getRecommendations;\n    }())\n  }]);\n}();\nexport var predictionService = new PredictionService();","map":{"version":3,"names":["mlApiService","PredictionService","_classCallCheck","_createClass","key","value","_getPredictions","_asyncToGenerator","realPrediction","getRealMLPredictions","mockPrediction","id","userId","predictions","condition","probability","confidence","riskLevel","riskFactors","recommendations","timestamp","Date","toISOString","createdAt","updatedAt","error","console","getPredictions","apply","arguments","_getRealMLPredictions","response","fetch","method","headers","body","JSON","stringify","user_id","age","gender","symptoms","vital_signs","heart_rate","blood_pressure_systolic","blood_pressure_diastolic","ok","data","json","aiPrediction","now","Object","entries","map","_ref","_ref2","_slicedToArray","score","feature_importance","keys","slice","log","_analyzeVoice","voiceData","formData","FormData","append","uri","audioUri","type","mimeType","name","metadata","post","analyzeVoice","_x","_getRiskFactors","get","getRiskFactors","_getRecommendations","riskProfile","getRecommendations","_x2","predictionService"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/src/services/predictionService.ts"],"sourcesContent":["import { mlApiService } from './apiService';\nimport { AIPrediction } from '../types/models/ai';\n\ninterface VoiceAnalysisRequest {\n  audioUri: string;\n  mimeType?: string;\n  duration?: number;\n  sampleRate?: number;\n  metadata?: Record<string, unknown>;\n}\n\ninterface VoiceAnalysisResponse {\n  transcription: string;\n  sentiment: {\n    score: number;\n    label: 'positive' | 'negative' | 'neutral';\n  };\n  healthIndicators: {\n    symptomMentions: Array<{\n      symptom: string;\n      context: string;\n      confidence: number;\n    }>;\n    potentialConditions: Array<{\n      condition: string;\n      confidence: number;\n      severity: 'low' | 'medium' | 'high';\n    }>;\n  };\n  timestamp: string;\n}\n\ninterface RiskFactor {\n  id: string;\n  name: string;\n  category: 'lifestyle' | 'genetic' | 'environmental' | 'medical_history';\n  description: string;\n  severity: 'low' | 'medium' | 'high';\n  isModifiable: boolean;\n  relevanceScore: number;\n}\n\ninterface Recommendation {\n  id: string;\n  title: string;\n  description: string;\n  category: 'diet' | 'exercise' | 'lifestyle' | 'medical' | 'monitoring';\n  priority: 'low' | 'medium' | 'high';\n  estimatedBenefit: number;\n  timeToImplement: number; // in minutes\n  resources?: Array<{\n    title: string;\n    url: string;\n    type: 'article' | 'video' | 'app' | 'professional';\n  }>;\n}\n\nclass PredictionService {\n  /**\n   * Get AI predictions based on user's health data\n   */\n  async getPredictions(): Promise<AIPrediction> {\n    try {\n      // Try to get real predictions from ML service\n      const realPrediction = await this.getRealMLPredictions();\n      if (realPrediction) {\n        return realPrediction;\n      }\n\n      // Fallback to mock data\n      const mockPrediction: AIPrediction = {\n        id: 'demo-prediction-123',\n        userId: 'demo-user-123',\n        predictions: [\n          {\n            condition: 'Cardiovascular Disease',\n            probability: 0.15,\n            confidence: 0.85,\n            riskLevel: 'low'\n          },\n          {\n            condition: 'Diabetes Type 2',\n            probability: 0.08,\n            confidence: 0.78,\n            riskLevel: 'low'\n          },\n          {\n            condition: 'Hypertension',\n            probability: 0.22,\n            confidence: 0.82,\n            riskLevel: 'medium'\n          }\n        ],\n        riskFactors: ['age', 'lifestyle'],\n        recommendations: ['Regular exercise', 'Balanced diet', 'Regular checkups'],\n        timestamp: new Date().toISOString(),\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      };\n      return mockPrediction;\n    } catch (error) {\n      console.error('Error getting predictions:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get real predictions from ML service (port 8001)\n   */\n  async getRealMLPredictions(): Promise<AIPrediction | null> {\n    try {\n      const response = await fetch('http://localhost:8001/predict', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          user_id: 'demo-user-123',\n          age: 35,\n          gender: 'male',\n          symptoms: ['fatigue', 'headache'],\n          vital_signs: {\n            heart_rate: 72,\n            blood_pressure_systolic: 120,\n            blood_pressure_diastolic: 80\n          }\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        // Convert ML service response to AIPrediction format\n        const aiPrediction: AIPrediction = {\n          id: `ml-prediction-${Date.now()}`,\n          userId: 'demo-user-123',\n          predictions: Object.entries(data.predictions).map(([condition, score]) => ({\n            condition,\n            probability: score as number,\n            confidence: 0.85,\n            riskLevel: (score as number) > 0.5 ? 'high' : (score as number) > 0.3 ? 'medium' : 'low'\n          })),\n          riskFactors: data.feature_importance ? Object.keys(data.feature_importance).slice(0, 3) : [],\n          recommendations: data.recommendations || ['Consult with healthcare provider'],\n          timestamp: new Date().toISOString(),\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        };\n        return aiPrediction;\n      }\n      return null;\n    } catch (error) {\n      console.log('ML service not available, using mock data');\n      return null;\n    }\n  }\n\n  /**\n   * Analyze voice recording for health indicators\n   */\n  async analyzeVoice(voiceData: VoiceAnalysisRequest): Promise<VoiceAnalysisResponse> {\n    try {\n      const formData = new FormData();\n      formData.append('audio', {\n        uri: voiceData.audioUri,\n        type: voiceData.mimeType || 'audio/m4a',\n        name: 'voice_recording.m4a',\n      } as unknown as Blob);\n\n      if (voiceData.metadata) {\n        formData.append('metadata', JSON.stringify(voiceData.metadata));\n      }\n\n      const response = await mlApiService.post<VoiceAnalysisResponse>(\n        '/analyze-voice',\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n      return response.data;\n    } catch (error) {\n      console.error('Error analyzing voice:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get identified risk factors for the user\n   */\n  async getRiskFactors(): Promise<RiskFactor[]> {\n    try {\n      const response = await mlApiService.get<{ riskFactors: RiskFactor[] }>('/predict');\n      return response.data.riskFactors;\n    } catch (error) {\n      console.error('Error getting risk factors:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get personalized recommendations based on risk profile\n   */\n  async getRecommendations(riskProfile: Record<string, unknown>): Promise<Recommendation[]> {\n    try {\n      const response = await mlApiService.post<{ recommendations: Recommendation[] }>(\n        '/explain',\n        { riskProfile }\n      );\n      return response.data.recommendations;\n    } catch (error) {\n      console.error('Error getting recommendations:', error);\n      throw error;\n    }\n  }\n}\n\nexport const predictionService = new PredictionService();\n\nexport type { \n  VoiceAnalysisRequest, \n  VoiceAnalysisResponse, \n  RiskFactor, \n  Recommendation \n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}