{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useApplePay = useApplePay;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = require(\"react\");\nvar _useStripe2 = require(\"./useStripe\");\nvar _reactNative = require(\"react-native-web/dist/index\");\nvar SET_SHIPPING_METHOD_CALLBACK_NAME = 'onDidSetShippingMethod';\nvar SET_SHIPPING_CONTACT_CALLBACK_NAME = 'onDidSetShippingContact';\nfunction useApplePay() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    onShippingMethodSelected = _ref.onShippingMethodSelected,\n    onShippingContactSelected = _ref.onShippingContactSelected;\n  var _useStripe = (0, _useStripe2.useStripe)(),\n    isApplePaySupported = _useStripe.isApplePaySupported,\n    _presentApplePay = _useStripe.presentApplePay,\n    _confirmApplePayPayment = _useStripe.confirmApplePayPayment,\n    updateApplePaySummaryItems = _useStripe.updateApplePaySummaryItems,\n    _openApplePaySetup = _useStripe.openApplePaySetup;\n  var _useState = (0, _react.useState)(null),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    items = _useState2[0],\n    setItems = _useState2[1];\n  var _useState3 = (0, _react.useState)(false),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var onDidSetShippingMethod = (0, _react.useCallback)(function (result) {\n    if (onShippingMethodSelected) {\n      onShippingMethodSelected(result.shippingMethod, updateApplePaySummaryItems);\n    } else {\n      updateApplePaySummaryItems(items);\n    }\n  }, [items, onShippingMethodSelected, updateApplePaySummaryItems]);\n  var onDidSetShippingContact = (0, _react.useCallback)(function (result) {\n    if (onShippingContactSelected) {\n      onShippingContactSelected(result.shippingContact, updateApplePaySummaryItems);\n    } else {\n      updateApplePaySummaryItems(items);\n    }\n  }, [items, onShippingContactSelected, updateApplePaySummaryItems]);\n  (0, _react.useEffect)(function () {\n    var eventEmitter = new _reactNative.NativeEventEmitter(_reactNative.NativeModules.StripeSdk);\n    var didSetShippingMethodListener = eventEmitter.addListener(SET_SHIPPING_METHOD_CALLBACK_NAME, onDidSetShippingMethod);\n    var didSetShippingContactListener = eventEmitter.addListener(SET_SHIPPING_CONTACT_CALLBACK_NAME, onDidSetShippingContact);\n    return function () {\n      didSetShippingMethodListener.remove();\n      didSetShippingContactListener.remove();\n    };\n  }, [onDidSetShippingContact, onDidSetShippingMethod]);\n  var presentApplePay = (0, _react.useCallback)(function () {\n    var _ref2 = (0, _asyncToGenerator2.default)(function* (params) {\n      setLoading(true);\n      setItems(params.cartItems);\n      var result = yield _presentApplePay(params);\n      if (result.error) {\n        setItems(null);\n      }\n      setLoading(false);\n      return result;\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [_presentApplePay]);\n  var openApplePaySetup = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {\n    setLoading(true);\n    var result = yield _openApplePaySetup();\n    setLoading(false);\n    return result;\n  }), [_openApplePaySetup]);\n  var confirmApplePayPayment = (0, _react.useCallback)(function () {\n    var _ref4 = (0, _asyncToGenerator2.default)(function* (clientSecret) {\n      setLoading(true);\n      var result = yield _confirmApplePayPayment(clientSecret);\n      setItems(null);\n      setLoading(false);\n      return result;\n    });\n    return function (_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }(), [_confirmApplePayPayment]);\n  return {\n    loading: loading,\n    presentApplePay: presentApplePay,\n    confirmApplePayPayment: confirmApplePayPayment,\n    isApplePaySupported: isApplePaySupported,\n    openApplePaySetup: openApplePaySetup\n  };\n}","map":{"version":3,"names":["_react","require","_useStripe2","_reactNative","SET_SHIPPING_METHOD_CALLBACK_NAME","SET_SHIPPING_CONTACT_CALLBACK_NAME","useApplePay","_ref","arguments","length","undefined","onShippingMethodSelected","onShippingContactSelected","_useStripe","useStripe","isApplePaySupported","_presentApplePay","presentApplePay","_confirmApplePayPayment","confirmApplePayPayment","updateApplePaySummaryItems","_openApplePaySetup","openApplePaySetup","_useState","useState","_useState2","_slicedToArray2","default","items","setItems","_useState3","_useState4","loading","setLoading","onDidSetShippingMethod","useCallback","result","shippingMethod","onDidSetShippingContact","shippingContact","useEffect","eventEmitter","NativeEventEmitter","NativeModules","StripeSdk","didSetShippingMethodListener","addListener","didSetShippingContactListener","remove","_ref2","_asyncToGenerator2","params","cartItems","error","_x","apply","_ref4","clientSecret","_x2"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/node_modules/@stripe/stripe-react-native/lib/module/hooks/useApplePay.tsx"],"sourcesContent":["import type { ApplePay, ApplePayError, StripeError } from '../types';\nimport { useCallback, useEffect, useState } from 'react';\nimport { useStripe } from './useStripe';\nimport { NativeEventEmitter, NativeModules } from 'react-native';\n\nexport interface Props {\n  /**\n   *\n   * @example\n   * ```ts\n   * const { presentApplePay } = useApplePay({\n   *  onShippingMethodSelected: (shippingMethod, handler) => {\n   *    handler([\n   *      { label: 'Example item name 1', amount: '11.00' },\n   *      { label: 'Example item name 2', amount: '25.00' },\n   *   ]);\n   *  }\n   * })\n   * ```\n   */\n  onShippingMethodSelected?: (\n    shippingMethod: ApplePay.ShippingMethod,\n    handler: (summaryItems: ApplePay.CartSummaryItem[]) => Promise<{\n      error?: StripeError<ApplePayError>;\n    }>\n  ) => void;\n  /**\n   *\n   * @example\n   * ```ts\n   * const { presentApplePay } = useApplePay({\n   *  onShippingContactSelected: (shippingContact, handler) => {\n   *    handler([\n   *      { label: 'Example item name 1', amount: '11.00' },\n   *      { label: 'Example item name 2', amount: '25.00' },\n   *    ], [\n   *      { field: 'city', message: 'city error' },\n   *    ]);\n   *  }\n   * })\n   * ```\n   */\n  onShippingContactSelected?: (\n    shippingContact: ApplePay.ShippingContact,\n    handler: (\n      summaryItems: ApplePay.CartSummaryItem[],\n      errorAddressFields?: Array<{\n        field: ApplePay.AddressFields;\n        message?: string;\n      }>\n    ) => Promise<{\n      error?: StripeError<ApplePayError>;\n    }>\n  ) => void;\n}\n\nconst SET_SHIPPING_METHOD_CALLBACK_NAME = 'onDidSetShippingMethod';\nconst SET_SHIPPING_CONTACT_CALLBACK_NAME = 'onDidSetShippingContact';\n\n/**\n * useApplePay hook\n */\nexport function useApplePay({\n  onShippingMethodSelected,\n  onShippingContactSelected,\n}: Props = {}) {\n  const {\n    isApplePaySupported,\n    presentApplePay: _presentApplePay,\n    confirmApplePayPayment: _confirmApplePayPayment,\n    updateApplePaySummaryItems,\n    openApplePaySetup: _openApplePaySetup,\n  } = useStripe();\n  const [items, setItems] = useState<ApplePay.CartSummaryItem[] | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const onDidSetShippingMethod = useCallback(\n    (result: { shippingMethod: ApplePay.ShippingMethod }) => {\n      if (onShippingMethodSelected) {\n        onShippingMethodSelected(\n          result.shippingMethod,\n          updateApplePaySummaryItems\n        );\n      } else {\n        updateApplePaySummaryItems(items as ApplePay.CartSummaryItem[]);\n      }\n    },\n    [items, onShippingMethodSelected, updateApplePaySummaryItems]\n  );\n\n  const onDidSetShippingContact = useCallback(\n    (result: { shippingContact: ApplePay.ShippingContact }) => {\n      if (onShippingContactSelected) {\n        onShippingContactSelected(\n          result.shippingContact,\n          updateApplePaySummaryItems\n        );\n      } else {\n        updateApplePaySummaryItems(items as ApplePay.CartSummaryItem[]);\n      }\n    },\n    [items, onShippingContactSelected, updateApplePaySummaryItems]\n  );\n\n  useEffect(() => {\n    const eventEmitter = new NativeEventEmitter(NativeModules.StripeSdk);\n    const didSetShippingMethodListener = eventEmitter.addListener(\n      SET_SHIPPING_METHOD_CALLBACK_NAME,\n      onDidSetShippingMethod\n    );\n    const didSetShippingContactListener = eventEmitter.addListener(\n      SET_SHIPPING_CONTACT_CALLBACK_NAME,\n      onDidSetShippingContact\n    );\n\n    return () => {\n      didSetShippingMethodListener.remove();\n      didSetShippingContactListener.remove();\n    };\n  }, [onDidSetShippingContact, onDidSetShippingMethod]);\n\n  const presentApplePay = useCallback(\n    async (params: ApplePay.PresentParams) => {\n      setLoading(true);\n      setItems(params.cartItems);\n      const result = await _presentApplePay(params);\n      if (result.error) {\n        setItems(null);\n      }\n      setLoading(false);\n      return result;\n    },\n    [_presentApplePay]\n  );\n\n  const openApplePaySetup = useCallback(async () => {\n    setLoading(true);\n    const result = await _openApplePaySetup();\n    setLoading(false);\n    return result;\n  }, [_openApplePaySetup]);\n\n  const confirmApplePayPayment = useCallback(\n    async (clientSecret: string) => {\n      setLoading(true);\n      const result = await _confirmApplePayPayment(clientSecret);\n      setItems(null);\n      setLoading(false);\n      return result;\n    },\n    [_confirmApplePayPayment]\n  );\n\n  return {\n    loading,\n    presentApplePay,\n    confirmApplePayPayment,\n    isApplePaySupported,\n    openApplePaySetup,\n  };\n}\n"],"mappings":";;;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AAqDA,IAAMG,iCAAiC,GAAG,wBAAwB;AAClE,IAAMC,kCAAkC,GAAG,yBAAyB;AAK7D,SAASC,WAAWA,CAAA,EAGZ;EAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAJ,CAAC,CAAC;IAFXG,wBAAwB,GAAAJ,IAAA,CAAxBI,wBAAwB;IACxBC,yBAAyB,GAAAL,IAAA,CAAzBK,yBAAyB;EAEzB,IAAAC,UAAA,GAMI,IAAAX,WAAA,CAAAY,SAAS,GAAE;IALbC,mBAAmB,GAAAF,UAAA,CAAnBE,mBAAmB;IACFC,gBAAgB,GAAAH,UAAA,CAAjCI,eAAe;IACSC,uBAAuB,GAAAL,UAAA,CAA/CM,sBAAsB;IACtBC,0BAA0B,GAAAP,UAAA,CAA1BO,0BAA0B;IACPC,kBAAkB,GAAAR,UAAA,CAArCS,iBAAiB;EAEnB,IAAAC,SAAA,GAA0B,IAAAvB,MAAA,CAAAwB,QAAQ,EAAoC,IAAI,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAAC,OAAA,EAAAJ,SAAA;IAApEK,KAAK,GAAAH,UAAA;IAAEI,QAAQ,GAAAJ,UAAA;EACtB,IAAAK,UAAA,GAA8B,IAAA9B,MAAA,CAAAwB,QAAQ,EAAC,KAAK,CAAC;IAAAO,UAAA,OAAAL,eAAA,CAAAC,OAAA,EAAAG,UAAA;IAAtCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1B,IAAMG,sBAAsB,GAAG,IAAAlC,MAAA,CAAAmC,WAAW,EACxC,UAACC,MAAmD,EAAK;IACvD,IAAIzB,wBAAwB,EAAE;MAC5BA,wBAAwB,CACtByB,MAAM,CAACC,cAAc,EACrBjB,0BAA0B,CAC3B;IACH,CAAC,MAAM;MACLA,0BAA0B,CAACQ,KAAK,CAA+B;IACjE;EACF,CAAC,EACD,CAACA,KAAK,EAAEjB,wBAAwB,EAAES,0BAA0B,CAAC,CAC9D;EAED,IAAMkB,uBAAuB,GAAG,IAAAtC,MAAA,CAAAmC,WAAW,EACzC,UAACC,MAAqD,EAAK;IACzD,IAAIxB,yBAAyB,EAAE;MAC7BA,yBAAyB,CACvBwB,MAAM,CAACG,eAAe,EACtBnB,0BAA0B,CAC3B;IACH,CAAC,MAAM;MACLA,0BAA0B,CAACQ,KAAK,CAA+B;IACjE;EACF,CAAC,EACD,CAACA,KAAK,EAAEhB,yBAAyB,EAAEQ,0BAA0B,CAAC,CAC/D;EAED,IAAApB,MAAA,CAAAwC,SAAS,EAAC,YAAM;IACd,IAAMC,YAAY,GAAG,IAAItC,YAAA,CAAAuC,kBAAkB,CAACvC,YAAA,CAAAwC,aAAa,CAACC,SAAS,CAAC;IACpE,IAAMC,4BAA4B,GAAGJ,YAAY,CAACK,WAAW,CAC3D1C,iCAAiC,EACjC8B,sBAAsB,CACvB;IACD,IAAMa,6BAA6B,GAAGN,YAAY,CAACK,WAAW,CAC5DzC,kCAAkC,EAClCiC,uBAAuB,CACxB;IAED,OAAO,YAAM;MACXO,4BAA4B,CAACG,MAAM,EAAE;MACrCD,6BAA6B,CAACC,MAAM,EAAE;IACxC,CAAC;EACH,CAAC,EAAE,CAACV,uBAAuB,EAAEJ,sBAAsB,CAAC,CAAC;EAErD,IAAMjB,eAAe,GAAG,IAAAjB,MAAA,CAAAmC,WAAW;IAAA,IAAAc,KAAA,OAAAC,kBAAA,CAAAvB,OAAA,EACjC,WAAOwB,MAA8B,EAAK;MACxClB,UAAU,CAAC,IAAI,CAAC;MAChBJ,QAAQ,CAACsB,MAAM,CAACC,SAAS,CAAC;MAC1B,IAAMhB,MAAM,SAASpB,gBAAgB,CAACmC,MAAM,CAAC;MAC7C,IAAIf,MAAM,CAACiB,KAAK,EAAE;QAChBxB,QAAQ,CAAC,IAAI,CAAC;MAChB;MACAI,UAAU,CAAC,KAAK,CAAC;MACjB,OAAOG,MAAM;IACf,CAAC;IAAA,iBAAAkB,EAAA;MAAA,OAAAL,KAAA,CAAAM,KAAA,OAAA/C,SAAA;IAAA;EAAA,KACD,CAACQ,gBAAgB,CAAC,CACnB;EAED,IAAMM,iBAAiB,GAAG,IAAAtB,MAAA,CAAAmC,WAAW,MAAAe,kBAAA,CAAAvB,OAAA,EAAC,aAAY;IAChDM,UAAU,CAAC,IAAI,CAAC;IAChB,IAAMG,MAAM,SAASf,kBAAkB,EAAE;IACzCY,UAAU,CAAC,KAAK,CAAC;IACjB,OAAOG,MAAM;EACf,CAAC,GAAE,CAACf,kBAAkB,CAAC,CAAC;EAExB,IAAMF,sBAAsB,GAAG,IAAAnB,MAAA,CAAAmC,WAAW;IAAA,IAAAqB,KAAA,OAAAN,kBAAA,CAAAvB,OAAA,EACxC,WAAO8B,YAAoB,EAAK;MAC9BxB,UAAU,CAAC,IAAI,CAAC;MAChB,IAAMG,MAAM,SAASlB,uBAAuB,CAACuC,YAAY,CAAC;MAC1D5B,QAAQ,CAAC,IAAI,CAAC;MACdI,UAAU,CAAC,KAAK,CAAC;MACjB,OAAOG,MAAM;IACf,CAAC;IAAA,iBAAAsB,GAAA;MAAA,OAAAF,KAAA,CAAAD,KAAA,OAAA/C,SAAA;IAAA;EAAA,KACD,CAACU,uBAAuB,CAAC,CAC1B;EAED,OAAO;IACLc,OAAO,EAAPA,OAAO;IACPf,eAAe,EAAfA,eAAe;IACfE,sBAAsB,EAAtBA,sBAAsB;IACtBJ,mBAAmB,EAAnBA,mBAAmB;IACnBO,iBAAiB,EAAjBA;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}