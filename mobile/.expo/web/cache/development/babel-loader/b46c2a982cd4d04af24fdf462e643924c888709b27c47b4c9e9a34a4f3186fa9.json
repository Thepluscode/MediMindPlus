{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Card, Button } from 'react-native-elements';\nimport { LineChart } from 'react-native-chart-kit';\nimport { useSelector } from 'react-redux';\nimport moment from 'moment';\nimport { fetchHealthMetrics, fetchVitalSigns, selectVitalSigns, selectBloodPressureReadings, selectSleepData, selectActivityData, selectVoiceRecordings, selectHealthMetrics, selectCurrentSession, selectIsLoading, selectIsUploading, selectError, selectLastSyncTime, selectLastUpdated } from \"../store/slices/healthDataSlice\";\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\";\nimport { getRiskPredictions, selectPredictions, selectIsLoading as selectIsPredictionsLoading } from \"../store/slices/aiPredictionsSlice\";\nimport { sensorService } from \"../services/sensorService\";\nimport { theme } from \"../theme/theme\";\nimport { AnalyticsSummary, ForecastChart, AnomalyAlert, HealthInsights } from \"./analytics\";\nimport { useAnalytics, useHealthInsights, useAnomalyDetection, useAnalyticsSummary } from \"../hooks/useAnalytics\";\nimport { convertHealthDataForAnalytics } from \"../utils/analyticsUtils\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar _Dimensions$get = Dimensions.get('window'),\n  SCREEN_WIDTH = _Dimensions$get.width;\nvar HealthDashboard = function HealthDashboard(_ref) {\n  var _activityData$, _activityData$2, _sleepData$, _activityData$3;\n  var navigation = _ref.navigation;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    refreshing = _useState2[0],\n    setRefreshing = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    analyticsEnabled = _useState4[0],\n    setAnalyticsEnabled = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    healthDataPoints = _useState6[0],\n    setHealthDataPoints = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    analyticsData = _useState8[0],\n    setAnalyticsData = _useState8[1];\n  var dispatch = useAppDispatch();\n  var vitalSigns = useAppSelector(selectVitalSigns);\n  var bloodPressureReadings = useAppSelector(selectBloodPressureReadings);\n  var sleepData = useAppSelector(selectSleepData);\n  var activityData = useAppSelector(selectActivityData);\n  var voiceRecordings = useAppSelector(selectVoiceRecordings);\n  var healthMetrics = useAppSelector(selectHealthMetrics);\n  var currentSession = useAppSelector(selectCurrentSession);\n  var isLoading = useAppSelector(selectIsLoading);\n  var isUploading = useAppSelector(selectIsUploading);\n  var error = useAppSelector(selectError);\n  var lastSyncTime = useAppSelector(selectLastSyncTime);\n  var lastUpdated = useAppSelector(selectLastUpdated);\n  var predictions = useAppSelector(selectPredictions);\n  var isPredictionsLoading = useAppSelector(selectIsPredictionsLoading);\n  var predictionsError = useAppSelector(function (state) {\n    return state.aiPredictions.error;\n  });\n  var _useSelector = useSelector(function (state) {\n      return state.auth;\n    }),\n    user = _useSelector.user;\n  var latestPrediction = predictions ? {\n    status: 'completed',\n    confidence: Math.max.apply(Math, _toConsumableArray(Object.values(predictions))) * 100,\n    timestamp: new Date().toISOString()\n  } : null;\n  var userId = (user == null ? void 0 : user.id) || 'demo-user';\n  var convertHealthMetricsToDataPoints = function convertHealthMetricsToDataPoints(metrics) {\n    var dataPoints = [];\n    metrics.forEach(function (metric) {\n      if (metric.heartRate !== undefined) {\n        dataPoints.push({\n          value: metric.heartRate,\n          timestamp: metric.timestamp,\n          unit: 'bpm'\n        });\n      }\n      if (metric.systolicBp !== undefined) {\n        dataPoints.push({\n          value: metric.systolicBp,\n          timestamp: metric.timestamp,\n          unit: 'mmHg'\n        });\n      }\n      if (metric.diastolicBp !== undefined) {\n        dataPoints.push({\n          value: metric.diastolicBp,\n          timestamp: metric.timestamp,\n          unit: 'mmHg'\n        });\n      }\n      if (metric.temperature !== undefined) {\n        dataPoints.push({\n          value: metric.temperature,\n          timestamp: metric.timestamp,\n          unit: '°C'\n        });\n      }\n      if (metric.respiratoryRate !== undefined) {\n        dataPoints.push({\n          value: metric.respiratoryRate,\n          timestamp: metric.timestamp,\n          unit: 'breaths/min'\n        });\n      }\n      if (metric.oxygenSaturation !== undefined) {\n        dataPoints.push({\n          value: metric.oxygenSaturation,\n          timestamp: metric.timestamp,\n          unit: '%'\n        });\n      }\n    });\n    return dataPoints;\n  };\n  var analyticsDataForHooks = analyticsEnabled ? analyticsData : [];\n  var _useAnalytics = useAnalytics(),\n    forecasts = _useAnalytics.forecasts,\n    isLoadingForecasts = _useAnalytics.isLoadingForecasts,\n    createForecast = _useAnalytics.createForecast;\n  var _useHealthInsights = useHealthInsights(userId, analyticsDataForHooks),\n    insights = _useHealthInsights.insights,\n    recommendations = _useHealthInsights.recommendations,\n    riskFactors = _useHealthInsights.riskFactors,\n    isLoadingInsights = _useHealthInsights.isLoading,\n    refreshInsights = _useHealthInsights.refresh;\n  var _useAnomalyDetection = useAnomalyDetection(userId),\n    anomalies = _useAnomalyDetection.anomalies,\n    criticalAnomalies = _useAnomalyDetection.criticalAnomalies,\n    detectAnomalies = _useAnomalyDetection.detectAnomalies;\n  var _useAnalyticsSummary = useAnalyticsSummary(userId),\n    analyticsSummary = _useAnalyticsSummary.summary;\n  useEffect(function () {\n    if (healthMetrics.length > 0 || vitalSigns.length > 0) {\n      console.log('[HealthDashboard] Converting health data for analytics');\n      var dataPoints = convertHealthMetricsToDataPoints(healthMetrics);\n      setHealthDataPoints(dataPoints);\n      setAnalyticsData(convertHealthDataForAnalytics(vitalSigns, dataPoints));\n    }\n  }, [healthMetrics, vitalSigns]);\n  useEffect(function () {\n    if (analyticsData.length > 0 && !analyticsEnabled) {\n      var timeoutId = setTimeout(function () {\n        console.log('[HealthDashboard] Enabling analytics features');\n        setAnalyticsEnabled(true);\n      }, 1000);\n      return function () {\n        return clearTimeout(timeoutId);\n      };\n    }\n  }, [analyticsData, analyticsEnabled]);\n  useEffect(function () {\n    console.log('[HealthDashboard] Mounted - deferring data load');\n    var timeoutId = setTimeout(function () {\n      console.log('[HealthDashboard] Starting deferred data load');\n      loadData();\n    }, 500);\n    return function () {\n      clearTimeout(timeoutId);\n      sensorService.stopMonitoring();\n    };\n  }, []);\n  var loadData = useCallback(_asyncToGenerator(function* () {\n    if (isLoading) return;\n    try {\n      setRefreshing(true);\n      yield Promise.all([dispatch(fetchVitalSigns({\n        startDate: moment().subtract(7, 'days').toISOString(),\n        endDate: moment().toISOString(),\n        limit: 7\n      })), dispatch(fetchHealthMetrics({\n        startDate: moment().subtract(7, 'days').toISOString(),\n        endDate: moment().toISOString(),\n        interval: 'day'\n      }))]);\n      if (analyticsData.length > 0) {\n        detectAnomalies(analyticsData);\n        if (vitalSigns.length >= 3) {\n          createForecast(userId, 'heart_rate', '7-days');\n        }\n      }\n    } catch (err) {\n      console.error('Error loading health data:', err);\n    } finally {\n      setRefreshing(false);\n    }\n  }), [dispatch, isLoading]);\n  var handleRefresh = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        yield dispatch(fetchVitalSigns({\n          startDate: moment().subtract(7, 'days').toISOString(),\n          endDate: moment().toISOString(),\n          limit: 7\n        }));\n        yield dispatch(fetchHealthMetrics({\n          startDate: moment().subtract(7, 'days').toISOString(),\n          endDate: moment().toISOString(),\n          interval: 'day'\n        }));\n        yield dispatch(getRiskPredictions());\n      } catch (err) {\n        console.error('Error refreshing data:', err);\n      }\n    });\n    return function handleRefresh() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var formatDate = function formatDate(dateString) {\n    if (!dateString) return 'Never';\n    return new Date(dateString).toLocaleString();\n  };\n  var activityScore = activityData && (_activityData$ = activityData[0]) != null && _activityData$.steps ? Math.min(1, activityData[0].steps / 10000 * 0.7 + (((_activityData$2 = activityData[0]) == null ? void 0 : _activityData$2.activeMinutes) || 0) / 60 * 0.3) : 0;\n  var sleepScore = sleepData && (_sleepData$ = sleepData[0]) != null && _sleepData$.quality ? Math.min(Math.max(0, sleepData[0].quality / 10), 1) : 0;\n  var latestHeartRate = vitalSigns && vitalSigns.length > 0 ? vitalSigns[0].heartRate : 0;\n  var latestBloodPressure = bloodPressureReadings && bloodPressureReadings.length > 0 ? bloodPressureReadings[0] : {\n    systolic: 0,\n    diastolic: 0,\n    timestamp: new Date().toISOString()\n  };\n  var latestOxygenLevel = vitalSigns && vitalSigns.length > 0 ? vitalSigns[0].oxygenSaturation : 0;\n  var heartRateData = {\n    labels: vitalSigns.slice(-7).map(function (_, i) {\n      return `Day ${i + 1}`;\n    }),\n    datasets: [{\n      data: vitalSigns.slice(-7).map(function (vs) {\n        return vs.value || 0;\n      }),\n      color: function color() {\n        var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        return `rgba(33, 150, 243, ${opacity})`;\n      },\n      strokeWidth: 2\n    }]\n  };\n  var latestBP = bloodPressureReadings[0];\n  var riskData = {\n    labels: ['Heart', 'Diabetes', 'Cancer'],\n    data: [0.3, 0.45, 0.2]\n  };\n  if (isLoading || isPredictionsLoading) {\n    return _jsxs(View, {\n      style: styles.loadingContainer,\n      children: [_jsx(ActivityIndicator, {\n        size: \"large\",\n        color: theme.colors.primary\n      }), _jsx(Text, {\n        style: styles.loadingText,\n        children: \"Loading your health data...\"\n      })]\n    });\n  }\n  return _jsxs(ScrollView, {\n    style: styles.container,\n    refreshControl: _jsx(RefreshControl, {\n      refreshing: refreshing,\n      onRefresh: handleRefresh,\n      colors: [theme.colors.primary],\n      tintColor: theme.colors.primary\n    }),\n    children: [_jsxs(Card, {\n      containerStyle: styles.card,\n      children: [_jsx(Card.Title, {\n        style: [styles.cardTitle, {\n          fontSize: 20,\n          fontWeight: '600',\n          marginBottom: 10\n        }],\n        children: \"Health Summary\"\n      }), _jsx(Card.Divider, {\n        style: styles.divider\n      }), _jsxs(View, {\n        style: styles.section,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Vital Signs\"\n        }), vitalSigns.length > 0 ? _jsxs(View, {\n          children: [_jsxs(Text, {\n            children: [\"Heart Rate: \", vitalSigns[vitalSigns.length - 1].heartRate, \" bpm\"]\n          }), _jsxs(Text, {\n            children: [\"Blood Pressure: \", bloodPressureReadings.length > 0 ? `${bloodPressureReadings[bloodPressureReadings.length - 1].systolic}/${bloodPressureReadings[bloodPressureReadings.length - 1].diastolic}` : 'N/A']\n          })]\n        }) : _jsx(Text, {\n          children: \"No vital signs data available\"\n        })]\n      }), _jsxs(View, {\n        style: styles.section,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"AI Health Prediction\"\n        }), latestPrediction ? _jsxs(View, {\n          children: [_jsxs(Text, {\n            children: [\"Status: \", latestPrediction.status]\n          }), _jsxs(Text, {\n            children: [\"Confidence: \", latestPrediction.confidence, \"%\"]\n          }), _jsxs(Text, {\n            children: [\"Timestamp: \", formatDate(latestPrediction.timestamp)]\n          })]\n        }) : _jsx(Text, {\n          children: \"No prediction data available\"\n        })]\n      }), _jsxs(View, {\n        style: styles.section,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Recent Activity\"\n        }), activityData.length > 0 ? _jsxs(View, {\n          children: [_jsxs(Text, {\n            children: [\"Steps: \", activityData[0].steps || 0]\n          }), _jsxs(Text, {\n            children: [\"Active Minutes: \", ((_activityData$3 = activityData[0]) == null ? void 0 : _activityData$3.activeMinutes) || 0]\n          })]\n        }) : _jsx(Text, {\n          children: \"No activity data available\"\n        })]\n      })]\n    }), _jsxs(Card, {\n      containerStyle: styles.card,\n      children: [_jsx(Card.Title, {\n        style: [styles.cardTitle, {\n          fontSize: 20,\n          fontWeight: '600',\n          marginBottom: 10\n        }],\n        children: \"Health Trends\"\n      }), _jsx(Card.Divider, {\n        style: styles.divider\n      }), vitalSigns.length > 0 ? _jsx(LineChart, {\n        data: {\n          labels: vitalSigns.slice(-7).map(function (_, index) {\n            return `${index + 1}d`;\n          }),\n          datasets: [{\n            data: vitalSigns.slice(-7).map(function (v) {\n              return v.heartRate;\n            })\n          }]\n        },\n        width: SCREEN_WIDTH - 40,\n        height: 220,\n        chartConfig: {\n          backgroundColor: theme.colors.primary,\n          backgroundGradientFrom: theme.colors.primary,\n          backgroundGradientTo: theme.colors.secondary,\n          decimalPlaces: 0,\n          color: function color() {\n            var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n            return `rgba(255, 255, 255, ${opacity})`;\n          },\n          style: {\n            borderRadius: 16\n          }\n        },\n        bezier: true,\n        style: styles.chart\n      }) : _jsx(Text, {\n        children: \"No chart data available\"\n      })]\n    }), _jsxs(View, {\n      style: styles.quickActions,\n      children: [_jsx(Button, {\n        title: \"Log Health Data\",\n        icon: {\n          name: 'add-circle-outline',\n          type: 'material',\n          color: 'white'\n        },\n        buttonStyle: [styles.actionButton, {\n          backgroundColor: theme.colors.primary\n        }],\n        containerStyle: styles.actionButtonContainer,\n        onPress: function onPress() {\n          return navigation.navigate('LogHealthData');\n        }\n      }), _jsx(Button, {\n        title: \"Talk to AI\",\n        icon: {\n          name: 'chatbubble-ellipses-outline',\n          type: 'ionicon',\n          color: 'white'\n        },\n        buttonStyle: [styles.actionButton, {\n          backgroundColor: '#4CAF50'\n        }],\n        containerStyle: styles.actionButtonContainer,\n        onPress: function onPress() {\n          return navigation.navigate('AIDoctorChat');\n        }\n      })]\n    }), analyticsEnabled && analyticsSummary && _jsx(AnalyticsSummary, {\n      summary: analyticsSummary,\n      onViewForecasts: function onViewForecasts() {\n        console.log('View forecasts');\n      },\n      onViewAnomalies: function onViewAnomalies() {\n        console.log('View anomalies');\n      },\n      onViewBaselines: function onViewBaselines() {\n        console.log('View baselines');\n      }\n    }), analyticsEnabled && _jsx(HealthInsights, {\n      insights: insights,\n      recommendations: recommendations,\n      riskFactors: riskFactors,\n      isLoading: isLoadingInsights,\n      onRefresh: refreshInsights\n    }), analyticsEnabled && anomalies.length > 0 && _jsx(AnomalyAlert, {\n      anomalies: anomalies,\n      onAnomalyPress: function onAnomalyPress(anomaly) {\n        console.log('Anomaly pressed:', anomaly);\n      },\n      maxDisplay: 3\n    }), analyticsEnabled && forecasts.map(function (forecast, index) {\n      return _jsx(ForecastChart, {\n        forecast: forecast,\n        title: `${forecast.metric} Prediction`,\n        showAccuracy: true\n      }, `forecast-${index}`);\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n    padding: 16\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff'\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#666',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2\n  },\n  statHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8\n  },\n  statTitle: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    marginLeft: 8\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    marginVertical: 4\n  },\n  statUnit: {\n    fontSize: 12,\n    color: theme.colors.textSecondary,\n    marginBottom: 4\n  },\n  statChange: {\n    fontSize: 12,\n    color: '#4CAF50'\n  },\n  noDataText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    fontStyle: 'italic',\n    marginVertical: 8\n  },\n  card: {\n    borderRadius: 12,\n    padding: 16,\n    margin: 0,\n    marginBottom: 16,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16\n  },\n  cardTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text\n  },\n  detailsButtonText: {\n    color: theme.colors.primary,\n    fontSize: 14\n  },\n  chart: {\n    marginVertical: 8,\n    borderRadius: 8\n  },\n  badgeContainer: {\n    marginLeft: 8\n  },\n  insightText: {\n    color: theme.colors.text,\n    marginBottom: 16,\n    lineHeight: 22\n  },\n  highlightText: {\n    color: theme.colors.primary,\n    fontWeight: '600'\n  },\n  primaryButton: {\n    backgroundColor: theme.colors.primary,\n    borderRadius: 8,\n    paddingVertical: 10\n  },\n  buttonContainer: {\n    marginTop: 8\n  },\n  quickActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 24\n  },\n  actionButton: {\n    borderRadius: 8,\n    paddingVertical: 12,\n    paddingHorizontal: 16\n  },\n  actionButtonContainer: {\n    flex: 1,\n    marginHorizontal: 4\n  },\n  divider: {\n    marginVertical: 10\n  },\n  section: {\n    marginVertical: 12\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 8\n  }\n});\nexport default HealthDashboard;","map":{"version":3,"names":["React","useEffect","useState","useCallback","View","ScrollView","StyleSheet","Dimensions","RefreshControl","ActivityIndicator","Text","Card","Button","LineChart","useSelector","moment","fetchHealthMetrics","fetchVitalSigns","selectVitalSigns","selectBloodPressureReadings","selectSleepData","selectActivityData","selectVoiceRecordings","selectHealthMetrics","selectCurrentSession","selectIsLoading","selectIsUploading","selectError","selectLastSyncTime","selectLastUpdated","useAppDispatch","useAppSelector","getRiskPredictions","selectPredictions","selectIsPredictionsLoading","sensorService","theme","AnalyticsSummary","ForecastChart","AnomalyAlert","HealthInsights","useAnalytics","useHealthInsights","useAnomalyDetection","useAnalyticsSummary","convertHealthDataForAnalytics","jsx","_jsx","jsxs","_jsxs","_Dimensions$get","get","SCREEN_WIDTH","width","HealthDashboard","_ref","_activityData$","_activityData$2","_sleepData$","_activityData$3","navigation","_useState","_useState2","_slicedToArray","refreshing","setRefreshing","_useState3","_useState4","analyticsEnabled","setAnalyticsEnabled","_useState5","_useState6","healthDataPoints","setHealthDataPoints","_useState7","_useState8","analyticsData","setAnalyticsData","dispatch","vitalSigns","bloodPressureReadings","sleepData","activityData","voiceRecordings","healthMetrics","currentSession","isLoading","isUploading","error","lastSyncTime","lastUpdated","predictions","isPredictionsLoading","predictionsError","state","aiPredictions","_useSelector","auth","user","latestPrediction","status","confidence","Math","max","apply","_toConsumableArray","Object","values","timestamp","Date","toISOString","userId","id","convertHealthMetricsToDataPoints","metrics","dataPoints","forEach","metric","heartRate","undefined","push","value","unit","systolicBp","diastolicBp","temperature","respiratoryRate","oxygenSaturation","analyticsDataForHooks","_useAnalytics","forecasts","isLoadingForecasts","createForecast","_useHealthInsights","insights","recommendations","riskFactors","isLoadingInsights","refreshInsights","refresh","_useAnomalyDetection","anomalies","criticalAnomalies","detectAnomalies","_useAnalyticsSummary","analyticsSummary","summary","length","console","log","timeoutId","setTimeout","clearTimeout","loadData","stopMonitoring","_asyncToGenerator","Promise","all","startDate","subtract","endDate","limit","interval","err","handleRefresh","_ref3","arguments","formatDate","dateString","toLocaleString","activityScore","steps","min","activeMinutes","sleepScore","quality","latestHeartRate","latestBloodPressure","systolic","diastolic","latestOxygenLevel","heartRateData","labels","slice","map","_","i","datasets","data","vs","color","opacity","strokeWidth","latestBP","riskData","style","styles","loadingContainer","children","size","colors","primary","loadingText","container","refreshControl","onRefresh","tintColor","containerStyle","card","Title","cardTitle","fontSize","fontWeight","marginBottom","Divider","divider","section","sectionTitle","index","v","height","chartConfig","backgroundColor","backgroundGradientFrom","backgroundGradientTo","secondary","decimalPlaces","borderRadius","bezier","chart","quickActions","title","icon","name","type","buttonStyle","actionButton","actionButtonContainer","onPress","navigate","onViewForecasts","onViewAnomalies","onViewBaselines","onAnomalyPress","anomaly","maxDisplay","forecast","showAccuracy","create","flex","padding","justifyContent","alignItems","marginTop","shadowOffset","shadowOpacity","shadowRadius","elevation","statHeader","flexDirection","statTitle","textSecondary","marginLeft","statValue","text","marginVertical","statUnit","statChange","noDataText","fontStyle","margin","shadowColor","cardHeader","detailsButtonText","badgeContainer","insightText","lineHeight","highlightText","primaryButton","paddingVertical","buttonContainer","paddingHorizontal","marginHorizontal"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/src/components/HealthDashboard.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport {\n  View,\n  ScrollView,\n  StyleSheet,\n  Dimensions,\n  RefreshControl,\n  ActivityIndicator,\n  Text,\n  TouchableOpacity\n} from 'react-native';\nimport {\n  Card,\n  Icon,\n  useTheme,\n  Badge,\n  Button,\n  Divider\n} from 'react-native-elements';\nimport { LineChart, ProgressChart } from 'react-native-chart-kit';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StackNavigationProp } from '@react-navigation/stack';\nimport moment from 'moment';\n\n// Import async thunks and selectors from healthDataSlice\nimport {\n  fetchHealthMetrics,\n  fetchVitalSigns,\n  selectVitalSigns,\n  selectBloodPressureReadings,\n  selectSleepData,\n  selectActivityData,\n  selectVoiceRecordings,\n  selectHealthMetrics,\n  selectCurrentSession,\n  selectIsLoading,\n  selectIsUploading,\n  selectError,\n  selectLastSyncTime,\n  selectLastUpdated\n} from '../store/slices/healthDataSlice';\n\n// Import types\nimport type { RootState } from '../store/types';\nimport type {\n  HealthDataState,\n  HealthDataPoint,\n  BloodPressureReading,\n  SleepData,\n  ActivityData,\n  VoiceData,\n  HealthMetrics,\n  VitalSigns\n} from '../types/models/health';\n\n// Import useAppDispatch for proper typing with thunks\nimport { useAppDispatch, useAppSelector } from '../store/hooks';\n\nimport { getRiskPredictions, selectPredictions, selectIsLoading as selectIsPredictionsLoading } from '../store/slices/aiPredictionsSlice';\nimport { sensorService } from '../services/sensorService';\nimport { theme } from '../theme/theme';\n\n// Import analytics components and hooks\nimport {\n  AnalyticsSummary,\n  ForecastChart,\n  AnomalyAlert,\n  HealthInsights\n} from './analytics';\nimport {\n  useAnalytics,\n  useHealthInsights,\n  useAnomalyDetection,\n  useAnalyticsSummary\n} from '../hooks/useAnalytics';\nimport { convertHealthDataForAnalytics } from '../utils/analyticsUtils';\n\ntype HealthDashboardProps = {\n  navigation: StackNavigationProp<Record<string, object | undefined>>;\n};\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\n\nconst HealthDashboard: React.FC<HealthDashboardProps> = ({ navigation }) => {\n  const [refreshing, setRefreshing] = useState(false);\n  const [analyticsEnabled, setAnalyticsEnabled] = useState(false);\n  const [healthDataPoints, setHealthDataPoints] = useState<HealthDataPoint[]>([]);\n  const [analyticsData, setAnalyticsData] = useState<any[]>([]);\n  const dispatch = useAppDispatch();\n\n  // Get health data from Redux store using selectors with proper typing\n  const vitalSigns = useAppSelector(selectVitalSigns);\n  const bloodPressureReadings = useAppSelector(selectBloodPressureReadings);\n  const sleepData = useAppSelector(selectSleepData);\n  const activityData = useAppSelector(selectActivityData);\n  const voiceRecordings = useAppSelector(selectVoiceRecordings);\n  const healthMetrics = useAppSelector(selectHealthMetrics);\n  const currentSession = useAppSelector(selectCurrentSession);\n  const isLoading = useAppSelector(selectIsLoading);\n  const isUploading = useAppSelector(selectIsUploading);\n  const error = useAppSelector(selectError);\n  const lastSyncTime = useAppSelector(selectLastSyncTime);\n  const lastUpdated = useAppSelector(selectLastUpdated);\n\n  const predictions = useAppSelector(selectPredictions);\n  const isPredictionsLoading = useAppSelector(selectIsPredictionsLoading);\n  const predictionsError = useAppSelector((state) => state.aiPredictions.error);\n\n  const { user } = useSelector((state: RootState) => state.auth);\n\n  // Create a mock latest prediction since predictions is now RiskPredictions object\n  const latestPrediction = predictions ? {\n    status: 'completed' as const,\n    confidence: Math.max(...Object.values(predictions)) * 100,\n    timestamp: new Date().toISOString()\n  } : null;\n\n  // Analytics hooks\n  const userId = user?.id || 'demo-user';\n\n  // Convert HealthMetrics to HealthDataPoint format\n  const convertHealthMetricsToDataPoints = (metrics: HealthMetrics[]): HealthDataPoint[] => {\n    const dataPoints: HealthDataPoint[] = [];\n\n    metrics.forEach(metric => {\n      // Convert each metric property to a HealthDataPoint\n      if (metric.heartRate !== undefined) {\n        dataPoints.push({\n          value: metric.heartRate,\n          timestamp: metric.timestamp,\n          unit: 'bpm'\n        });\n      }\n      if (metric.systolicBp !== undefined) {\n        dataPoints.push({\n          value: metric.systolicBp,\n          timestamp: metric.timestamp,\n          unit: 'mmHg'\n        });\n      }\n      if (metric.diastolicBp !== undefined) {\n        dataPoints.push({\n          value: metric.diastolicBp,\n          timestamp: metric.timestamp,\n          unit: 'mmHg'\n        });\n      }\n      if (metric.temperature !== undefined) {\n        dataPoints.push({\n          value: metric.temperature,\n          timestamp: metric.timestamp,\n          unit: '°C'\n        });\n      }\n      if (metric.respiratoryRate !== undefined) {\n        dataPoints.push({\n          value: metric.respiratoryRate,\n          timestamp: metric.timestamp,\n          unit: 'breaths/min'\n        });\n      }\n      if (metric.oxygenSaturation !== undefined) {\n        dataPoints.push({\n          value: metric.oxygenSaturation,\n          timestamp: metric.timestamp,\n          unit: '%'\n        });\n      }\n    });\n\n    return dataPoints;\n  };\n\n  // NOTE: Hooks must always be called (cannot be conditional)\n  // Pass empty data initially, then real data after it's loaded\n\n  // Use empty arrays for initial render, then populate with real data\n  const analyticsDataForHooks = analyticsEnabled ? analyticsData : [];\n\n  const {\n    forecasts,\n    isLoadingForecasts,\n    createForecast\n  } = useAnalytics();\n\n  const {\n    insights,\n    recommendations,\n    riskFactors,\n    isLoading: isLoadingInsights,\n    refresh: refreshInsights\n  } = useHealthInsights(userId, analyticsDataForHooks);\n\n  const {\n    anomalies,\n    criticalAnomalies,\n    detectAnomalies\n  } = useAnomalyDetection(userId);\n\n  const {\n    summary: analyticsSummary\n  } = useAnalyticsSummary(userId);\n\n  // DEFERRED: Convert data after initial render\n  useEffect(() => {\n    if (healthMetrics.length > 0 || vitalSigns.length > 0) {\n      console.log('[HealthDashboard] Converting health data for analytics');\n      const dataPoints = convertHealthMetricsToDataPoints(healthMetrics);\n      setHealthDataPoints(dataPoints);\n      setAnalyticsData(convertHealthDataForAnalytics(vitalSigns, dataPoints));\n    }\n  }, [healthMetrics, vitalSigns]);\n\n  // DEFERRED: Enable analytics after data is loaded and converted\n  useEffect(() => {\n    if (analyticsData.length > 0 && !analyticsEnabled) {\n      const timeoutId = setTimeout(() => {\n        console.log('[HealthDashboard] Enabling analytics features');\n        setAnalyticsEnabled(true);\n      }, 1000); // 1 second delay to ensure UI is responsive\n\n      return () => clearTimeout(timeoutId);\n    }\n  }, [analyticsData, analyticsEnabled]);\n\n  // DEFERRED: Load initial data after component mounts\n  useEffect(() => {\n    console.log('[HealthDashboard] Mounted - deferring data load');\n\n    const timeoutId = setTimeout(() => {\n      console.log('[HealthDashboard] Starting deferred data load');\n      loadData();\n    }, 500); // 500ms delay\n\n    // Clean up sensor service on unmount\n    return () => {\n      clearTimeout(timeoutId);\n      sensorService.stopMonitoring();\n    };\n  }, []);\n\n  // Function to load all data\n  const loadData = useCallback(async () => {\n    if (isLoading) return;\n\n    try {\n      setRefreshing(true);\n\n      // Fetch health data using the async thunks\n      await Promise.all([\n        dispatch(fetchVitalSigns({\n          startDate: moment().subtract(7, 'days').toISOString(),\n          endDate: moment().toISOString(),\n          limit: 7\n        })),\n        dispatch(fetchHealthMetrics({\n          startDate: moment().subtract(7, 'days').toISOString(),\n          endDate: moment().toISOString(),\n          interval: 'day' as const\n        }))\n      ]);\n\n      // Get risk predictions\n      // await dispatch(fetchRiskPredictions());\n\n      // Run analytics if we have data\n      if (analyticsData.length > 0) {\n        // Detect anomalies in the latest data\n        detectAnomalies(analyticsData);\n\n        // Generate forecast for heart rate if we have enough data\n        if (vitalSigns.length >= 3) {\n          createForecast(userId, 'heart_rate', '7-days');\n        }\n      }\n    } catch (err) {\n      console.error('Error loading health data:', err);\n      // Handle error appropriately\n    } finally {\n      setRefreshing(false);\n    }\n  }, [dispatch, isLoading]);\n\n  // Handle refresh\n  const handleRefresh = async () => {\n    try {\n      await dispatch(fetchVitalSigns({\n        startDate: moment().subtract(7, 'days').toISOString(),\n        endDate: moment().toISOString(),\n        limit: 7\n      }));\n      await dispatch(fetchHealthMetrics({\n        startDate: moment().subtract(7, 'days').toISOString(),\n        endDate: moment().toISOString(),\n        interval: 'day' as const\n      }));\n      await dispatch(getRiskPredictions());\n    } catch (err) {\n      console.error('Error refreshing data:', err);\n    }\n  };\n\n  // Format date helper\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return 'Never';\n    return new Date(dateString).toLocaleString();\n  };\n\n  // Calculate activity score (example: based on steps and active minutes)\n  const activityScore = activityData && activityData[0]?.steps\n    ? Math.min(1, (activityData[0].steps / 10000) * 0.7 + ((activityData[0]?.activeMinutes || 0) / 60) * 0.3)\n    : 0;\n\n  // Calculate sleep score (example: based on sleep quality and duration)\n  const sleepScore = sleepData && sleepData[0]?.quality ?\n    Math.min(Math.max(0, sleepData[0].quality / 10), 1) : 0;\n\n  // Get latest vital signs for display\n  const latestHeartRate = vitalSigns && vitalSigns.length > 0\n    ? vitalSigns[0].heartRate\n    : 0;\n\n  const latestBloodPressure = bloodPressureReadings && bloodPressureReadings.length > 0\n    ? bloodPressureReadings[0]\n    : { systolic: 0, diastolic: 0, timestamp: new Date().toISOString() };\n\n  const latestOxygenLevel = vitalSigns && vitalSigns.length > 0\n    ? vitalSigns[0].oxygenSaturation\n    : 0;\n\n  // Prepare chart data\n  const heartRateData = {\n    labels: vitalSigns.slice(-7).map((_, i) => `Day ${i + 1}`),\n    datasets: [{\n      data: vitalSigns.slice(-7).map(vs => vs.value || 0),\n      color: (opacity = 1) => `rgba(33, 150, 243, ${opacity})`,\n      strokeWidth: 2\n    }]\n  };\n\n  // Get latest blood pressure reading\n  const latestBP = bloodPressureReadings[0];\n\n  // Prepare risk assessment data\n  const riskData = {\n    labels: ['Heart', 'Diabetes', 'Cancer'],\n    data: [0.3, 0.45, 0.2], // Example data, replace with actual predictions\n  };\n\n  // Render loading state\n  if (isLoading || isPredictionsLoading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n        <Text style={styles.loadingText}>Loading your health data...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <ScrollView \n      style={styles.container}\n      refreshControl={\n        <RefreshControl\n          refreshing={refreshing}\n          onRefresh={handleRefresh}\n          colors={[theme.colors.primary]}\n          tintColor={theme.colors.primary}\n        />\n      }\n    >\n      {/* Health Summary Card */}\n      {/* @ts-ignore */}\n      <Card containerStyle={styles.card}>\n        <Card.Title style={[styles.cardTitle, { fontSize: 20, fontWeight: '600', marginBottom: 10 }]}>Health Summary</Card.Title>\n        <Card.Divider style={styles.divider} />\n\n        {/* Vital Signs */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Vital Signs</Text>\n          {vitalSigns.length > 0 ? (\n            <View>\n              <Text>Heart Rate: {vitalSigns[vitalSigns.length - 1].heartRate} bpm</Text>\n              <Text>Blood Pressure: {bloodPressureReadings.length > 0 ?\n                `${bloodPressureReadings[bloodPressureReadings.length - 1].systolic}/${bloodPressureReadings[bloodPressureReadings.length - 1].diastolic}` : 'N/A'}</Text>\n            </View>\n          ) : (\n            <Text>No vital signs data available</Text>\n          )}\n        </View>\n\n        {/* AI Prediction */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>AI Health Prediction</Text>\n          {latestPrediction ? (\n            <View>\n              <Text>Status: {latestPrediction.status}</Text>\n              <Text>Confidence: {latestPrediction.confidence}%</Text>\n              <Text>Timestamp: {formatDate(latestPrediction.timestamp)}</Text>\n            </View>\n          ) : (\n            <Text>No prediction data available</Text>\n          )}\n        </View>\n\n        {/* Recent Activity */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Recent Activity</Text>\n          {activityData.length > 0 ? (\n            <View>\n              <Text>Steps: {activityData[0].steps || 0}</Text>\n              <Text>Active Minutes: {activityData[0]?.activeMinutes || 0}</Text>\n            </View>\n          ) : (\n            <Text>No activity data available</Text>\n          )}\n        </View>\n      </Card>\n      \n      {/* Health Metrics Chart */}\n      {/* @ts-ignore */}\n      <Card containerStyle={styles.card}>\n        <Card.Title style={[styles.cardTitle, { fontSize: 20, fontWeight: '600', marginBottom: 10 }]}>Health Trends</Card.Title>\n        <Card.Divider style={styles.divider} />\n        {vitalSigns.length > 0 ? (\n          <LineChart\n            data={{\n              labels: vitalSigns.slice(-7).map((_, index) => `${index + 1}d`),\n              datasets: [\n                {\n                  data: vitalSigns.slice(-7).map(v => v.heartRate)\n                }\n              ]\n            }}\n            width={SCREEN_WIDTH - 40}\n            height={220}\n            chartConfig={{\n              backgroundColor: theme.colors.primary,\n              backgroundGradientFrom: theme.colors.primary,\n              backgroundGradientTo: theme.colors.secondary,\n              decimalPlaces: 0,\n              color: (opacity = 1) => `rgba(255, 255, 255, ${opacity})`,\n              style: {\n                borderRadius: 16\n              }\n            }}\n            bezier\n            style={styles.chart}\n          />\n        ) : (\n          <Text>No chart data available</Text>\n        )}\n      </Card>\n      \n      {/* Quick Actions */ }\n      <View style={styles.quickActions}>\n        <Button\n          title=\"Log Health Data\"\n          icon={{\n            name: 'add-circle-outline',\n            type: 'material',\n            color: 'white',\n          }}\n          buttonStyle={[styles.actionButton, { backgroundColor: theme.colors.primary }]}\n          containerStyle={styles.actionButtonContainer}\n          onPress={() => navigation.navigate('LogHealthData')}\n        />\n        <Button\n          title=\"Talk to AI\"\n          icon={{\n            name: 'chatbubble-ellipses-outline',\n            type: 'ionicon',\n            color: 'white',\n          }}\n          buttonStyle={[styles.actionButton, { backgroundColor: '#4CAF50' }]}\n          containerStyle={styles.actionButtonContainer}\n          onPress={() => navigation.navigate('AIDoctorChat')}\n        />\n      </View>\n\n      {/* Analytics Section - Only render when analytics are enabled and summary is available */}\n      {analyticsEnabled && analyticsSummary && (\n        <AnalyticsSummary\n          summary={analyticsSummary}\n          onViewForecasts={() => {\n            // Navigate to forecasts screen or show modal\n            console.log('View forecasts');\n          }}\n          onViewAnomalies={() => {\n            // Navigate to anomalies screen or show modal\n            console.log('View anomalies');\n          }}\n          onViewBaselines={() => {\n            // Navigate to baselines screen or show modal\n            console.log('View baselines');\n          }}\n        />\n      )}\n\n      {/* Health Insights - Only render when analytics are enabled */}\n      {analyticsEnabled && (\n        <HealthInsights\n          insights={insights}\n          recommendations={recommendations}\n          riskFactors={riskFactors}\n          isLoading={isLoadingInsights}\n          onRefresh={refreshInsights}\n        />\n      )}\n\n      {/* Anomaly Alerts - Only render when analytics are enabled */}\n      {analyticsEnabled && anomalies.length > 0 && (\n        <AnomalyAlert\n          anomalies={anomalies}\n          onAnomalyPress={(anomaly) => {\n            // Handle anomaly press - show details or navigate\n            console.log('Anomaly pressed:', anomaly);\n          }}\n          maxDisplay={3}\n        />\n      )}\n\n      {/* Forecast Charts - Only render when analytics are enabled */}\n      {analyticsEnabled && forecasts.map((forecast, index) => (\n        <ForecastChart\n          key={`forecast-${index}`}\n          forecast={forecast}\n          title={`${forecast.metric} Prediction`}\n          showAccuracy={true}\n        />\n      ))}\n    </ScrollView >\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n    padding: 16,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#666',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  statHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  statTitle: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    marginLeft: 8,\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    marginVertical: 4,\n  },\n  statUnit: {\n    fontSize: 12,\n    color: theme.colors.textSecondary,\n    marginBottom: 4,\n  },\n  statChange: {\n    fontSize: 12,\n    color: '#4CAF50',\n  },\n  noDataText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    fontStyle: 'italic',\n    marginVertical: 8,\n  },\n  card: {\n    borderRadius: 12,\n    padding: 16,\n    margin: 0,\n    marginBottom: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  cardTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  detailsButtonText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n  },\n  chart: {\n    marginVertical: 8,\n    borderRadius: 8,\n  },\n  badgeContainer: {\n    marginLeft: 8,\n  },\n  insightText: {\n    color: theme.colors.text,\n    marginBottom: 16,\n    lineHeight: 22,\n  },\n  highlightText: {\n    color: theme.colors.primary,\n    fontWeight: '600',\n  },\n  primaryButton: {\n    backgroundColor: theme.colors.primary,\n    borderRadius: 8,\n    paddingVertical: 10,\n  },\n  buttonContainer: {\n    marginTop: 8,\n  },\n  quickActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 24,\n  },\n  actionButton: {\n    borderRadius: 8,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n  },\n  actionButtonContainer: {\n    flex: 1,\n    marginHorizontal: 4,\n  },\n  divider: {\n    marginVertical: 10,\n  },\n  section: {\n    marginVertical: 12,\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 8,\n  },\n});\n\nexport default HealthDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}