{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { aiBlockchainService } from \"../../services/aiBlockchainService\";\nvar initialState = {\n  consent: null,\n  isLoading: false,\n  error: null,\n  lastUpdated: null\n};\nexport var getConsent = createAsyncThunk('consent/getConsent', function () {\n  var _ref2 = _asyncToGenerator(function* (_, _ref) {\n    var rejectWithValue = _ref.rejectWithValue;\n    try {\n      var consent = yield aiBlockchainService.getConsent();\n      return consent;\n    } catch (error) {\n      return rejectWithValue(error.message || 'Failed to get consent');\n    }\n  });\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexport var updateConsent = createAsyncThunk('consent/updateConsent', function () {\n  var _ref5 = _asyncToGenerator(function* (_ref3, _ref4) {\n    var consentGiven = _ref3.consentGiven,\n      consentScope = _ref3.consentScope;\n    var rejectWithValue = _ref4.rejectWithValue;\n    try {\n      var consent = yield aiBlockchainService.updateConsent(consentGiven, consentScope);\n      return consent;\n    } catch (error) {\n      return rejectWithValue(error.message || 'Failed to update consent');\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nvar consentSlice = createSlice({\n  name: 'consent',\n  initialState: initialState,\n  reducers: {\n    clearConsentError: function clearConsentError(state) {\n      state.error = null;\n    },\n    resetConsent: function resetConsent(state) {\n      state.consent = null;\n      state.error = null;\n      state.lastUpdated = null;\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(getConsent.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getConsent.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.consent = action.payload;\n      state.lastUpdated = new Date().toISOString();\n    }).addCase(getConsent.rejected, function (state, action) {\n      state.isLoading = false;\n      state.error = action.payload || 'Failed to get consent';\n    }).addCase(updateConsent.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(updateConsent.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.consent = action.payload;\n      state.lastUpdated = new Date().toISOString();\n    }).addCase(updateConsent.rejected, function (state, action) {\n      state.isLoading = false;\n      state.error = action.payload || 'Failed to update consent';\n    });\n  }\n});\nvar _consentSlice$actions = consentSlice.actions,\n  clearConsentError = _consentSlice$actions.clearConsentError,\n  resetConsent = _consentSlice$actions.resetConsent;\nexport { clearConsentError, resetConsent };\nexport var selectConsent = function selectConsent(state) {\n  return state.consent.consent;\n};\nexport var selectConsentIsLoading = function selectConsentIsLoading(state) {\n  return state.consent.isLoading;\n};\nexport var selectConsentError = function selectConsentError(state) {\n  return state.consent.error;\n};\nexport var selectConsentLastUpdated = function selectConsentLastUpdated(state) {\n  return state.consent.lastUpdated;\n};\nexport default consentSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","aiBlockchainService","initialState","consent","isLoading","error","lastUpdated","getConsent","_ref2","_asyncToGenerator","_","_ref","rejectWithValue","message","_x","_x2","apply","arguments","updateConsent","_ref5","_ref3","_ref4","consentGiven","consentScope","_x3","_x4","consentSlice","name","reducers","clearConsentError","state","resetConsent","extraReducers","builder","addCase","pending","fulfilled","action","payload","Date","toISOString","rejected","_consentSlice$actions","actions","selectConsent","selectConsentIsLoading","selectConsentError","selectConsentLastUpdated","reducer"],"sources":["/Users/theophilusogieva/Desktop/MediMindPlus/MediMindPlus/frontend/src/store/slices/consentSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { aiBlockchainService, PatientConsent } from '../../services/aiBlockchainService';\nimport type { RootState } from '../types';\n\ninterface ConsentState {\n  consent: PatientConsent | null;\n  isLoading: boolean;\n  error: string | null;\n  lastUpdated: string | null;\n}\n\nconst initialState: ConsentState = {\n  consent: null,\n  isLoading: false,\n  error: null,\n  lastUpdated: null,\n};\n\n// Async thunks\nexport const getConsent = createAsyncThunk<\n  PatientConsent,\n  void,\n  { rejectValue: string }\n>(\n  'consent/getConsent',\n  async (_, { rejectWithValue }) => {\n    try {\n      const consent = await aiBlockchainService.getConsent();\n      return consent;\n    } catch (error: any) {\n      return rejectWithValue(error.message || 'Failed to get consent');\n    }\n  }\n);\n\nexport const updateConsent = createAsyncThunk<\n  PatientConsent,\n  { consentGiven: boolean; consentScope: string[] },\n  { rejectValue: string }\n>(\n  'consent/updateConsent',\n  async ({ consentGiven, consentScope }, { rejectWithValue }) => {\n    try {\n      const consent = await aiBlockchainService.updateConsent(consentGiven, consentScope);\n      return consent;\n    } catch (error: any) {\n      return rejectWithValue(error.message || 'Failed to update consent');\n    }\n  }\n);\n\nconst consentSlice = createSlice({\n  name: 'consent',\n  initialState,\n  reducers: {\n    clearConsentError: (state) => {\n      state.error = null;\n    },\n    resetConsent: (state) => {\n      state.consent = null;\n      state.error = null;\n      state.lastUpdated = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Get consent\n      .addCase(getConsent.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(getConsent.fulfilled, (state, action: PayloadAction<PatientConsent>) => {\n        state.isLoading = false;\n        state.consent = action.payload;\n        state.lastUpdated = new Date().toISOString();\n      })\n      .addCase(getConsent.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload || 'Failed to get consent';\n      })\n      // Update consent\n      .addCase(updateConsent.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(updateConsent.fulfilled, (state, action: PayloadAction<PatientConsent>) => {\n        state.isLoading = false;\n        state.consent = action.payload;\n        state.lastUpdated = new Date().toISOString();\n      })\n      .addCase(updateConsent.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload || 'Failed to update consent';\n      });\n  },\n});\n\nexport const {\n  clearConsentError,\n  resetConsent,\n} = consentSlice.actions;\n\n// Selectors\nexport const selectConsent = (state: RootState) => state.consent.consent;\nexport const selectConsentIsLoading = (state: RootState) => state.consent.isLoading;\nexport const selectConsentError = (state: RootState) => state.consent.error;\nexport const selectConsentLastUpdated = (state: RootState) => state.consent.lastUpdated;\n\nexport default consentSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}