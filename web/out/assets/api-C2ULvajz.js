import{a as l}from"./index-xsH4HHeE.js";const g="https://medimindplus-api-production.up.railway.app",t=l.create({baseURL:g,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e));let n=!1,c=[];const p=(e,a=null)=>{c.forEach(o=>e?o.reject(e):o.resolve(a)),c=[]};t.interceptors.response.use(e=>e,async e=>{const a=e.config;if(e.response?.status===401&&!a._retry){const o=localStorage.getItem("refreshToken");if(!o)return localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(e);if(n)return new Promise((s,i)=>{c.push({resolve:s,reject:i})}).then(s=>(a.headers.Authorization=`Bearer ${s}`,t(a)));a._retry=!0,n=!0;try{const s=await l.post(`${g}/api/auth/refresh-token`,{refreshToken:o}),i=s.data.tokens?.accessToken||s.data.token;if(!i)throw new Error("No token in refresh response");return localStorage.setItem("token",i),s.data.tokens?.refreshToken&&localStorage.setItem("refreshToken",s.data.tokens.refreshToken),t.defaults.headers.common.Authorization=`Bearer ${i}`,p(null,i),a.headers.Authorization=`Bearer ${i}`,t(a)}catch(s){return p(s,null),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(s)}finally{n=!1}}return Promise.reject(e)});const d={getMetrics:(e=30)=>t.get(`/api/health-metrics?days=${e}`),saveMetrics:e=>t.post("/api/health-metrics",e)},h={getSummary:()=>t.get("/api/analytics/summary"),getForecast:e=>t.post("/api/analytics/forecast",e),detectAnomalies:e=>t.post("/api/analytics/anomalies",e),generateInsights:e=>t.post("/api/analytics/insights",{healthData:e})},m={getProfile:()=>t.get("/api/settings/profile"),updateProfile:e=>t.put("/api/settings/profile",e),changePassword:e=>t.put("/api/settings/password",e),getPrivacy:()=>t.get("/api/settings/privacy/settings"),updatePrivacy:e=>t.put("/api/settings/privacy/settings",e),exportData:()=>t.get("/api/settings/privacy/export")},v={syncData:(e,a)=>t.post(`/api/wearable/${e}/sync`,a),getDevices:()=>t.get(`/api/advanced/wearables/devices/${r()}`),connectDevice:(e,a="Unknown")=>t.post("/api/advanced/wearables/connect",{user_id:r(),device_type:e,manufacturer:a}),disconnectDevice:e=>t.delete(`/api/advanced/wearables/devices/${e}`).catch(()=>t.delete(`/api/wearable/devices/${e}`)),getBiometrics:()=>t.get(`/api/advanced/wearables/realtime/${r()}`),getBiometricData:(e,a=24)=>t.get(`/api/advanced/biometric/${e}?hours=${a}`)},r=()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")?.id||""}catch{return""}},f={book:e=>t.post("/api/consultations/book",e),getList:()=>t.get(`/api/consultations/patient/${r()}`),getById:e=>t.get(`/api/consultations/${e}`),cancel:e=>t.put(`/api/consultations/${e}/cancel`)},y={getTwin:()=>{const e=r();return t.get(`/api/v1/health-twin/${e}`)},runSimulation:e=>{const a=r();return t.post(`/api/v1/health-twin/${a}/simulate`,e)},getTwinPredictions:()=>{const e=r();return t.get(`/api/v1/health-twin/${e}/predictions`)},getBiologicalAge:()=>{const e=r();return t.get(`/api/v1/longevity/${e}/biological-age`)},getLongevityProfile:()=>{const e=r();return t.get(`/api/v1/longevity/${e}/profile`)},getAgingHallmarks:()=>{const e=r();return t.get(`/api/v1/longevity/${e}/aging-hallmarks`)},getTherapies:()=>{const e=r();return t.get(`/api/v1/longevity/${e}/therapies`)},checkDrugInteractions:e=>t.post("/api/advanced/drug-interactions",e)},w={getLogs:e=>t.get("/api/audit/logs",{params:e}),exportLogs:()=>t.get("/api/audit/logs/export")},k={get:()=>t.get("/api/settings/preferences"),update:e=>t.put("/api/settings/preferences",e)},$={getMembers:()=>t.get("/api/team/members"),updateRole:(e,a)=>t.put(`/api/team/members/${e}/role`,{role:a})},S={getReports:()=>t.get("/api/reports")};export{h as a,S as b,f as c,w as d,t as e,d as h,k as p,y as r,m as s,$ as t,v as w};
//# sourceMappingURL=api-C2ULvajz.js.map
